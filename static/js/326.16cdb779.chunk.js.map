{"version":3,"file":"static/js/326.16cdb779.chunk.js","mappings":"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","sources":["src/services/notebook.ts","src/hooks/useNoteStorage.ts","src/styles.ts","src/components/HeaderSelectBar.tsx","src/hooks/useKeywordStorage.ts","src/components/SearchBar.tsx","src/screens/main/EditPageScreen.tsx","src/screens/main/home/ContentGroupSection.tsx","src/screens/main/home/ConfigButtonSection.tsx","src/screens/main/home/HomeScreen.tsx","src/screens/main/MovePageScreen.tsx","src/screens/main/NoteListSection.tsx","src/screens/main/RecentPageScreen.tsx","src/screens/main/NotePageScreen.tsx","src/screens/main/ArchiveScreen.tsx","src/screens/index.ts","src/screens/main/EmptyPageScreen.tsx","src/screens/main/EmptyContentScreen.tsx","src/navigation/Drawer.tsx","src/navigation/index.tsx"],"sourcesContent":["import { Content, PostContent, Link } from '../types';\r\nimport { axiosCreate } from '@blacktokki/account';\r\n\r\nconst axios = axiosCreate(\"notebook\")\r\n\r\nexport const getContentOne = async (id:number)=>{\r\n    return (await axios.get(`/api/v1/content/${id}`)).data as Content\r\n}\r\n\r\nexport const getContentList = async (parentId?:number, types?: Content['type'][])=>{\r\n    const parentIdParam = parentId !== undefined?`&parentId=${parentId}`: ''\r\n    const typeParam = types !== undefined?`&types=${types.join(',')}` : ''\r\n    return (await axios.get(`/api/v1/content?self=true&size=256${parentIdParam}${typeParam}`)).data.value as Content[]\r\n}\r\n\r\nexport const postContent = async (postContent:PostContent)=>{\r\n    return ((await axios.post(`/api/v1/content`, postContent)).data as Content).id\r\n}\r\n\r\nexport const patchContent = async ({id, updated}:{id:number, updated:PostContent})=>{\r\n    await axios.patch(`/api/v1/content`,{ids: [id], updated})\r\n}\r\n\r\nexport const deleteContent = async (id: number) =>{\r\n    await axios.delete(`/api/v1/content/${id}`)\r\n}\r\n\r\nconst _tmp = (re:RegExp, description :string)=>{\r\n    let str = description;\r\n    let index = 0;\r\n    let match;\r\n    let arr = []\r\n    while ((match = new RegExp(re).exec(str)) != null) {\r\n      arr.push({index, str:str.substring(0, match.index)})\r\n      const end = match.index + match[0].length\r\n      arr.push({index:index + match.index, str:str.substring(match.index, end)})\r\n      index += end;\r\n      str = str.substring(end)\r\n    }\r\n    arr.push({index, str})\r\n    return arr\r\n  }\r\n\r\nconst re = /https?:\\/\\/(?:www\\\\.)?[-a-zA-Z0-9@:%._\\+~#=]{1,256}\\.[a-zA-Z0-9()]{1,6}\\b(?:[-a-zA-Z0-9()@:%_\\+.~#?&\\/=]*)/gi\r\n\r\nconst toUrls = (str:string)=>{\r\n    return _tmp(re, str).filter((v, i)=>i % 2 == 1).map(v=>v.str)\r\n}\r\n\r\nexport const previewScrap = async (preview: {query:string}) => {\r\n    const data:Link[] = []\r\n    for (const query of toUrls(preview.query)){\r\n        data.push((await axios.get(`/api/v1/preview/autocomplete?query=${query}`)).data)\r\n    }\r\n    return data\r\n}\r\n\r\n","import { useQuery, useMutation, useQueryClient } from 'react-query';\r\nimport AsyncStorage from '@react-native-async-storage/async-storage';\r\nimport { Content, PostContent } from '../types';\r\nimport { deleteContent, getContentList, patchContent, postContent } from '../services/notebook';\r\nimport { useAuthContext } from '@blacktokki/account';\r\n\r\nconst PAGE_STORAGE_KEY = '@blacktokki:notebook:contents';\r\nconst RECENT_PAGES_KEY = '@blacktokki:notebook:recent_pages';\r\nconst ONLINE = true;\r\nlet lastPage:string|undefined\r\n\r\nconst getContents = async (type:\"NOTE\"|\"SNAPSHOT\"): Promise<Content[]> => {\r\n  if (ONLINE){\r\n    return (await getContentList(undefined,[type]))\r\n  }\r\n  if(type===\"SNAPSHOT\"){\r\n    return []\r\n  }\r\n  try {\r\n    const jsonValue = await AsyncStorage.getItem(PAGE_STORAGE_KEY);\r\n    return jsonValue ? JSON.parse(jsonValue) : [];\r\n  } catch (e) {\r\n    console.error('Error loading page contents', e);\r\n    return [];\r\n  }\r\n};\r\n\r\nconst getNoteContents = async () => await getContents(\"NOTE\")\r\n\r\nconst saveNoteContents = async (contents: (Content|PostContent)[], id?:number): Promise<void> => {\r\n  if (ONLINE){\r\n    const content = contents.find(v=>id===(v as {id?:number}).id);\r\n    if (content){\r\n      const savedId = await (id?(patchContent({id, updated:content}).then(()=>id)):postContent(content));\r\n      const snapshot:Content|PostContent = {...content, type:\"SNAPSHOT\", id:undefined, parentId:savedId}\r\n      await postContent(snapshot)\r\n    }\r\n  }\r\n  try {\r\n    const jsonValue = JSON.stringify(contents);\r\n    await AsyncStorage.setItem(PAGE_STORAGE_KEY, jsonValue);\r\n  } catch (e) {\r\n    console.error('Error saving page contents', e);\r\n  }\r\n};\r\n  \r\nconst getRecentPages = async (): Promise<string[]> => {\r\n  try {\r\n    const jsonValue = await AsyncStorage.getItem(RECENT_PAGES_KEY);\r\n    return jsonValue ? JSON.parse(jsonValue) : [];\r\n  } catch (e) {\r\n    console.error('Error loading recent pages', e);\r\n    return [];\r\n  }\r\n};\r\n  \r\nconst saveRecentPages = async (titles: string[]): Promise<void> => {\r\n  try {\r\n    const jsonValue = JSON.stringify(titles);\r\n    await AsyncStorage.setItem(RECENT_PAGES_KEY, jsonValue);\r\n  } catch (e) {\r\n    console.error('Error saving recent pages', e);\r\n  }\r\n};\r\n  \r\nexport const useNotePages = () => {\r\n  return useQuery({\r\n    queryKey: ['pageContents'],\r\n    queryFn: getNoteContents,\r\n  });\r\n};\r\n\r\nexport const useSnapshotPages = () => {\r\n  return useQuery({\r\n    queryKey: ['snapshotContents'],\r\n    queryFn: async () => await getContents(\"SNAPSHOT\"),\r\n  });\r\n};\r\n\r\nexport const useNotePage = (title: string) => {\r\n  const queryClient = useQueryClient()\r\n  return useQuery({\r\n    queryKey: ['pageContent', title],\r\n    queryFn: async () => {\r\n      const contents = await getNoteContents();\r\n      const page = contents.find(c => c.title === title);\r\n      \r\n      // Add to recent pages\r\n      if (page) {\r\n        const recentPages = await getRecentPages();\r\n        if (recentPages.find(v=>v===title)===undefined){\r\n          lastPage = title;\r\n          await queryClient.invalidateQueries({ queryKey: ['lastPage'] });\r\n        }\r\n      }\r\n      return page || { title, description: '' };\r\n    },\r\n  });\r\n};\r\n  \r\n  export const useRecentPages = () => {\r\n    return useQuery({\r\n      queryKey: ['recentPages'],\r\n      queryFn: async () => {\r\n        const recentTitles = await getRecentPages();\r\n        const contents = await getNoteContents();\r\n        return recentTitles\r\n          .map(title => contents.find(c => c.title === title))\r\n          .filter(c => c !== undefined) as Content[];\r\n      },\r\n    });\r\n  };\r\n\r\n  export const useLastPage = () => {\r\n    return useQuery({\r\n      queryKey: ['lastPage'],\r\n      queryFn: async() => {\r\n        const contents = await getNoteContents();\r\n        return contents.find(v=>v.title === lastPage)\r\n      } \r\n    });\r\n  }\r\n  \r\n  export const useCreateOrUpdatePage = () => {\r\n    const queryClient = useQueryClient();\r\n    const { auth } = useAuthContext()\r\n    return useMutation({\r\n      mutationFn: async ({ title, description }: {title:string, description:string}) => {\r\n        const contents = await getNoteContents();\r\n        const page = contents.find(c => c.title === title);\r\n        \r\n        let updatedContents: (Content|PostContent)[];\r\n        if (page) {\r\n          updatedContents = contents.map((c, i) => \r\n            c.id === page.id ? { ...c, description } : c\r\n          );\r\n        } else {\r\n          const newPage:PostContent = { title, description, input:title, userId:auth.user?.id || 0, parentId:0, type:'NOTE', order:0, option: {} }\r\n          updatedContents = [...contents, newPage];\r\n        }\r\n        \r\n        await saveNoteContents(updatedContents, page?.id);\r\n        return { title, description };\r\n      },\r\n      onSuccess: async (data) => {\r\n        await queryClient.invalidateQueries({ queryKey: ['pageContents'] });\r\n        await queryClient.invalidateQueries({ queryKey: ['snapshotContents'] });\r\n        await queryClient.invalidateQueries({ queryKey: ['pageContent', data.title] });\r\n        await queryClient.invalidateQueries({ queryKey: ['recentPages'] });\r\n      },\r\n    });\r\n  };\r\n  \r\n  export const useMovePage = () => {\r\n    const queryClient = useQueryClient();\r\n    \r\n    return useMutation({\r\n      mutationFn: async ({ oldTitle, newTitle, description }: { oldTitle: string, newTitle: string, description?:string }) => {\r\n        const contents = await getNoteContents();\r\n        const page = contents.find(c => c.title === oldTitle);\r\n        \r\n        if (!page) {\r\n          throw new Error('Page not found');\r\n        }\r\n        \r\n        if (contents.some(c => c.title === newTitle)) {\r\n          throw new Error('Page with new title already exists');\r\n        }\r\n        \r\n        const updatedContents = contents.map(c => \r\n          c.title === oldTitle ? { ...c, title: newTitle, description:description || page.description } : c\r\n        );\r\n        \r\n        await saveNoteContents(updatedContents, page.id);\r\n        \r\n        // Update recent pages\r\n        const recentPages = await getRecentPages();\r\n        const updatedRecentPages = recentPages.map(title => \r\n          title === oldTitle ? newTitle : title\r\n        );\r\n        await saveRecentPages(updatedRecentPages);\r\n        \r\n        return { oldTitle, newTitle };\r\n      },\r\n      onSuccess: (data) => {\r\n        queryClient.invalidateQueries({ queryKey: ['pageContents'] });\r\n        queryClient.invalidateQueries({ queryKey: ['snapshotContents'] });\r\n        queryClient.invalidateQueries({ queryKey: ['pageContent', data.oldTitle] });\r\n        queryClient.invalidateQueries({ queryKey: ['pageContent', data.newTitle] });\r\n        queryClient.invalidateQueries({ queryKey: ['recentPages'] });\r\n      },\r\n    });\r\n  };\r\n\r\nexport const useAddRecentPage = () => {\r\n  const queryClient = useQueryClient();\r\n  \r\n  return useMutation({\r\n    mutationFn: async ({title, direct}:{title:string, direct?:boolean}) => {\r\n      \r\n      // Update recent pages\r\n      const recentPages = await getRecentPages();\r\n      if (recentPages.find(v=>v===title) === undefined || direct){\r\n        const updatedRecentPages = [title, ...recentPages]\r\n        await saveRecentPages(updatedRecentPages);\r\n      }\r\n      \r\n      return { title };\r\n    },\r\n    onSuccess: (data) => {\r\n      queryClient.invalidateQueries({ queryKey: ['recentPages'] });\r\n    },\r\n  });\r\n}\r\n\r\nexport const useDeleteRecentPage = () => {\r\n  const queryClient = useQueryClient();\r\n  \r\n  return useMutation({\r\n    mutationFn: async (title:string) => {\r\n      \r\n      // Update recent pages\r\n      const recentPages = await getRecentPages();\r\n      const updatedRecentPages = recentPages.filter(_title => \r\n        title !== _title\r\n      );\r\n      lastPage = undefined\r\n      await saveRecentPages(updatedRecentPages);\r\n      \r\n      return { title };\r\n    },\r\n    onSuccess: (data) => {\r\n      queryClient.invalidateQueries({ queryKey: ['recentPages'] });\r\n      queryClient.invalidateQueries({ queryKey: ['pageContent'] });\r\n      queryClient.invalidateQueries({ queryKey: ['lastPage']})\r\n    },\r\n  });\r\n}","import { StyleSheet } from 'react-native';\r\n\r\nexport const createCommonStyles = (theme: 'light' | 'dark') => {\r\n  return StyleSheet.create({\r\n    container: {\r\n      flex: 1,\r\n      backgroundColor: theme === 'dark' ? '#121212' : '#FFFFFF',\r\n      paddingHorizontal: 24,\r\n      paddingVertical: 16,\r\n    },\r\n    card: {\r\n      backgroundColor: theme === 'dark' ? '#1E1E1E' : '#FFFFFF',\r\n      borderRadius: 8,\r\n      padding: 16,\r\n      marginBottom: 16,\r\n      borderWidth: 1,\r\n      borderColor: theme === 'dark' ? '#333333' : '#EEEEEE',\r\n      shadowColor: theme === 'dark' ? '#000000' : '#888888',\r\n      shadowOffset: { width: 0, height: 2 },\r\n      shadowOpacity: 0.1,\r\n      shadowRadius: 4,\r\n      elevation: 2,\r\n    },\r\n    title: {\r\n      fontSize: 18,\r\n      fontWeight: 'bold',\r\n      marginBottom: 8,\r\n      color: theme === 'dark' ? '#FFFFFF' : '#000000',\r\n    },\r\n    text: {\r\n      fontSize: 16,\r\n      color: theme === 'dark' ? '#E4E4E4' : '#333333',\r\n      lineHeight: 24,\r\n    },\r\n    button: {\r\n      backgroundColor: theme === 'dark' ? '#2C73B5' : '#3498DB',\r\n      borderRadius: 4,\r\n      padding: 12,\r\n      alignItems: 'center',\r\n      marginVertical: 8,\r\n    },\r\n    buttonText: {\r\n      color: '#FFFFFF',\r\n      fontWeight: '500',\r\n      fontSize: 16,\r\n    },\r\n    searchButton: {\r\n      backgroundColor: '#3498DB',\r\n      justifyContent: 'center',\r\n      alignItems: 'center',\r\n      width: 36,\r\n      height: 36,\r\n      borderRadius: 4,\r\n      marginHorizontal: 4,\r\n    },\r\n    resultSeparator: {\r\n      height: 1,\r\n      backgroundColor: theme === 'dark' ? '#333333' : '#EEEEEE',\r\n    },\r\n    input: {\r\n      backgroundColor: theme === 'dark' ? '#222222' : '#FFFFFF',\r\n      borderWidth: 1,\r\n      borderColor: theme === 'dark' ? '#444444' : '#CCCCCC',\r\n      borderRadius: 4,\r\n      padding: 10,\r\n      color: theme === 'dark' ? '#E4E4E4' : '#333333',\r\n      marginBottom: 16,\r\n    },\r\n    separator: {\r\n      height: 1,\r\n      backgroundColor: theme === 'dark' ? '#333333' : '#EEEEEE',\r\n      marginVertical: 12,\r\n    },\r\n    smallText: {\r\n      fontSize: 14,\r\n      color: theme === 'dark' ? '#BBBBBB' : '#777777',\r\n    },\r\n    header: {\r\n      flexDirection: 'row',\r\n      justifyContent: 'space-between',\r\n      alignItems: 'center',\r\n      marginBottom: 16,\r\n    },\r\n    flex: {\r\n      flex: 1,\r\n    },\r\n    row: {\r\n      flexDirection: 'row',\r\n      alignItems: 'center',\r\n    },\r\n    centerContent: {\r\n      justifyContent: 'center',\r\n      alignItems: 'center',\r\n    },\r\n  });\r\n};","import { TouchableOpacity, View, FlatList, StyleSheet } from \"react-native\";\r\nimport Icon from 'react-native-vector-icons/FontAwesome';\r\nimport { createCommonStyles } from \"../styles\";\r\nimport { Text, useColorScheme } from \"@blacktokki/core\";\r\n\r\nexport interface NodeData {\r\n    path: string;\r\n    title: string;\r\n    level: number;\r\n    header: string;\r\n    description: string;\r\n  }\r\n  \r\nexport function parseHtmlToSections(html: string): NodeData[] {\r\n    const parser = new DOMParser();\r\n    const doc = parser.parseFromString(html, \"text/html\");\r\n  \r\n    const result: NodeData[] = [{path:\"\", title:\"\", header:\"\", level:0, description:\"\"}];\r\n  \r\n    const headings: string[] = [\"H1\", \"H2\", \"H3\", \"H4\", \"H5\", \"H6\"];\r\n    const headerStack: { level: number; title: string }[] = [];\r\n  \r\n    let current: NodeData | null = null;\r\n    let cursor = doc.body.firstChild;\r\n  \r\n    const flushCurrent = () => {\r\n      if (current) {\r\n        result.push(current);\r\n        current = null;\r\n      }\r\n    };\r\n  \r\n    while (cursor) {\r\n      if (cursor.nodeType === Node.ELEMENT_NODE) {\r\n        const el = cursor as HTMLElement;\r\n        if (headings.includes(el.tagName)) {\r\n          flushCurrent();\r\n  \r\n          const level = parseInt(el.tagName.substring(1));\r\n          const title = el.textContent?.trim() || \"\";\r\n  \r\n          //   \r\n          while (headerStack.length > 0 && headerStack[headerStack.length - 1].level >= level) {\r\n            headerStack.pop();\r\n          }\r\n          headerStack.push({ level, title });\r\n  \r\n          const path = headerStack.map(h => h.title).join(\" > \");\r\n  \r\n          current = {\r\n            path,\r\n            title,\r\n            level,\r\n            header: el.outerHTML,\r\n            description: \"\",\r\n          };\r\n        } else if (current) {\r\n          current.description += el.outerHTML;\r\n        } else {\r\n          //    \r\n          result[0].description += el.outerHTML;\r\n        }\r\n      } else if (cursor.nodeType === Node.TEXT_NODE && current) {\r\n        current.description += cursor.textContent || \"\";\r\n      }\r\n  \r\n      cursor = cursor.nextSibling;\r\n    }\r\n  \r\n    flushCurrent();\r\n    return result;\r\n}\r\n\r\nexport default function HeaderSelectBar(props:{root:string, path:string, onPress:(item:NodeData)=>void, data:NodeData[]}){\r\n  const theme = useColorScheme();\r\n  const commonStyles = createCommonStyles(theme);\r\n  const renderItem = (item:NodeData) => <TouchableOpacity\r\n    style={styles.resultItem}\r\n    onPress={() => props.onPress(item)}\r\n  >\r\n    {item.level===0 && <Icon name=\"file-text-o\" size={18} color=\"#FFFFFF\"/>}\r\n    <Text style={[props.path===item.path?[commonStyles.title, {marginBottom:5, marginTop:3}]:commonStyles.text, styles.resultText, {left:item.level * 10 + 10}]}>{item.level===0?props.root:item.title}</Text>\r\n  </TouchableOpacity>\r\n  return <View style={[styles.resultsContainer, theme === 'dark' ? styles.darkResults : styles.lightResults]}>\r\n    <FlatList\r\n      data={props.data}\r\n      keyExtractor={(item) => item.path}\r\n      renderItem={({ item }) => renderItem(item)}\r\n      ItemSeparatorComponent={() => <View style={commonStyles.resultSeparator} />}\r\n    />\r\n  </View>\r\n}\r\n\r\n\r\nconst styles = StyleSheet.create({\r\n  backButton: {\r\n    padding: 8,\r\n  },\r\n  resultItem: {\r\n    padding: 10,\r\n    flexDirection:'row',\r\n  },\r\n  resultText: {\r\n    fontSize: 14,\r\n  },\r\n  buttonContainer: {\r\n    flexDirection: 'row',\r\n    justifyContent: 'space-between',\r\n  },\r\n  resultsContainer: {\r\n    borderWidth: 1,\r\n    borderRadius: 4,\r\n  },\r\n  lightResults: {\r\n    backgroundColor: '#FFFFFF',\r\n    borderColor: '#CCCCCC',\r\n  },\r\n  darkResults: {\r\n    backgroundColor: '#222222',\r\n    borderColor: '#444444',\r\n  },\r\n})","import AsyncStorage from \"@react-native-async-storage/async-storage\";\r\nimport { useMutation, useQuery, useQueryClient } from \"react-query\";\r\n\r\nconst KEYWORDS_KEY = '@blacktokki:notebook:keywords';\r\n\r\nexport type KeywordContent = {\r\n  type: \"_NOTELINK\",\r\n  name: string, \r\n  title: string,\r\n  section?: string\r\n} | {\r\n  type:  \"_KEYWORD\",\r\n  title: string\r\n}\r\n\r\nconst getKeywords = async (): Promise<KeywordContent[]> => {\r\ntry {\r\n    const jsonValue = await AsyncStorage.getItem(KEYWORDS_KEY);\r\n    return jsonValue ? JSON.parse(jsonValue) : [];\r\n} catch (e) {\r\n    console.error('Error loading keywords', e);\r\n    return [];\r\n}\r\n};\r\n    \r\nconst saveKeywords = async (keywords: KeywordContent[]): Promise<void> => {\r\ntry {\r\n    const jsonValue = JSON.stringify(keywords);\r\n    await AsyncStorage.setItem(KEYWORDS_KEY, jsonValue);\r\n} catch (e) {\r\n    console.error('Error saving keywords', e);\r\n}\r\n};\r\n\r\nexport const useKeywords = () => {\r\n    return useQuery({\r\n        queryKey: ['keywords'],\r\n        queryFn: async () => {\r\n        return getKeywords()\r\n        },\r\n    });\r\n};\r\n\r\nexport const useAddKeyowrd = () => {\r\n  const queryClient = useQueryClient();\r\n  \r\n  return useMutation({\r\n    mutationFn: async (keyword:KeywordContent) => {\r\n      const keywords = await getKeywords();\r\n      const newKeywords = [...new Set([JSON.stringify(keyword), ...keywords.map(v=>JSON.stringify(v))])].map(v=>JSON.parse(v))\r\n      await saveKeywords(newKeywords)\r\n    },\r\n    onSuccess: async() => {\r\n      await queryClient.invalidateQueries({ queryKey: ['keywords'] });\r\n    },\r\n  });\r\n}","import React, { useCallback, useEffect, useMemo, useRef, useState } from 'react';\r\nimport { View, TextInput, TouchableOpacity, FlatList, Text, StyleSheet, PanResponder } from 'react-native';\r\nimport Icon from 'react-native-vector-icons/FontAwesome';\r\nimport { useFocusEffect, useNavigation } from '@react-navigation/native';\r\nimport { StackNavigationProp } from '@react-navigation/stack';\r\nimport { Content, NavigationParamList } from '../types';\r\nimport { useNotePages } from '../hooks/useNoteStorage';\r\nimport { createCommonStyles } from '../styles';\r\nimport { useColorScheme } from '@blacktokki/core';\r\nimport { parseHtmlToSections } from './HeaderSelectBar';\r\nimport { KeywordContent, useAddKeyowrd, useKeywords } from '../hooks/useKeywordStorage';\r\n\r\nlet _searchText = ''\r\n\r\ntype SearchContent = Content | KeywordContent\r\n\r\nfunction extractHtmlLinksWithQuery(text:string) {\r\n  const parser = new DOMParser();\r\n  const doc = parser.parseFromString(text, 'text/html');\r\n\r\n  //  a  \r\n  const links = doc.querySelectorAll('a');\r\n\r\n  //   \r\n  const matches = Array.from(links).map(a => ({\r\n    text: a.textContent?.trim() || a.href,\r\n    url: a.href\r\n  }));\r\n\r\n  return matches;\r\n}\r\n\r\nexport function urlToNoteLink(url:string){\r\n  const newLocation = new URL(url);\r\n  if (location.origin  === newLocation.origin){\r\n    const params = new URLSearchParams(newLocation.search);\r\n    const title = params.get(\"title\")\r\n    const section = params.get(\"section\") || undefined\r\n    if (title){\r\n      return {title, section}\r\n    }\r\n  }\r\n}\r\n\r\nexport function getNoteLinks(pages:Content[]){\r\n  return pages.flatMap(v=>extractHtmlLinksWithQuery(v.description || '').map((v2)=>{\r\n    const noteLink = urlToNoteLink(v2.url);\r\n    if(noteLink && v2.text !== noteLink.title /*&& v2.text.startsWith(v.title)*/){\r\n      return {type: \"_NOTELINK\" as \"_NOTELINK\", name:v2.text, ...noteLink, origin:v.title}\r\n    }\r\n  }).filter(v=>v !==undefined))\r\n}\r\n\r\nexport const getFilteredPages = (pages:Content[], searchText:string) => {\r\n  const lowerCaseSearch = searchText.toLowerCase()\r\n  const noteLinks = getNoteLinks(pages)\r\n  return [\r\n    ...pages.filter(page =>page.title.toLowerCase().startsWith(lowerCaseSearch)),\r\n    ...noteLinks.filter(v=>v.name.toLowerCase().startsWith(lowerCaseSearch))\r\n  ]\r\n}\r\n\r\nexport const RandomButton = () => {\r\n  const theme = useColorScheme();\r\n  const commonStyles = createCommonStyles(theme);\r\n  const navigation = useNavigation<StackNavigationProp<NavigationParamList>>();\r\n  const { data: pages = [] } = useNotePages();\r\n  const randomPages = pages.filter(v=>v.description);\r\n  return randomPages && <TouchableOpacity\r\n    style={commonStyles.searchButton}\r\n    onPress={()=>{\r\n      const page = randomPages[Math.floor(Math.random() * randomPages.length)];\r\n      const sections = parseHtmlToSections(page.description || '')\r\n      navigation.navigate('NotePage', { title:page.title, section: sections[Math.floor(Math.random() * sections.length)].title });\r\n    }}\r\n>\r\n  <Icon name={\"random\"} size={18} color=\"#FFFFFF\" />\r\n</TouchableOpacity>\r\n}\r\n\r\nexport const titleFormat = (item:{title:string, section?:string}) => `${item.title}${item.section?(\"  \"+item.section):\"\"}`\r\n\r\nexport const SearchBar: React.FC<{handlePress?:(title:string)=>void, useRandom?:boolean;}> = ({handlePress, useRandom=true}) => {\r\n  const [searchText, setSearchText] = useState(_searchText);\r\n  const [showResults, setShowResults] = useState(false);\r\n  const navigation = useNavigation<StackNavigationProp<NavigationParamList>>();\r\n  const theme = useColorScheme();\r\n  const commonStyles = createCommonStyles(theme);\r\n  const inputRef = useRef<TextInput|null>()\r\n  const { data:keywords = []} = useKeywords()\r\n  const addKeyword = useAddKeyowrd()\r\n  const { data: pages = [] } = useNotePages();\r\n  const filteredPages:SearchContent[] = searchText.length > 0\r\n    ? getFilteredPages(pages, searchText).slice(0, 10)\r\n    : keywords.slice(0, 10)\r\n\r\n  const handleSearch = () => {\r\n    if (searchText.trim()) {\r\n      handlePagePress(searchText.trim())\r\n      addKeyword.mutate({type:\"_KEYWORD\", title:searchText.trim()})\r\n    }\r\n  };\r\n\r\n  const handlePagePress = (title: string, section?:string) => {\r\n    handlePress?handlePress(title):navigation.navigate('NotePage', { title, section });\r\n    setSearchText('');\r\n  };\r\n\r\n  const searchHandlers = useMemo(()=>PanResponder.create({\r\n      onPanResponderStart: handleSearch,\r\n    }).panHandlers\r\n  ,[searchText])\r\n\r\n  const pagePressHandlers = useCallback((item:SearchContent)=>{\r\n    return PanResponder.create({\r\n      onPanResponderStart:() => {\r\n        if (item.type === \"_NOTELINK\" && item.section){\r\n          handlePagePress(item.title, item.section)\r\n          addKeyword.mutate(item)\r\n        }\r\n        else {\r\n          handlePagePress(item.title)\r\n          addKeyword.mutate({type:\"_KEYWORD\", title:item.title})\r\n        }\r\n      }\r\n    }).panHandlers\r\n  }, [])\r\n\r\n  useEffect(()=>{\r\n    _searchText = searchText;\r\n  }, [searchText])\r\n\r\n  useFocusEffect(()=>{\r\n    if (searchText !== _searchText){\r\n      setSearchText(_searchText)\r\n    }\r\n  })\r\n\r\n  return (\r\n    <View style={styles.container}>\r\n      <View style={styles.searchContainer}>\r\n        <TextInput\r\n          ref={ref=>{inputRef.current = ref}}\r\n          style={[commonStyles.input, styles.searchInput]}\r\n          value={searchText}\r\n          onChangeText={(text) => {\r\n            setSearchText(text);\r\n          }}\r\n          placeholder=\"\"\r\n          placeholderTextColor={theme === 'dark' ? '#777777' : '#999999'}\r\n          onSubmitEditing={handleSearch}\r\n          onFocus={()=>setShowResults(true)}\r\n          onBlur={()=>setShowResults(false)}\r\n        />\r\n        <TouchableOpacity\r\n          style={commonStyles.searchButton}\r\n          onPress={handleSearch}\r\n          disabled={!searchText.trim()}\r\n        >\r\n          <Icon name={\"search\"} size={18} color=\"#FFFFFF\" />\r\n        </TouchableOpacity>\r\n        {useRandom && <RandomButton/>}\r\n      </View>\r\n      \r\n      {showResults && (\r\n        <View style={[styles.resultsContainer, theme === 'dark' ? styles.darkResults : styles.lightResults]}>\r\n          {filteredPages.length > 0 ? (\r\n            <FlatList\r\n              data={filteredPages}\r\n              keyExtractor={(item:any) => JSON.stringify([item.title, item.name, item.section])}\r\n              renderItem={({ item }) => (\r\n                <TouchableOpacity\r\n                  style={styles.resultItem}\r\n                  {...pagePressHandlers(item)}\r\n                >\r\n                  <Text style={[commonStyles.text, styles.resultText]}>{item.type===\"_NOTELINK\"?item.name:item.title}</Text>\r\n                  {item.type ===\"_NOTELINK\" && <Text style={[commonStyles.text, styles.resultText, {fontSize:12}]}>{titleFormat(item)}</Text>}\r\n                </TouchableOpacity>\r\n              )}\r\n              ItemSeparatorComponent={() => <View style={[commonStyles.resultSeparator]} />}\r\n            />\r\n          ) : searchText.trim() ? (\r\n            <TouchableOpacity\r\n              style={styles.resultItem}\r\n              {...searchHandlers}\r\n            >\r\n              <Text style={[commonStyles.text, styles.resultText]}>\r\n                \"{searchText}\"   \r\n              </Text>\r\n            </TouchableOpacity>\r\n          ) : null}\r\n        </View>\r\n      )}\r\n    </View>\r\n  );\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    position: 'relative',\r\n    width: '100%',\r\n    maxWidth: 960,\r\n    zIndex: 999,\r\n  },\r\n  searchContainer: {\r\n    flexDirection: 'row',\r\n  },\r\n  searchInput: {\r\n    flex: 1,\r\n    height: 36,\r\n    marginBottom: 0,\r\n    paddingVertical: 4,\r\n    fontSize: 14,\r\n  },\r\n  resultsContainer: {\r\n    position: 'absolute',\r\n    top: 40,\r\n    left: 0,\r\n    right: 0,\r\n    maxHeight: 500,\r\n    borderWidth: 1,\r\n    borderRadius: 4,\r\n    zIndex: 999,\r\n    elevation: 5,\r\n  },\r\n  lightResults: {\r\n    backgroundColor: '#FFFFFF',\r\n    borderColor: '#CCCCCC',\r\n  },\r\n  darkResults: {\r\n    backgroundColor: '#222222',\r\n    borderColor: '#444444',\r\n  },\r\n  resultItem: {\r\n    flexDirection:'row',\r\n    justifyContent:'space-between',\r\n    padding: 10,\r\n  },\r\n  resultText: {\r\n    fontSize: 14,\r\n  },\r\n});\r\n","import React, { useEffect, useState } from 'react';\r\nimport { View, Text, TouchableOpacity, ScrollView, Alert, StyleSheet } from 'react-native';\r\nimport { RouteProp, useFocusEffect, useNavigation, useRoute } from '@react-navigation/native';\r\nimport { StackNavigationProp } from '@react-navigation/stack';\r\nimport { NavigationParamList } from '../../types';\r\nimport { useNotePage, useCreateOrUpdatePage, useNotePages } from '../../hooks/useNoteStorage';\r\nimport { createCommonStyles } from '../../styles';\r\nimport { useColorScheme } from '@blacktokki/core';\r\nimport { Editor } from '@blacktokki/editor';\r\nimport { getFilteredPages, titleFormat } from '../../components/SearchBar';\r\n\r\ntype EditPageScreenRouteProp = RouteProp<NavigationParamList, 'EditPage'>;\r\n\r\nexport const EditPageScreen: React.FC = () => {\r\n  const route = useRoute<EditPageScreenRouteProp>();\r\n  const { title } = route.params;\r\n  const navigation = useNavigation<StackNavigationProp<NavigationParamList>>();\r\n  const theme = useColorScheme();\r\n  const commonStyles = createCommonStyles(theme);\r\n  \r\n  const { data: page, isLoading } = useNotePage(title);\r\n  const { data: pages = [] } = useNotePages();\r\n  const [content, setContent] = useState('');\r\n  \r\n  const mutation = useCreateOrUpdatePage();\r\n  const handleSave = () => {\r\n    if (page?.description === content){\r\n      navigation.navigate('NotePage', { title });\r\n      return;\r\n    }\r\n    mutation.mutate(\r\n      { title, description: content },\r\n      {\r\n        onSuccess: () => {\r\n          navigation.navigate('NotePage', { title });\r\n        },\r\n        onError: (error:any) => {\r\n          Alert.alert('', error.message || '    .');\r\n        }\r\n      }\r\n    );\r\n  };\r\n  \r\n  const handleCancel = () => {\r\n    navigation.canGoBack() ? navigation.goBack() : navigation.navigate('NotePage', { title });\r\n  };\r\n\r\n  useEffect(()=>{\r\n    if(!isLoading && page?.description){\r\n      setContent(page?.description)\r\n    }\r\n  }, [isLoading])\r\n  \r\n  useFocusEffect(()=>{\r\n    const callback = (event:any) => {\r\n      event.preventDefault();\r\n      event.returnValue = '';\r\n    };\r\n    window.addEventListener('beforeunload', callback);\r\n    return () => window.removeEventListener('beforeunload', callback);\r\n  })\r\n  console.log(content)\r\n  return (\r\n    <View style={commonStyles.container}>\r\n      <View style={commonStyles.header}>\r\n        <Text style={[commonStyles.title, { flex: 1 }]}>\r\n          {title} - \r\n        </Text>\r\n      </View>\r\n      <Editor\r\n        active\r\n        value={content}\r\n        setValue={setContent}\r\n        theme={theme}\r\n        autoComplete={[{\r\n          trigger: '[',\r\n          getMatchedChars: (pattern) => {\r\n            return [{type:\"_NOTELINK\", name:pattern, title, section:pattern}, ...getFilteredPages(pages, pattern)].map(v=>{\r\n              const text = v.type === '_NOTELINK' ? (v.name + `(${titleFormat(v)})`): v.title;\r\n              const url = encodeURI(v.type === '_NOTELINK' && v.section ? `?title=${v.title}&section=${v.section}`:`?title=${v.title}`);\r\n              return {\r\n                text,\r\n                value:`<a href=${url}>${text}</a>`,\r\n              }})\r\n          }\r\n        }]}\r\n      />\r\n      \r\n      <View style={styles.buttonContainer}>\r\n        <TouchableOpacity \r\n          style={[commonStyles.button, styles.cancelButton]} \r\n          onPress={handleCancel}\r\n        >\r\n          <Text style={commonStyles.buttonText}></Text>\r\n        </TouchableOpacity>\r\n        <TouchableOpacity \r\n          style={[commonStyles.button, styles.saveButton]} \r\n          onPress={handleSave}\r\n        >\r\n          <Text style={commonStyles.buttonText}></Text>\r\n        </TouchableOpacity>\r\n      </View>\r\n    </View>\r\n  );\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n  buttonContainer: {\r\n    flexDirection: 'row',\r\n    justifyContent: 'space-between',\r\n  },\r\n  cancelButton: {\r\n    flex: 1,\r\n    marginRight: 8,\r\n    backgroundColor: '#95A5A6',\r\n  },\r\n  saveButton: {\r\n    flex: 1,\r\n    marginLeft: 8,\r\n  },\r\n});\r\n","import * as React from 'react';\r\nimport { List, TouchableRipple } from 'react-native-paper';\r\nimport { navigate } from '@blacktokki/navigation';\r\n\r\nimport { useLangContext, useResizeContext } from '@blacktokki/core';\r\nimport { useRecentPages, useNotePages, useDeleteRecentPage, useLastPage, useAddRecentPage } from '../../../hooks/useNoteStorage';\r\n\r\nconst getItemPadding = (isLandscape:boolean)=>{\r\n  return isLandscape?5:8\r\n}\r\n\r\nexport const EmptyPageButton = () => {\r\n  const { lang } = useLangContext()\r\n  return <List.Item left={_props=><List.Icon {..._props} icon={\"note-remove\"} />} title={lang(\"Empty Page\")} onPress={()=>navigate('EmptyPages')} />\r\n}\r\n\r\nexport const EmptyContentButton = () => {\r\n  const { lang } = useLangContext()\r\n  return <List.Item left={_props=><List.Icon {..._props} icon={\"note-edit\"} />} title={lang(\"Empty Content\")} onPress={()=>navigate('EmptyContents')} />\r\n}\r\n\r\nconst ContentGroupSection = ( props : {type:'PAGE'|'LAST'} | {type:'NOTE', noteCount:number}) => {\r\n  const { lang } = useLangContext()\r\n  const notes = useNotePages()\r\n  const pages = useRecentPages()\r\n  const { data:lastPage } = useLastPage()\r\n  const tabRef = React.useRef<NodeJS.Timeout>();\r\n  const addRecentPage = useAddRecentPage()\r\n  const deleteRecentPage = useDeleteRecentPage()\r\n  const data = (props.type === 'NOTE'? notes.data?.filter(v=>v.description).sort((a, b)=>new Date(b.updated).getTime() - new Date(a.updated).getTime() ):pages.data)\r\n  const window = useResizeContext()\r\n  const itemPadding = getItemPadding(window==='landscape')\r\n  const noteOnPress = (title:string)=> {\r\n    if (title === lastPage?.title){\r\n      if (tabRef.current){\r\n        clearTimeout(tabRef.current)\r\n        tabRef.current = undefined\r\n        addRecentPage.mutate({title});\r\n      }\r\n      else {\r\n        tabRef.current = setTimeout(()=>{tabRef.current = undefined}, 500)\r\n      }\r\n    }\r\n    navigate('NotePage', {title})\r\n  }\r\n  const noteOnLongPress = (title:string) => {\r\n    if (tabRef.current){\r\n      clearTimeout(tabRef.current)\r\n      tabRef.current = undefined\r\n    }\r\n    if (pages.data?.find(v=>v.title===title) === undefined){\r\n      addRecentPage.mutate({title, direct:true});\r\n    }\r\n    else {\r\n      deleteRecentPage.mutate(title);\r\n    }\r\n  }\r\n  return (\r\n    <List.Section>\r\n        {data && (\r\n         props.type === 'LAST'\r\n         ?(lastPage && (data?.find(v=>v.id===lastPage.id) === undefined) && <List.Item \r\n            left={(_props)=><List.Icon {..._props} icon={\"file-document\"} />}\r\n            title={lastPage.title} \r\n            onPress={()=>noteOnPress(lastPage.title)}\r\n            onLongPress={()=>noteOnLongPress(lastPage.title)}\r\n            style={{padding:itemPadding }}\r\n            titleStyle={{fontStyle:'italic'}} \r\n         />)\r\n         :props.type === 'NOTE'\r\n         ?<>{data.slice(0, props.noteCount).map(v=><List.Item \r\n          key={v.id} \r\n          left={(_props)=><List.Icon {..._props} icon={pages.data?.find(v2=>v2.title===v.title)===undefined?\"notebook\":\"notebook-edit\"} />}\r\n          title={v.title} \r\n          onPress={()=>noteOnPress(v.title)}\r\n          onLongPress={()=>noteOnLongPress(v.title)}\r\n          style={{padding:itemPadding }} \r\n        />)}\r\n        {((data?.length || 0) > props.noteCount) && <List.Item left={(_props)=><List.Icon {..._props} icon={\"notebook-multiple\"} />} title={lang(\"more...\")} onPress={()=>navigate(\"RecentPages\")} style={{padding:itemPadding}}  />}\r\n        </>\r\n        :data.map(v=><List.Item \r\n          key={v.id} \r\n          left={(_props)=><List.Icon {..._props} icon={\"file-document-edit\"} />}\r\n          right={(_props)=><TouchableRipple style={{justifyContent:'center', borderRadius:itemPadding, width:40 + itemPadding * 2, height:40 + itemPadding*2, margin:-itemPadding }} onPress={()=>deleteRecentPage.mutate(v.title)}>\r\n              <List.Icon style={{left:itemPadding -7}} icon={\"close\"} />\r\n            </TouchableRipple>}\r\n          title={v.title} \r\n          onPress={()=>navigate('NotePage', {title:v.title})} \r\n          style={{padding:itemPadding }} \r\n        />)\r\n      )}\r\n    </List.Section>\r\n  );\r\n};\r\n\r\nexport default ContentGroupSection;","import { Colors, Text, useColorScheme, useLangContext, View } from \"@blacktokki/core\";\r\nimport { TouchableOpacity } from \"react-native\";\r\nimport { createCommonStyles } from \"../../../styles\";\r\nimport { navigate } from \"@blacktokki/navigation\";\r\n\r\nexport const ArchiveButtonSection = () => {\r\n    const theme = useColorScheme();\r\n    const color = Colors[theme].text;\r\n    const commonStyles = createCommonStyles(theme);\r\n    const { lang } = useLangContext();\r\n    return (\r\n        <TouchableOpacity style={commonStyles.header} onPress={()=>navigate('Archive', {})}>\r\n            <Text style={{ fontSize: 20, color, fontWeight: '600' }}>{lang('* Archive')}</Text>\r\n            <Text>{\">\"}</Text>\r\n        </TouchableOpacity>\r\n    );\r\n  };","import React from 'react';\r\nimport { StackScreenProps } from '@react-navigation/stack';\r\nimport { ScrollView, View} from 'react-native';\r\nimport { Colors, useColorScheme, useLangContext } from '@blacktokki/core';\r\nimport { HomeSection, ConfigSections } from '@blacktokki/navigation';\r\nimport { TabViewOption } from '@blacktokki/navigation';\r\nimport ContentGroupSection, { EmptyContentButton, EmptyPageButton } from './ContentGroupSection';\r\nimport { List } from 'react-native-paper';\r\nimport { createCommonStyles } from '../../../styles';\r\nimport { SearchBar } from '../../../components/SearchBar';\r\nimport { ArchiveButtonSection } from './ConfigButtonSection';\r\n\r\n\r\nconst OpenedEditorsTabView = ()=>{\r\n  const theme = useColorScheme()\r\n  return <ScrollView style={{flex:1, backgroundColor:Colors[theme].background}}>\r\n      <ContentGroupSection type={'LAST'} />\r\n      <ContentGroupSection type={'PAGE'} />\r\n    </ScrollView>\r\n}\r\n\r\nconst NoteTabView = ()=>{\r\n  const theme = useColorScheme()\r\n  return <ScrollView style={{flex:1, backgroundColor:Colors[theme].background}}>\r\n      <ContentGroupSection type={'NOTE'} noteCount={15}/>\r\n      <EmptyPageButton/>\r\n      <EmptyContentButton/>\r\n    </ScrollView>\r\n}\r\n\r\nconst ConfigCommonView = () => {\r\n  const theme = useColorScheme()\r\n  const commonStyles = createCommonStyles(theme);\r\n  return <>\r\n    <View style={commonStyles.card}>\r\n      <ConfigSections/>\r\n    </View>\r\n    <View style={commonStyles.card}>\r\n      <ArchiveButtonSection/>\r\n    </View>\r\n  </>\r\n}\r\n\r\nconst ConfigTabView = ()=>{\r\n  const theme = useColorScheme()\r\n  const commonStyles = createCommonStyles(theme);\r\n  return <ScrollView style={{flex:1}} contentContainerStyle={[commonStyles.container, {backgroundColor:Colors[theme].background}]}>\r\n    <ConfigCommonView/>\r\n  </ScrollView>\r\n}\r\n\r\nexport default function HomeScreen({navigation, route}: StackScreenProps<any, 'Home'>) {\r\n  const { lang } = useLangContext()\r\n  const theme = useColorScheme()\r\n  const commonStyles = createCommonStyles(theme);\r\n  const title = lang('Blacktokki Notebook')\r\n  const tabViews:TabViewOption[] = [\r\n    {title: lang('Open Pages'), component:OpenedEditorsTabView, icon:<List.Icon icon={'file-document'}/>, headerRight:()=><></>},\r\n    {title: lang('Notes'), component:NoteTabView, icon:<List.Icon icon={'notebook'}/>, headerRight:()=><></>},\r\n    {title: lang('Config'), component:ConfigTabView, icon:<List.Icon icon={'dots-horizontal'}/>, headerRight:()=><></>}\r\n  ]\r\n  \r\n  return <HomeSection tabViews={tabViews} homeView={{title, headerRight:() => <SearchBar/>}} headerTitle={title}>\r\n    <View style={[commonStyles.container, {width:'100%'}]}>\r\n      <ConfigCommonView/>\r\n    </View>\r\n  </HomeSection>\r\n}\r\n","import React, { useEffect, useMemo, useState } from 'react';\r\nimport { View, Text, TouchableOpacity, Alert, StyleSheet, ScrollView } from 'react-native';\r\nimport { RouteProp, useNavigation, useRoute } from '@react-navigation/native';\r\nimport { StackNavigationProp } from '@react-navigation/stack';\r\nimport { NavigationParamList } from '../../types';\r\nimport { useCreateOrUpdatePage, useMovePage, useNotePage } from '../../hooks/useNoteStorage';\r\nimport { createCommonStyles } from '../../styles';\r\nimport { useColorScheme, useResizeContext } from '@blacktokki/core';\r\nimport { EditorViewer } from '@blacktokki/editor';\r\nimport { SearchBar, titleFormat } from '../../components/SearchBar';\r\nimport HeaderSelectBar, { parseHtmlToSections } from '../../components/HeaderSelectBar';\r\n\r\ntype MovePageScreenRouteProp = RouteProp<NavigationParamList, 'MovePage'>;\r\n\r\n\r\nexport const MovePageScreen: React.FC = () => {\r\n  const route = useRoute<MovePageScreenRouteProp>();\r\n  const { title, section } = route.params;\r\n  const navigation = useNavigation<StackNavigationProp<NavigationParamList>>();\r\n  const theme = useColorScheme();\r\n  const window = useResizeContext()\r\n  const [newTitle, setNewTitle] = useState(title);\r\n  const { data: page, isLoading } = useNotePage(title);\r\n  const paragraph = parseHtmlToSections(page?.description|| '')\r\n  const path = paragraph.find(v=>v.title === section)?.path || ''\r\n  const { data: newPage } = useNotePage(newTitle);\r\n  const newParagraph = parseHtmlToSections(newPage?.description || '').filter(v=>title!==newTitle || path===v.path || !v.path.startsWith(path))\r\n  const [newPath,setNewPath] = useState('')\r\n  const [preview, setPreview] = useState<boolean>()\r\n  const commonStyles = createCommonStyles(theme);\r\n\r\n  const mutation = useCreateOrUpdatePage()\r\n  const moveMutation = useMovePage();\r\n  const {sourceDescription, targetDescription} = useMemo(()=>{\r\n    const moveParagraph = paragraph.filter(v=>v.path.startsWith(path))\r\n    const moveDescription = moveParagraph.map(v=>v.header + v.description).join('');\r\n    const sourceParagraph = paragraph.filter(v=>!v.path.startsWith(path))\r\n    const sourceDescription = sourceParagraph.map(v=>v.header + v.description).join('')\r\n    const targetParagraph = page?.title === newPage?.title?sourceParagraph:newParagraph;\r\n    const targetIndex = targetParagraph.findLastIndex(v=>v.path.startsWith(newPath))\r\n    const targetDescription = newPage === undefined?moveDescription:[\r\n      ...targetParagraph.slice(0, targetIndex+1).map(v=>v.header + v.description),\r\n      ...moveParagraph.map(v=>(v.path===path && v.description===''?'':v.header) + v.description),\r\n      ...targetParagraph.slice(targetIndex+1).map(v=>v.header + v.description)].join('')\r\n      return {sourceDescription, targetDescription}\r\n  }, [paragraph, newParagraph, path, newPath])\r\n  \r\n  const handleMove = () => {\r\n    if (newPage === undefined){\r\n      moveMutation.mutate(\r\n        { oldTitle: title, newTitle: newTitle.trim(), description:path===''?undefined:targetDescription },\r\n        {\r\n          onSuccess: (data) => {\r\n            navigation.navigate({ name: 'NotePage', params: { title: data.newTitle } });\r\n          },\r\n          onError: (error:any) => {\r\n            Alert.alert('', error.message || '    .');\r\n          }\r\n        }\r\n      );\r\n    }\r\n    else {\r\n      if (page?.title === newPage.title && path === newPath){\r\n        handleCancel()\r\n      }\r\n      mutation.mutate(\r\n        { title:newPage.title, description:targetDescription },\r\n        {\r\n          onSuccess: (data) => {\r\n            if (page?.title !== newPage.title){\r\n              mutation.mutate(\r\n                { title, description:sourceDescription }\r\n              )\r\n            }\r\n            navigation.navigate({ name: 'NotePage', params: { title: data.title } });\r\n          },\r\n          onError: (error:any) => {\r\n            Alert.alert('', error.message || '    .');\r\n          }\r\n        },\r\n      )\r\n    }\r\n  };\r\n  const handleCancel = () => {\r\n    navigation.canGoBack() ? navigation.goBack() : navigation.navigate('NotePage', { title });\r\n  };\r\n\r\n  useEffect(()=>{\r\n    if(!isLoading && !page){\r\n      handleCancel()\r\n    }\r\n    page && setNewTitle(page.title);\r\n  }, [page, isLoading])\r\n  useEffect(()=>{\r\n    if (!isLoading){\r\n      setNewPath(path)\r\n    }\r\n  }, [section, isLoading])\r\n  const paragraphItem = paragraph.find(v=>v.path===path)\r\n  const newParagraphItem = newParagraph.find(v=>v.path===newPath)\r\n  const moveDisabled = !newTitle.trim() || newParagraphItem === undefined\r\n  return (\r\n    <ScrollView style={commonStyles.container}>\r\n      <View style={commonStyles.card}>\r\n        <View style={{flexDirection:window==='landscape'?'row':'column', zIndex:1}}>\r\n          <View style={{zIndex:1}}>\r\n            <Text style={commonStyles.text}>{section?\"    :\":\"  :\"}</Text>\r\n            <Text style={[commonStyles.title, styles.columns]}>{titleFormat({title, section})}</Text>\r\n            <Text style={commonStyles.text}>    :</Text>\r\n            <SearchBar handlePress={setNewTitle} useRandom={false}/>\r\n            <View style={styles.columns}>\r\n              <HeaderSelectBar path={newPath} onPress={(item)=>setNewPath(item.path)} root={newPage?.title || ''} data={newParagraph}/>\r\n            </View>\r\n          </View>\r\n          <View style={{flex:1}}>\r\n            <Text style={commonStyles.text}> :</Text>\r\n            <TouchableOpacity\r\n              style={[commonStyles.button, styles.moveButton, {flex:0, flexDirection:'row', alignItems:'center', paddingTop:24, paddingBottom:16}]} \r\n              onPress={()=>setPreview(!preview)}\r\n            >\r\n              <Text style={commonStyles.title}>{titleFormat({title, section:paragraphItem?.title})}</Text>\r\n              <Text style={[commonStyles.text, {marginBottom:8,  fontSize:14}]}>    </Text>\r\n              <Text style={commonStyles.title}>{titleFormat({title:newTitle, section:newParagraphItem?.title})}</Text>   \r\n            </TouchableOpacity>\r\n              {preview!==undefined && <View style={{display:preview?'flex':'none'}}>\r\n              <EditorViewer\r\n                  active\r\n                  value={targetDescription}\r\n                  theme={theme}\r\n                  autoResize\r\n                />\r\n              </View>}\r\n          </View>\r\n        </View>\r\n        <View style={styles.buttonContainer}>\r\n          <TouchableOpacity \r\n            style={[commonStyles.button, styles.cancelButton]} \r\n            onPress={handleCancel}\r\n          >\r\n            <Text style={commonStyles.buttonText}></Text>\r\n          </TouchableOpacity>\r\n          <TouchableOpacity \r\n            style={[commonStyles.button, moveDisabled?styles.cancelButton:styles.moveButton]} \r\n            onPress={handleMove}\r\n            disabled={moveDisabled}\r\n          >\r\n            <Text style={commonStyles.buttonText}></Text>\r\n          </TouchableOpacity>\r\n        </View>\r\n      </View>\r\n    </ScrollView>\r\n  );\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n  columns: { \r\n    marginTop: 8, \r\n    marginBottom: 16 \r\n  },\r\n  backButton: {\r\n    padding: 8,\r\n  },\r\n  buttonContainer: {\r\n    flexDirection: 'row',\r\n    justifyContent: 'space-between',\r\n  },\r\n  cancelButton: {\r\n    flex: 1,\r\n    marginRight: 8,\r\n    backgroundColor: '#95A5A6',\r\n  },\r\n  moveButton: {\r\n    flex: 1,\r\n    marginLeft: 8,\r\n  },\r\n});","import React from 'react';\r\nimport { View, Text, TouchableOpacity, FlatList, StyleSheet } from 'react-native';\r\nimport { createCommonStyles } from '../../styles';\r\nimport { useColorScheme, useResizeContext } from '@blacktokki/core';\r\nimport { SearchBar, titleFormat } from '../../components/SearchBar';\r\n\r\nexport const NoteListSection = ({contents, isLoading, onPress, emptyMessage}:{contents:{title:string, section?:string, subtitle?:string, id?:number}[], isLoading:boolean, onPress:(title:string, section?:string, id?:number)=>void, emptyMessage:string}) => {\r\n    const theme = useColorScheme();\r\n    const commonStyles = createCommonStyles(theme);\r\n    const window = useResizeContext();\r\n    return (<>\r\n        {window === 'portrait' && <SearchBar/>}\r\n        <View style={commonStyles.container}>      \r\n          {isLoading ? (\r\n            <View style={[commonStyles.card, commonStyles.centerContent]}>\r\n              <Text style={commonStyles.text}> ...</Text>\r\n            </View>\r\n          ) : contents.length > 0 ? (\r\n            <FlatList\r\n              data={contents}\r\n              keyExtractor={(item) => JSON.stringify([item.title, item.section, item.id])}\r\n              renderItem={({ item }) => (\r\n                <TouchableOpacity\r\n                  style={commonStyles.card}\r\n                  onPress={() => onPress(item.title, item.section, item.id)}\r\n                >\r\n                  <Text style={commonStyles.title}>{titleFormat(item)}</Text>\r\n                  {item.subtitle!==undefined && <Text style={commonStyles.smallText}>\r\n                    {item.subtitle}\r\n                  </Text>}\r\n                </TouchableOpacity>\r\n              )}\r\n              ItemSeparatorComponent={() => <View style={{ height: 8 }} />}\r\n            />\r\n          ) : (\r\n            <View style={[commonStyles.card, commonStyles.centerContent]}>\r\n              <Text style={commonStyles.text}>\r\n                {emptyMessage}\r\n              </Text>\r\n            </View>\r\n          )}\r\n        </View>\r\n      </>);\r\n}","import React from 'react';\r\nimport { StackNavigationProp } from '@react-navigation/stack';\r\nimport { useNavigation } from '@react-navigation/native';\r\nimport { useNotePages } from '../../hooks/useNoteStorage';\r\nimport { NoteListSection } from './NoteListSection';\r\nimport { NavigationParamList } from '../../types';\r\n\r\nconst updatedOffset = new Date().getTimezoneOffset()\r\n\r\nconst updatedFormat = (_updated:string) => {\r\n  const _date = new Date(_updated)\r\n  _date.setMinutes(_date.getMinutes() - updatedOffset)\r\n  const updated = _date.toISOString().slice(0, 16)\r\n    const date = updated.slice(0, 10)\r\n    const today = new Date().toISOString().slice(0, 10)\r\n    return date==today?updated.slice(11):date;\r\n}\r\n\r\nexport const RecentPagesScreen: React.FC = () => {\r\n  const navigation = useNavigation<StackNavigationProp<NavigationParamList>>();\r\n  const { data: recentPages = [], isLoading } = useNotePages();\r\n  return <NoteListSection \r\n    contents={recentPages.sort((a, b)=>new Date(b.updated).getTime() - new Date(a.updated).getTime()).map(v=>({...v, subtitle:` : ${updatedFormat(v.updated as string)}`}))} \r\n    isLoading={isLoading}\r\n    onPress={(title)=>navigation.navigate('NotePage', { title })}\r\n    emptyMessage='   .'/>\r\n};\r\n","import React, { useEffect, useMemo, useState } from 'react';\r\nimport { View, Text, TouchableOpacity, ScrollView, ActivityIndicator, StyleSheet } from 'react-native';\r\nimport { RouteProp, useFocusEffect, useNavigation, useRoute } from '@react-navigation/native';\r\nimport { StackNavigationProp } from '@react-navigation/stack';\r\nimport Icon from 'react-native-vector-icons/FontAwesome';\r\nimport { NavigationParamList } from '../../types';\r\nimport { useNotePage, useSnapshotPages } from '../../hooks/useNoteStorage';\r\nimport { createCommonStyles } from '../../styles';\r\nimport { useColorScheme, useResizeContext } from '@blacktokki/core';\r\nimport { EditorViewer } from '@blacktokki/editor';\r\nimport { SearchBar, titleFormat, urlToNoteLink } from '../../components/SearchBar';\r\nimport HeaderSelectBar, { NodeData, parseHtmlToSections } from '../../components/HeaderSelectBar';\r\n\r\ntype NotePageScreenRouteProp = RouteProp<NavigationParamList, 'NotePage'>;\r\n\r\nexport const sectionDescription = (paragraph:NodeData[], section:string, rootTitle:boolean) => {\r\n  const path = paragraph.find(v=>v.title===section)?.path\r\n  return path?paragraph.filter(v=>v.path.startsWith(path)).map(v=>((rootTitle || v.path!==path)?v.header:\"\") + v.description).join(\"\"):\"\"\r\n}\r\n\r\nexport const getSplitTitle = (title:string) => {\r\n  const splitTitle = title.split(\"/\")\r\n  if (splitTitle.length<2) {\r\n    return [title]\r\n  }\r\n  return [splitTitle.slice(0, splitTitle.length -1).join(\"/\"), splitTitle[splitTitle.length -1]]\r\n}\r\n\r\nexport const NotePageScreen: React.FC = () => {\r\n  const route = useRoute<NotePageScreenRouteProp>();\r\n  const { title, section, archiveId } = route.params;\r\n  const navigation = useNavigation<StackNavigationProp<NavigationParamList>>();\r\n  const theme = useColorScheme();\r\n  const _window = useResizeContext();\r\n  const commonStyles = createCommonStyles(theme);\r\n  const [toc, toggleToc] = useState(false)\r\n  \r\n\r\n  const { data: page, isLoading } = useNotePage(title);\r\n  const { data:archives } = useSnapshotPages()\r\n  const archive = archiveId?archives?.find(v=>v.id===archiveId &&v.description !== page?.description):undefined\r\n\r\n  const handleEdit = () => {\r\n    console.log('@', title)\r\n    navigation.navigate('EditPage', { title });\r\n  };\r\n  \r\n  const handleMovePage = () => {\r\n    navigation.navigate('MovePage', { title, section });\r\n  };\r\n\r\n  const paragraph = parseHtmlToSections(page?.description||'');\r\n  const [description, setDescription] = useState<string>()\r\n  useEffect(()=>{\r\n    if(description === undefined) {\r\n      setDescription(archive?archive.description:section?sectionDescription(paragraph, section, true) :page?.description)\r\n    }\r\n    else {\r\n      return () => setDescription(undefined);\r\n    }\r\n  }, [page, archive, section, description])\r\n\r\n  useEffect(()=>{\r\n    toggleToc(false)\r\n  }, [route])\r\n  const splitTitle = getSplitTitle(title)\r\n\r\n  return (<>\r\n    {_window === 'portrait' && <SearchBar/>}\r\n    <ScrollView style={[\r\n      commonStyles.container, \r\n      //@ts-ignore\r\n      {paddingRight:12, scrollbarGutter: 'stable'}]}>\r\n      <View style={commonStyles.header}>\r\n        <View style={{flexDirection:'row'}}>\r\n          <TouchableOpacity onPress={()=>navigation.navigate('NotePage', { title:splitTitle[0] })}>\r\n            <Text style={[commonStyles.title, styles.pageTitle]} numberOfLines={1}>{splitTitle[0]}</Text>\r\n          </TouchableOpacity>\r\n          {splitTitle.length === 2 && <Text style={[commonStyles.title, styles.pageTitle]} numberOfLines={1}>{\"/\"+splitTitle[1]}</Text>}\r\n          {section && <Text style={[commonStyles.title, styles.pageTitle, {marginLeft:5}]} numberOfLines={1}>{titleFormat({title:\"\", section})}</Text>}\r\n          {archive && <Text style={[commonStyles.text, {marginLeft:5, fontStyle:'italic'}]}>{\"(\" + archive.updated + \")\"}</Text>}\r\n        </View>\r\n        <View style={styles.actionButtons}>\r\n          {!section && <>\r\n            <TouchableOpacity onPress={()=>navigation.navigate(\"Archive\", { title })} style={styles.actionButton}>\r\n              <Icon name=\"history\" size={16} color={theme === 'dark' ? '#E4E4E4' : '#333333'} />\r\n            </TouchableOpacity>\r\n          </>}\r\n          {!!description && !archive && <>\r\n            <TouchableOpacity onPress={()=>toggleToc(!toc)} style={styles.actionButton}>\r\n              <Icon name=\"list\" size={16} color={theme === 'dark' ? '#E4E4E4' : '#333333'} />\r\n            </TouchableOpacity>\r\n            <TouchableOpacity onPress={handleMovePage} style={styles.actionButton}>\r\n              <Icon name=\"exchange\" size={16} color={theme === 'dark' ? '#E4E4E4' : '#333333'} />\r\n            </TouchableOpacity>\r\n          </>}\r\n          {!!description && !archive && !section && <>\r\n            <TouchableOpacity onPress={handleEdit} style={styles.actionButton}>\r\n              <Icon name=\"pencil\" size={16} color={theme === 'dark' ? '#E4E4E4' : '#333333'} />\r\n            </TouchableOpacity>\r\n          </>}\r\n        </View>\r\n      </View>\r\n      <View style={commonStyles.flex}>\r\n        {isLoading ? (\r\n          <View style={[commonStyles.card, commonStyles.centerContent]}>\r\n            <ActivityIndicator size=\"large\" color=\"#3498DB\" />\r\n          </View>\r\n        ) : <>\r\n          <View style={!toc && description?[commonStyles.card, {flex:1, padding:0}]:{flex:1, position:'absolute'}}>\r\n            <EditorViewer\r\n              active\r\n              value={description || ''}\r\n              theme={theme}\r\n              onLink={(url)=>{\r\n                const noteLink = urlToNoteLink(url);\r\n                if(noteLink){\r\n                  navigation.navigate(\"NotePage\", noteLink)\r\n                }\r\n                else{\r\n                  window.open(url, '_blank');\r\n                }\r\n              }}\r\n              autoResize\r\n            /> \r\n          </View>\r\n          {toc? <HeaderSelectBar data={paragraph} path={section || ''} root={title} onPress={(item)=>navigation.navigate('NotePage', {title, section:item.title})}/>\r\n          :page?.description ? undefined : (\r\n            <View style={[commonStyles.card, commonStyles.centerContent]}>\r\n              <Text style={commonStyles.text}>\r\n                   . \r\n                ''    .\r\n              </Text>\r\n              <TouchableOpacity onPress={handleEdit} style={commonStyles.button}>\r\n                <Text style={commonStyles.buttonText}></Text>\r\n              </TouchableOpacity>\r\n            </View>)}\r\n        </>}\r\n      </View>\r\n    </ScrollView>\r\n  </>);\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n  backButton: {\r\n    padding: 8,\r\n  },\r\n  pageTitle: {\r\n    flex: 1,\r\n    fontSize: 20,\r\n  },\r\n  actionButtons: {\r\n    flexDirection: 'row',\r\n  },\r\n  actionButton: {\r\n    padding: 8,\r\n    marginLeft: 8,\r\n  },\r\n});","import React from 'react';\r\nimport { StackNavigationProp } from '@react-navigation/stack';\r\nimport { RouteProp, useNavigation, useRoute } from '@react-navigation/native';\r\nimport { useSnapshotPages } from '../../hooks/useNoteStorage';\r\nimport { NoteListSection } from './NoteListSection';\r\nimport { NavigationParamList } from '../../types';\r\n\r\nconst updatedOffset = new Date().getTimezoneOffset()\r\n\r\nconst updatedFormat = (_updated:string) => {\r\n  const _date = new Date(_updated)\r\n  _date.setMinutes(_date.getMinutes() - updatedOffset)\r\n  const updated = _date.toISOString().slice(0, 16)\r\n    const date = updated.slice(0, 10)\r\n    const today = new Date().toISOString().slice(0, 10)\r\n    return date==today?updated.slice(11):date;\r\n}\r\n\r\ntype ArchiveScreenRouteProp = RouteProp<NavigationParamList, 'Archive'>;\r\n\r\nexport const ArchiveScreen: React.FC = () => {\r\n  const navigation = useNavigation<StackNavigationProp<NavigationParamList>>();\r\n  const route = useRoute<ArchiveScreenRouteProp>()\r\n  const { title } = route.params\r\n  const { data: recentPages = [], isLoading } = useSnapshotPages();\r\n  return <NoteListSection \r\n    contents={recentPages.filter(v=>title===undefined || title===v.title).sort((a, b)=>new Date(b.updated).getTime() - new Date(a.updated).getTime()).map(v=>({...v, subtitle:` : ${updatedFormat(v.updated as string)}`}))} \r\n    isLoading={isLoading}\r\n    onPress={(title, _, id)=>navigation.navigate('NotePage', { title, archiveId:id })}\r\n    emptyMessage='   .'/>\r\n};\r\n","// import HomeScreen from \"./main/home/HomeScreen\";\r\n\r\nimport { EditPageScreen } from \"./main/EditPageScreen\";\r\nimport HomeScreen from \"./main/home/HomeScreen\";\r\nimport { MovePageScreen } from \"./main/MovePageScreen\";\r\nimport { RecentPagesScreen } from \"./main/RecentPageScreen\";\r\nimport { NotePageScreen } from \"./main/NotePageScreen\";\r\nimport { EmptyPagesScreen } from \"./main/EmptyPageScreen\";\r\nimport { EmptyContentsScreen } from \"./main/EmptyContentScreen\";\r\nimport { ArchiveScreen } from \"./main/ArchiveScreen\";\r\n\r\nexport const main = {\r\n    Home:{\r\n      title:'Blacktokki Notebook',\r\n      component:HomeScreen,\r\n      path:'home',\r\n    },\r\n    NotePage:{\r\n      title:'Blacktokki Notebook',\r\n      component:NotePageScreen,\r\n      path:'page',\r\n    },\r\n    EditPage:{\r\n      title:'Blacktokki Notebook',\r\n      component:EditPageScreen,\r\n      path:'edit',\r\n    },\r\n    MovePage:{\r\n      title:'Blacktokki Notebook',\r\n      component:MovePageScreen,\r\n      path:'move',\r\n    },\r\n    RecentPages:{\r\n      title:'Blacktokki Notebook',\r\n      component:RecentPagesScreen,\r\n      path:'recent',\r\n    },\r\n    EmptyPages:{\r\n      title:'Blacktokki Notebook',\r\n      component:EmptyPagesScreen,\r\n      path:'need',\r\n    },\r\n    EmptyContents:{\r\n      title:'Blacktokki Notebook',\r\n      component:EmptyContentsScreen,\r\n      path:'empty',\r\n    },\r\n    Archive:{\r\n      title:'Blacktokki Notebook',\r\n      component:ArchiveScreen,\r\n      path:'archive',\r\n    },\r\n  };\r\n  ","import React from 'react';\r\nimport { useNavigation } from '@react-navigation/native';\r\nimport { StackNavigationProp } from '@react-navigation/stack';\r\nimport { NavigationParamList } from '../../types';\r\nimport { useNotePages } from '../../hooks/useNoteStorage';\r\nimport { NoteListSection } from './NoteListSection';\r\nimport { getNoteLinks } from '../../components/SearchBar';\r\nimport { parseHtmlToSections } from '../../components/HeaderSelectBar';\r\nimport { getSplitTitle } from './NotePageScreen';\r\n\r\nexport const EmptyPagesScreen: React.FC = () => {\r\n  const navigation = useNavigation<StackNavigationProp<NavigationParamList>>();\r\n  const { data: pages = [], isLoading } = useNotePages();\r\n  const unknownData = getNoteLinks(pages).filter((v)=>{\r\n    const page = pages.find(v2=>v2.title===v.title)\r\n    if (page?.description){\r\n      if (v.section === undefined || parseHtmlToSections(page.description).find(v2=>v2.title === v.section)){\r\n        return false;\r\n      }\r\n    }\r\n    return true;\r\n  }).map(v=>({...v, subtitle:(v.section===undefined?'Unknown note link':'Unknown section link') + `(${v.origin})`}))\r\n  const emptyParentData = pages.map(v=>{\r\n    const splitTitle = getSplitTitle(v.title)\r\n    if (splitTitle.length === 2 && pages.find(v=>v.title===splitTitle[0]) === undefined){\r\n      return { title:splitTitle[0], subtitle: `Empty parent note(${v.title})`}\r\n    }\r\n    return undefined\r\n  }).filter(v=>v!==undefined)\r\n  return <NoteListSection\r\n    contents={[...unknownData, ...emptyParentData]}\r\n    onPress={(title)=>navigation.navigate('EditPage', { title })}\r\n    isLoading={isLoading}\r\n    emptyMessage='   .'/>\r\n};\r\n","import React from 'react';\r\nimport { useNavigation } from '@react-navigation/native';\r\nimport { StackNavigationProp } from '@react-navigation/stack';\r\nimport { NavigationParamList } from '../../types';\r\nimport { useNotePages } from '../../hooks/useNoteStorage';\r\nimport { NoteListSection } from './NoteListSection';\r\nimport { parseHtmlToSections } from '../../components/HeaderSelectBar';\r\nimport { sectionDescription } from './NotePageScreen';\r\n\r\nfunction findEmptyLists(html: string): string[] {\r\n  const regex = /<(ol|ul)\\b[^>]*>([\\s\\n\\r]*)<\\/\\1>/gi;\r\n  const matches: string[] = [];\r\n  let match;\r\n\r\n  while ((match = regex.exec(html)) !== null) {\r\n    matches.push(match[0]); //   \r\n  }\r\n\r\n  return matches;\r\n}\r\n\r\nexport const EmptyContentsScreen: React.FC = () => {\r\n  const navigation = useNavigation<StackNavigationProp<NavigationParamList>>();\r\n  const { data: pages = [], isLoading } = useNotePages();\r\n  const data = pages.flatMap(v=>{\r\n    const paragraph = parseHtmlToSections(v.description || '')\r\n    const emptyParagraph = paragraph.filter(v2=>v2.level!==0 && sectionDescription(paragraph, v2.title, false).trim() === \"\")\r\n    const emptyList = paragraph.filter(v2=>findEmptyLists(v2.description).length > 0)\r\n    return [\r\n      ...emptyParagraph.map(v2=>({title:v.title, section:v2.level===0?undefined:v2.title, subtitle:'Empty section'})),\r\n      ...emptyList.map(v2=>({title:v.title, section:v2.level===0?undefined:v2.title, subtitle:'Empty list'}))\r\n    ]\r\n  })\r\n  return <NoteListSection \r\n    contents={data}\r\n    onPress={(title)=>navigation.navigate('EditPage', { title })}\r\n    isLoading={isLoading}\r\n    emptyMessage='   .'/>\r\n};\r\n","import React from 'react';\r\nimport ContentGroupSection, { EmptyContentButton, EmptyPageButton } from '../screens/main/home/ContentGroupSection';\r\nimport { ScrollView } from 'react-native';\r\nimport { List } from 'react-native-paper';\r\nimport { useLangContext, View } from '@blacktokki/core';\r\nimport { navigate } from '@blacktokki/navigation';\r\n\r\nexport default ()=>{\r\n    const {lang} = useLangContext()\r\n    return <View style={{flex:1}}>\r\n        <List.Item left={_props=><List.Icon {..._props} icon={\"home\"} />} title={lang(\"Home\")} onPress={()=>navigate('Home')} />\r\n        <EmptyPageButton/>\r\n        <EmptyContentButton/>\r\n        <ScrollView>\r\n            <List.Subheader style={{}} selectable={false}>{lang(\"Open Pages\")}</List.Subheader>\r\n            <ContentGroupSection type={'LAST'} />\r\n            <ContentGroupSection type={'PAGE'} />\r\n            <List.Subheader style={{flex:1}} selectable={false}>{lang(\"Notes\")}</List.Subheader>{/*   */}\r\n            <ContentGroupSection type={'NOTE'} noteCount={10}/>\r\n        </ScrollView>\r\n    </View>\r\n}","import React, { Suspense } from 'react';\r\n// import * as Linking from 'expo-linking';\r\nimport { login, Navigation, NavigationConfig } from \"@blacktokki/navigation\"\r\nimport { main } from '../screens';\r\nimport Drawer from './Drawer';\r\nimport { Colors, useColorScheme, useResizeContext } from '@blacktokki/core';\r\nimport { List, MD2DarkTheme, MD2LightTheme, PaperProvider } from 'react-native-paper';\r\nimport { SearchBar } from '../components/SearchBar';\r\n\r\nconst HeaderRight = ()=>{\r\n    const windowType = useResizeContext();\r\n    return windowType==='landscape'?<SearchBar/>:undefined\r\n}\r\n\r\nconst getConfig = async (theme:'light'|'dark') => {\r\n    const Linking = await import('expo-linking')\r\n    return {\r\n        main,\r\n        login,\r\n        prefixes: [ Linking.makeUrl('/') ],\r\n        rootPath: 'blacktokki-notebook',\r\n        documentTitle: {\r\n            formatter: ()=>{\r\n                return 'blacktokki-notebook'\r\n            }\r\n        },\r\n        rootScreen: {\r\n            main: 'Home',\r\n            login: 'LoginScreen'\r\n        },\r\n        headerLeftIcon: <List.Icon icon='backburger' style={{left:-18, top: -14}} />,\r\n        headerRight: <HeaderRight/>,\r\n        modals: [],\r\n        drawer: <Drawer/>\r\n    } as NavigationConfig\r\n}\r\n\r\nexport default () => {\r\n    const scheme = useColorScheme()\r\n    const preTheme = scheme == 'dark' ? MD2DarkTheme : MD2LightTheme;\r\n    const theme:typeof preTheme = {...preTheme, colors:{...preTheme.colors, primary:Colors[scheme].text} }\r\n    const NavigationLazy = React.lazy(()=>getConfig(scheme).then(config=> ({\"default\":()=><Navigation config={config}/>})))\r\n    return <PaperProvider theme={theme}>\r\n            <Suspense fallback={<></>}>\r\n                <NavigationLazy/>\r\n            </Suspense>\r\n    </PaperProvider>\r\n}"],"names":["axios","axiosCreate","getContentList","_ref","_asyncToGenerator","id","get","data","_ref2","parentId","types","parentIdParam","undefined","typeParam","join","value","_x2","_x3","apply","arguments","postContent","_ref3","post","_x4","patchContent","_ref5","_ref4","updated","patch","ids","_x5","re","_ref6","delete","toUrls","str","description","match","index","arr","RegExp","exec","push","substring","end","length","_tmp","filter","v","i","map","_ref7","preview","query","lastPage","PAGE_STORAGE_KEY","RECENT_PAGES_KEY","getContents","type","_x","getNoteContents","saveNoteContents","contents","content","find","savedId","then","snapshot","_objectSpread","jsonValue","JSON","stringify","AsyncStorage","setItem","e","console","error","getRecentPages","getItem","parse","saveRecentPages","titles","useNotePages","useQuery","queryKey","queryFn","useSnapshotPages","_queryFn","useNotePage","title","queryClient","useQueryClient","_queryFn2","page","c","invalidateQueries","useLastPage","_queryFn4","useCreateOrUpdatePage","auth","useAuthContext","useMutation","mutationFn","_mutationFn","updatedContents","_auth$user","newPage","input","userId","user","order","option","concat","_toConsumableArray","onSuccess","_onSuccess","_x6","useDeleteRecentPage","_mutationFn4","updatedRecentPages","_title","_x9","createCommonStyles","theme","StyleSheet","create","container","flex","backgroundColor","paddingHorizontal","paddingVertical","card","borderRadius","padding","marginBottom","borderWidth","borderColor","shadowColor","shadowOffset","width","height","shadowOpacity","shadowRadius","elevation","fontSize","fontWeight","color","text","lineHeight","button","alignItems","marginVertical","buttonText","searchButton","justifyContent","marginHorizontal","resultSeparator","separator","smallText","header","flexDirection","row","centerContent","parseHtmlToSections","html","doc","DOMParser","parseFromString","result","path","level","headings","headerStack","current","cursor","body","firstChild","flushCurrent","nodeType","Node","ELEMENT_NODE","el","includes","tagName","_el$textContent","parseInt","textContent","trim","pop","h","outerHTML","TEXT_NODE","nextSibling","HeaderSelectBar","props","useColorScheme","commonStyles","_jsx","View","style","styles","resultsContainer","darkResults","lightResults","children","FlatList","keyExtractor","item","renderItem","_jsxs","TouchableOpacity","resultItem","onPress","Icon","name","size","Text","marginTop","resultText","left","root","ItemSeparatorComponent","backButton","buttonContainer","KEYWORDS_KEY","getKeywords","saveKeywords","keywords","_searchText","urlToNoteLink","url","newLocation","URL","location","origin","params","URLSearchParams","search","section","getNoteLinks","pages","flatMap","links","querySelectorAll","Array","from","a","_a$textContent","href","extractHtmlLinksWithQuery","v2","noteLink","getFilteredPages","searchText","lowerCaseSearch","toLowerCase","noteLinks","startsWith","RandomButton","navigation","useNavigation","_useNotePages$data","randomPages","Math","floor","random","sections","navigate","titleFormat","SearchBar","handlePress","_ref$useRandom","useRandom","_useState","useState","_useState2","_slicedToArray","setSearchText","_useState3","_useState4","showResults","setShowResults","inputRef","useRef","_useKeywords","_useKeywords$data","addKeyword","keyword","newKeywords","Set","useAddKeyowrd","_useNotePages2$data","filteredPages","slice","handleSearch","handlePagePress","mutate","searchHandlers","useMemo","PanResponder","onPanResponderStart","panHandlers","pagePressHandlers","useCallback","useEffect","useFocusEffect","searchContainer","TextInput","ref","searchInput","onChangeText","placeholder","placeholderTextColor","onSubmitEditing","onFocus","onBlur","disabled","position","maxWidth","zIndex","top","right","maxHeight","cancelButton","marginRight","saveButton","marginLeft","EmptyPageButton","lang","useLangContext","List","_props","icon","EmptyContentButton","_notes$data","notes","_queryFn3","recentTitles","tabRef","React","addRecentPage","_mutationFn3","_ref8","direct","recentPages","_x8","useAddRecentPage","deleteRecentPage","sort","b","Date","getTime","window","useResizeContext","itemPadding","noteOnPress","clearTimeout","setTimeout","noteOnLongPress","_pages$data","onLongPress","titleStyle","fontStyle","_Fragment","noteCount","_pages$data2","TouchableRipple","margin","ArchiveButtonSection","Colors","OpenedEditorsTabView","ScrollView","background","ContentGroupSection","NoteTabView","ConfigCommonView","ConfigSections","ConfigTabView","contentContainerStyle","columns","moveButton","NoteListSection","isLoading","emptyMessage","subtitle","updatedOffset","getTimezoneOffset","updatedFormat","_updated","_date","setMinutes","getMinutes","toISOString","date","sectionDescription","paragraph","rootTitle","_paragraph$find","getSplitTitle","splitTitle","split","pageTitle","actionButtons","actionButton","main","Home","component","route","tabViews","headerRight","HomeSection","homeView","headerTitle","NotePage","useRoute","_route$params","archiveId","_window","toc","toggleToc","_useNotePage","archives","archive","handleEdit","log","setDescription","paddingRight","scrollbarGutter","numberOfLines","ActivityIndicator","EditorViewer","active","onLink","open","autoResize","EditPage","setContent","mutation","callback","event","preventDefault","returnValue","addEventListener","removeEventListener","Editor","setValue","autoComplete","trigger","getMatchedChars","pattern","encodeURI","canGoBack","goBack","onError","Alert","alert","message","MovePage","newTitle","setNewTitle","newParagraph","newPath","setNewPath","_useState5","_useState6","setPreview","moveMutation","_mutationFn2","oldTitle","Error","some","_x7","useMovePage","_useMemo","moveParagraph","moveDescription","sourceParagraph","sourceDescription","targetParagraph","targetIndex","findLastIndex","targetDescription","handleCancel","paragraphItem","newParagraphItem","moveDisabled","paddingTop","paddingBottom","display","RecentPages","_useNotePages","EmptyPages","unknownData","emptyParentData","EmptyContents","emptyParagraph","emptyList","regex","matches","findEmptyLists","Archive","_useSnapshotPages","_useSnapshotPages$dat","_","selectable","HeaderRight","getConfig","Linking","login","prefixes","makeUrl","rootPath","documentTitle","formatter","rootScreen","headerLeftIcon","modals","drawer","Drawer","scheme","preTheme","MD2DarkTheme","MD2LightTheme","colors","primary","NavigationLazy","config","Navigation","PaperProvider","Suspense","fallback"],"sourceRoot":""}