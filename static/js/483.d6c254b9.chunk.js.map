{"version":3,"file":"static/js/483.d6c254b9.chunk.js","mappings":"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","sources":["src/hooks/useKeywordStorage.ts","src/services/notebook.ts","src/hooks/useNoteStorage.ts","src/styles.ts","src/components/HeaderSelectBar.tsx","src/components/SearchBar.tsx","src/modals/AlertModal.tsx","src/modals/DatePikcerModal.tsx","src/modals/index.ts","src/screens/main/NoteListSection.tsx","src/components/TimerTag.tsx","src/hooks/useProblem.ts","src/hooks/useTimeLine.ts","src/screens/main/home/ContentGroupSection.tsx","src/screens/main/RecentPageSection.tsx","src/screens/main/ArchiveScreen.tsx","src/screens/main/EditPageScreen.tsx","src/screens/main/MovePageScreen.tsx","src/screens/main/NoteItemSections.tsx","src/screens/main/home/ConfigSection.tsx","src/screens/main/home/HomeScreen.tsx","src/screens/main/notepage/TimerTagSection.tsx","src/screens/main/notepage/NotePageScreen.tsx","src/screens/main/timeline/DateHeaderSection.tsx","src/screens/main/timeline/TimeLineScreen.tsx","src/screens/index.ts","src/screens/main/RecentPageScreen.tsx","src/screens/main/ProblemScreen.tsx","src/screens/main/NoteViewerScreen.tsx","src/navigation/Drawer.tsx","src/navigation/index.tsx"],"sourcesContent":["import { useAuthContext } from '@blacktokki/account';\r\nimport AsyncStorage from '@react-native-async-storage/async-storage';\r\nimport { useMutation, useQuery, useQueryClient } from 'react-query';\r\n\r\nconst KEYWORDS_KEY = '@blacktokki:notebook:keywords:';\r\n\r\nexport type KeywordContent =\r\n  | {\r\n      type: '_LINK';\r\n      name: string;\r\n      url: string;\r\n      origin: string;\r\n    }\r\n  | {\r\n      type: '_NOTELINK';\r\n      name: string;\r\n      title: string;\r\n      paragraph?: string;\r\n      origin: string;\r\n    }\r\n  | {\r\n      type: '_KEYWORD';\r\n      title: string;\r\n    };\r\n\r\nconst getKeywords = async (subkey: string | undefined): Promise<KeywordContent[]> => {\r\n  try {\r\n    const jsonValue = await AsyncStorage.getItem(KEYWORDS_KEY + subkey);\r\n    return jsonValue ? JSON.parse(jsonValue) : [];\r\n  } catch (e) {\r\n    console.error('Error loading keywords', e);\r\n    return [];\r\n  }\r\n};\r\n\r\nconst saveKeywords = async (\r\n  subkey: string | undefined,\r\n  keywords: KeywordContent[]\r\n): Promise<void> => {\r\n  try {\r\n    const jsonValue = JSON.stringify(keywords);\r\n    await AsyncStorage.setItem(KEYWORDS_KEY + subkey, jsonValue);\r\n  } catch (e) {\r\n    console.error('Error saving keywords', e);\r\n  }\r\n};\r\n\r\nexport const useKeywords = () => {\r\n  const { auth } = useAuthContext();\r\n  const subkey = auth.isLocal ? '' : `${auth.user?.id}`;\r\n  return useQuery({\r\n    queryKey: ['keywords', subkey],\r\n    queryFn: async () => {\r\n      return await getKeywords(subkey);\r\n    },\r\n  });\r\n};\r\n\r\nexport const useAddKeyowrd = () => {\r\n  const queryClient = useQueryClient();\r\n  const { auth } = useAuthContext();\r\n  const subkey = auth.isLocal ? '' : `${auth.user?.id}`;\r\n\r\n  return useMutation({\r\n    mutationFn: async (keyword: KeywordContent) => {\r\n      const keywords = await getKeywords(subkey);\r\n      const newKeywords = [\r\n        ...new Set([JSON.stringify(keyword), ...keywords.map((v) => JSON.stringify(v))]),\r\n      ].map((v) => JSON.parse(v));\r\n      await saveKeywords(subkey, newKeywords);\r\n    },\r\n    onSuccess: async () => {\r\n      await queryClient.invalidateQueries({ queryKey: ['keywords', subkey] });\r\n    },\r\n  });\r\n};\r\n\r\nexport const useResetKeyowrd = () => {\r\n  const queryClient = useQueryClient();\r\n  const { auth } = useAuthContext();\r\n  const subkey = auth.isLocal ? '' : `${auth.user?.id}`;\r\n\r\n  return useMutation({\r\n    mutationFn: async () => {\r\n      await saveKeywords(subkey, []);\r\n    },\r\n    onSuccess: async () => {\r\n      await queryClient.invalidateQueries({ queryKey: ['keywords', subkey] });\r\n    },\r\n  });\r\n};\r\n","import { axiosCreate } from '@blacktokki/account';\r\n\r\nimport { Content, PostContent, Link } from '../types';\r\n\r\nconst axios = axiosCreate('notebook');\r\n\r\nexport const getContentOne = async (id: number) => {\r\n  return (await axios.get(`/api/v1/content/${id}`)).data as Content;\r\n};\r\n\r\nexport const getContentList = async (\r\n  parentId?: number,\r\n  types?: Content['type'][],\r\n  page?: number\r\n) => {\r\n  const parentIdParam = parentId !== undefined ? `&parentId=${parentId}` : '';\r\n  const typeParam = types !== undefined ? `&types=${types.join(',')}` : '';\r\n  const pageParam = page !== undefined ? `&size=20&page=${page}` : '&size=256';\r\n  return (\r\n    await axios.get(\r\n      `/api/v1/content?self=true&sort=id,DESC${parentIdParam}${typeParam}${pageParam}`\r\n    )\r\n  ).data.value as Content[];\r\n};\r\n\r\nexport const postContent = async (postContent: PostContent) => {\r\n  return ((await axios.post(`/api/v1/content`, postContent)).data as Content).id;\r\n};\r\n\r\nexport const patchContent = async ({ id, updated }: { id: number; updated: PostContent }) => {\r\n  await axios.patch(`/api/v1/content`, { ids: [id], updated });\r\n};\r\n\r\nexport const deleteContent = async (id: number) => {\r\n  await axios.delete(`/api/v1/content/${id}`);\r\n};\r\n\r\nexport const previewUrl = async (preview: { query: string }) => {\r\n  return (await axios.get(`/api/v1/preview/autocomplete?query=${preview.query}`)).data as Link;\r\n};\r\n","import { useAuthContext } from '@blacktokki/account';\r\nimport { useLangContext } from '@blacktokki/core';\r\nimport { toHtml } from '@blacktokki/editor';\r\nimport AsyncStorage from '@react-native-async-storage/async-storage';\r\nimport { useQuery, useMutation, useQueryClient, useInfiniteQuery } from 'react-query';\r\n\r\nimport { getContentList, getContentOne, patchContent, postContent } from '../services/notebook';\r\nimport { Content, PostContent } from '../types';\r\n\r\nconst DB_NAME = '@Blacktokki:notebook';\r\nconst DB_VERSION = 1;\r\n\r\nexport async function openDB(): Promise<IDBDatabase> {\r\n  return new Promise((resolve, reject) => {\r\n    const request = indexedDB.open(DB_NAME, DB_VERSION);\r\n\r\n    request.onupgradeneeded = (event) => {\r\n      const db = (event.target as IDBOpenDBRequest).result;\r\n      if (!db.objectStoreNames.contains('NOTE')) {\r\n        db.createObjectStore('NOTE', { keyPath: 'title' });\r\n      }\r\n      // if (!db.objectStoreNames.contains('SNAPSHOT')) {\r\n      //   db.createObjectStore('SNAPSHOT', { keyPath: ['title', 'updated'] });\r\n      // }\r\n    };\r\n\r\n    request.onsuccess = () => {\r\n      resolve(request.result);\r\n    };\r\n\r\n    request.onerror = () => {\r\n      reject(request.error);\r\n    };\r\n  });\r\n}\r\n\r\nconst RECENT_PAGES_KEY = '@blacktokki:notebook:recent_pages';\r\n\r\nlet lastPage: string | undefined;\r\n\r\nconst getContents = async (\r\n  data:\r\n    | { isOnline: true; type: 'NOTE' | 'SNAPSHOT'; page?: number; parentId?: number }\r\n    | { isOnline: false }\r\n): Promise<Content[]> => {\r\n  if (data.isOnline) {\r\n    return await getContentList(data.parentId, [data.type], data.page);\r\n  }\r\n  const type = 'NOTE';\r\n  try {\r\n    const db = await openDB();\r\n    return new Promise((resolve) => {\r\n      const transaction = db.transaction(type, 'readonly');\r\n      const store = transaction.objectStore(type);\r\n\r\n      const request = store.getAll();\r\n\r\n      request.onsuccess = () => {\r\n        resolve(request.result as Content[]);\r\n      };\r\n      request.onerror = () => {\r\n        console.error('Error loading contents from IndexedDB:', request.error);\r\n        throw request.error;\r\n      };\r\n    });\r\n  } catch (e) {\r\n    console.error('Error opening IndexedDB', e);\r\n    return [];\r\n  }\r\n};\r\n\r\nconst saveNoteContents = async (\r\n  isOnline: boolean,\r\n  contents: (Content | PostContent)[],\r\n  id?: number\r\n): Promise<void> => {\r\n  const content = contents.find((v) => id === (v as { id?: number }).id);\r\n  if (isOnline) {\r\n    if (content) {\r\n      const savedId = await (id\r\n        ? patchContent({ id, updated: content }).then(() => id)\r\n        : postContent(content));\r\n      const snapshot: Content | PostContent = {\r\n        ...content,\r\n        type: 'SNAPSHOT',\r\n        id: undefined,\r\n        parentId: savedId,\r\n      };\r\n      await postContent(snapshot);\r\n    }\r\n    return;\r\n  }\r\n  try {\r\n    const db = await openDB();\r\n    const tx = db.transaction(['NOTE' /*, 'SNAPSHOT' */], 'readwrite');\r\n    const store = tx.objectStore('NOTE');\r\n    // const archive = tx.objectStore('SNAPSHOT');\r\n\r\n    for (const contentItem of contents) {\r\n      store.put(contentItem); // id   ( )\r\n    }\r\n    // if (content) {\r\n    //   const snapshot: Content | PostContent = {\r\n    //     ...content,\r\n    //     type: 'SNAPSHOT',\r\n    //   };\r\n    //   archive.put(snapshot);\r\n    // }\r\n    await new Promise((resolve, reject) => {\r\n      tx.oncomplete = () => resolve(undefined);\r\n      tx.onerror = () => reject(tx.error);\r\n    });\r\n  } catch (e) {\r\n    console.error('Error saving contents to IndexedDB', e);\r\n  }\r\n};\r\n\r\nconst getRecentPages = async (): Promise<string[]> => {\r\n  try {\r\n    const jsonValue = await AsyncStorage.getItem(RECENT_PAGES_KEY);\r\n    return jsonValue ? JSON.parse(jsonValue) : [];\r\n  } catch (e) {\r\n    console.error('Error loading recent notes', e);\r\n    return [];\r\n  }\r\n};\r\n\r\nconst saveRecentPages = async (titles: string[]): Promise<void> => {\r\n  try {\r\n    const jsonValue = JSON.stringify(titles);\r\n    await AsyncStorage.setItem(RECENT_PAGES_KEY, jsonValue);\r\n  } catch (e) {\r\n    console.error('Error saving recent notes', e);\r\n  }\r\n};\r\n\r\nexport const useNotePages = () => {\r\n  const { auth } = useAuthContext();\r\n  return useQuery({\r\n    queryKey: ['pageContents', !auth.isLocal],\r\n    queryFn: async () => await getContents({ isOnline: !auth.isLocal, type: 'NOTE' }),\r\n  });\r\n};\r\n\r\nexport const useSnapshotPages = (parentId?: number) => {\r\n  const { auth } = useAuthContext();\r\n  return useInfiniteQuery<Content[], number>({\r\n    queryKey: ['snapshotContents', !auth.isLocal, parentId],\r\n    queryFn: async ({ pageParam }) =>\r\n      await getContents({\r\n        isOnline: !auth.isLocal,\r\n        type: 'SNAPSHOT',\r\n        parentId,\r\n        page: pageParam || 0,\r\n      }),\r\n    getNextPageParam: (lastPage, allPages) => (lastPage?.length ? allPages.length : undefined),\r\n    refetchOnReconnect: false,\r\n    refetchOnWindowFocus: false,\r\n  });\r\n};\r\n\r\nexport const useNotePage = (title: string) => {\r\n  const queryClient = useQueryClient();\r\n  const { data: contents = [], isFetching } = useNotePages();\r\n  return useQuery({\r\n    queryKey: ['pageContent', title],\r\n    queryFn: async () => {\r\n      const page = contents.find((c) => c.title === title);\r\n\r\n      // Add to recent pages\r\n      if (page) {\r\n        const recentPages = await getRecentPages();\r\n        if (recentPages.find((v) => v === title) === undefined) {\r\n          lastPage = title;\r\n          await queryClient.invalidateQueries({ queryKey: ['lastPage'] });\r\n        }\r\n      }\r\n      return page || { title, description: '', id: undefined };\r\n    },\r\n    enabled: !isFetching,\r\n  });\r\n};\r\n\r\nexport const useArchivePage = (archiveId?: number) => {\r\n  const { auth } = useAuthContext();\r\n  return useQuery({\r\n    queryKey: ['snapshotContent', !auth.isLocal, archiveId],\r\n    queryFn: async () =>\r\n      auth.isLocal || archiveId === undefined ? undefined : await getContentOne(archiveId),\r\n  });\r\n};\r\n\r\nexport const useRecentPages = () => {\r\n  const { data: contents = [], isFetching } = useNotePages();\r\n  return useQuery({\r\n    queryKey: ['recentPages'],\r\n    queryFn: async () => {\r\n      const recentTitles = await getRecentPages();\r\n      return recentTitles\r\n        .map((title) => contents.find((c) => c.title === title))\r\n        .filter((c) => c !== undefined) as Content[];\r\n    },\r\n    enabled: !isFetching,\r\n  });\r\n};\r\n\r\nexport const useLastPage = () => {\r\n  const { data: contents = [], isFetching } = useNotePages();\r\n  return useQuery({\r\n    queryKey: ['lastPage'],\r\n    queryFn: async () => {\r\n      return contents.find((v) => v.title === lastPage);\r\n    },\r\n    enabled: !isFetching,\r\n  });\r\n};\r\n\r\nexport const useCreateOrUpdatePage = () => {\r\n  const queryClient = useQueryClient();\r\n  const { auth } = useAuthContext();\r\n  const { data: contents = [] } = useNotePages();\r\n  return useMutation({\r\n    mutationFn: async ({ title, description }: { title: string; description: string }) => {\r\n      const page = contents.find((c) => c.title === title);\r\n      if (page?.description === description) {\r\n        return { title, description, skip: true };\r\n      }\r\n      let updatedContents: (Content | PostContent)[];\r\n      const updated = auth.isLocal ? new Date().toISOString() : undefined;\r\n      if (page) {\r\n        updatedContents = contents.map((c, i) =>\r\n          c.id === page.id ? ({ ...c, description, updated } as PostContent) : c\r\n        );\r\n      } else {\r\n        const newPage = {\r\n          title,\r\n          description,\r\n          input: title,\r\n          userId: auth.user?.id || 0,\r\n          parentId: 0,\r\n          type: 'NOTE',\r\n          order: 0,\r\n          updated,\r\n          option: {},\r\n        } as PostContent;\r\n        updatedContents = [...contents, newPage];\r\n      }\r\n\r\n      await saveNoteContents(!auth.isLocal, updatedContents, page?.id);\r\n      return { title, description, skip: false };\r\n    },\r\n    onSuccess: async (data) => {\r\n      if (!data.skip) {\r\n        await queryClient.invalidateQueries({ queryKey: ['pageContents'] });\r\n        await queryClient.invalidateQueries({ queryKey: ['snapshotContents'] });\r\n        await queryClient.invalidateQueries({ queryKey: ['snapshotContent'] });\r\n        await queryClient.invalidateQueries({ queryKey: ['pageContent', data.title] });\r\n        await queryClient.invalidateQueries({ queryKey: ['recentPages'] });\r\n      }\r\n    },\r\n  });\r\n};\r\n\r\nexport const useMovePage = () => {\r\n  const queryClient = useQueryClient();\r\n  const { data: contents = [] } = useNotePages();\r\n  const { auth } = useAuthContext();\r\n\r\n  return useMutation({\r\n    mutationFn: async ({\r\n      oldTitle,\r\n      newTitle,\r\n      description,\r\n    }: {\r\n      oldTitle: string;\r\n      newTitle: string;\r\n      description?: string;\r\n    }) => {\r\n      const page = contents.find((c) => c.title === oldTitle);\r\n\r\n      if (!page) {\r\n        throw new Error('Page not found');\r\n      }\r\n\r\n      if (contents.some((c) => c.title === newTitle)) {\r\n        throw new Error('Page with new title already exists');\r\n      }\r\n\r\n      const updatedContents = contents.map((c) =>\r\n        c.title === oldTitle\r\n          ? { ...c, title: newTitle, description: description || page.description }\r\n          : c\r\n      );\r\n\r\n      await saveNoteContents(!auth.isLocal, updatedContents, page.id);\r\n\r\n      // Update recent pages\r\n      const recentPages = await getRecentPages();\r\n      const updatedRecentPages = recentPages.map((title) =>\r\n        title === oldTitle ? newTitle : title\r\n      );\r\n      await saveRecentPages(updatedRecentPages);\r\n\r\n      return { oldTitle, newTitle };\r\n    },\r\n    onSuccess: (data) => {\r\n      queryClient.invalidateQueries({ queryKey: ['pageContents'] });\r\n      queryClient.invalidateQueries({ queryKey: ['snapshotContents'] });\r\n      queryClient.invalidateQueries({ queryKey: ['snapshotContent'] });\r\n      queryClient.invalidateQueries({ queryKey: ['pageContent', data.oldTitle] });\r\n      queryClient.invalidateQueries({ queryKey: ['pageContent', data.newTitle] });\r\n      queryClient.invalidateQueries({ queryKey: ['recentPages'] });\r\n    },\r\n  });\r\n};\r\n\r\nexport const useAddRecentPage = () => {\r\n  const queryClient = useQueryClient();\r\n\r\n  return useMutation({\r\n    mutationFn: async ({ title, direct }: { title: string; direct?: boolean }) => {\r\n      // Update recent pages\r\n      const recentPages = await getRecentPages();\r\n      if (recentPages.find((v) => v === title) === undefined || direct) {\r\n        const updatedRecentPages = [title, ...recentPages];\r\n        await saveRecentPages(updatedRecentPages);\r\n      }\r\n\r\n      return { title };\r\n    },\r\n    onSuccess: (data) => {\r\n      queryClient.invalidateQueries({ queryKey: ['recentPages'] });\r\n    },\r\n  });\r\n};\r\n\r\nexport const useDeleteRecentPage = () => {\r\n  const queryClient = useQueryClient();\r\n\r\n  return useMutation({\r\n    mutationFn: async (title: string) => {\r\n      // Update recent pages\r\n      const recentPages = await getRecentPages();\r\n      const updatedRecentPages = recentPages.filter((_title) => title !== _title);\r\n      lastPage = undefined;\r\n      await saveRecentPages(updatedRecentPages);\r\n\r\n      return { title };\r\n    },\r\n    onSuccess: (data) => {\r\n      queryClient.invalidateQueries({ queryKey: ['recentPages'] });\r\n      queryClient.invalidateQueries({ queryKey: ['pageContent'] });\r\n      queryClient.invalidateQueries({ queryKey: ['lastPage'] });\r\n    },\r\n  });\r\n};\r\n\r\nexport const useNoteViewers = () => {\r\n  const { lang, locale } = useLangContext();\r\n  return useQuery({\r\n    queryKey: ['viewerContents', locale],\r\n    queryFn: async () => {\r\n      return await Promise.all(\r\n        ['Usage'].map(async (key) => {\r\n          const title = lang(key);\r\n          const v2 = await fetch(process.env.PUBLIC_URL + '/' + title + '.md');\r\n          const description = toHtml(await v2.text());\r\n          return { key, description };\r\n        })\r\n      );\r\n    },\r\n  });\r\n};\r\n","import { StyleSheet } from 'react-native';\r\n\r\nexport const createCommonStyles = (theme: 'light' | 'dark') => {\r\n  return StyleSheet.create({\r\n    container: {\r\n      flex: 1,\r\n      backgroundColor: theme === 'dark' ? '#121212' : '#FFFFFF',\r\n      paddingHorizontal: 24,\r\n      paddingVertical: 16,\r\n    },\r\n    card: {\r\n      backgroundColor: theme === 'dark' ? '#1E1E1E' : '#FFFFFF',\r\n      borderRadius: 8,\r\n      padding: 16,\r\n      marginBottom: 16,\r\n      borderWidth: 1,\r\n      borderColor: theme === 'dark' ? '#333333' : '#EEEEEE',\r\n      shadowColor: theme === 'dark' ? '#000000' : '#888888',\r\n      shadowOffset: { width: 0, height: 2 },\r\n      shadowOpacity: 0.1,\r\n      shadowRadius: 4,\r\n      elevation: 2,\r\n    },\r\n    title: {\r\n      fontSize: 18,\r\n      fontWeight: 'bold',\r\n      marginBottom: 8,\r\n      color: theme === 'dark' ? '#FFFFFF' : '#000000',\r\n    },\r\n    text: {\r\n      fontSize: 16,\r\n      color: theme === 'dark' ? '#E4E4E4' : '#333333',\r\n      lineHeight: 24,\r\n    },\r\n    button: {\r\n      backgroundColor: theme === 'dark' ? '#2C73B5' : '#3498DB',\r\n      borderRadius: 4,\r\n      padding: 12,\r\n      alignItems: 'center',\r\n      marginVertical: 8,\r\n    },\r\n    buttonText: {\r\n      color: '#FFFFFF',\r\n      fontWeight: '500',\r\n      fontSize: 16,\r\n    },\r\n    searchButton: {\r\n      backgroundColor: '#3498DB',\r\n      justifyContent: 'center',\r\n      alignItems: 'center',\r\n      width: 36,\r\n      height: 36,\r\n      borderRadius: 4,\r\n      marginHorizontal: 4,\r\n    },\r\n    resultSeparator: {\r\n      height: 1,\r\n      backgroundColor: theme === 'dark' ? '#333333' : '#EEEEEE',\r\n    },\r\n    input: {\r\n      backgroundColor: theme === 'dark' ? '#222222' : '#FFFFFF',\r\n      borderWidth: 1,\r\n      borderColor: theme === 'dark' ? '#444444' : '#CCCCCC',\r\n      borderRadius: 4,\r\n      padding: 10,\r\n      color: theme === 'dark' ? '#E4E4E4' : '#333333',\r\n      marginBottom: 16,\r\n    },\r\n    separator: {\r\n      height: 1,\r\n      backgroundColor: theme === 'dark' ? '#333333' : '#EEEEEE',\r\n      marginVertical: 12,\r\n    },\r\n    smallText: {\r\n      fontSize: 14,\r\n      color: theme === 'dark' ? '#BBBBBB' : '#777777',\r\n    },\r\n    header: {\r\n      flexDirection: 'row',\r\n      justifyContent: 'space-between',\r\n      alignItems: 'center',\r\n      marginBottom: 16,\r\n    },\r\n    flex: {\r\n      flex: 1,\r\n    },\r\n    row: {\r\n      flexDirection: 'row',\r\n      alignItems: 'center',\r\n    },\r\n    centerContent: {\r\n      justifyContent: 'center',\r\n      alignItems: 'center',\r\n    },\r\n  });\r\n};\r\n","import { Text, useColorScheme } from '@blacktokki/core';\r\nimport { TouchableOpacity, View, FlatList, StyleSheet } from 'react-native';\r\nimport Icon from 'react-native-vector-icons/FontAwesome';\r\n\r\nimport { createCommonStyles } from '../styles';\r\n\r\nexport interface Paragraph {\r\n  path: string;\r\n  title: string;\r\n  level: number;\r\n  header: string;\r\n  description: string;\r\n}\r\n\r\nexport function parseHtmlToParagraphs(html: string): Paragraph[] {\r\n  const parser = new DOMParser();\r\n  const doc = parser.parseFromString(html, 'text/html');\r\n\r\n  const result: Paragraph[] = [{ path: '', title: '', header: '', level: 0, description: '' }];\r\n\r\n  const headings: string[] = ['H1', 'H2', 'H3', 'H4', 'H5', 'H6'];\r\n  const headerStack: { level: number; title: string }[] = [];\r\n\r\n  let current: Paragraph | null = null;\r\n  let cursor = doc.body.firstChild;\r\n\r\n  const flushCurrent = () => {\r\n    if (current) {\r\n      result.push(current);\r\n      current = null;\r\n    }\r\n  };\r\n\r\n  while (cursor) {\r\n    if (cursor.nodeType === Node.ELEMENT_NODE) {\r\n      const el = cursor as HTMLElement;\r\n      if (headings.includes(el.tagName)) {\r\n        flushCurrent();\r\n\r\n        const level = parseInt(el.tagName.substring(1), 10);\r\n        const title = el.textContent?.trim() || '';\r\n\r\n        //   \r\n        while (headerStack.length > 0 && headerStack[headerStack.length - 1].level >= level) {\r\n          headerStack.pop();\r\n        }\r\n        headerStack.push({ level, title });\r\n\r\n        const path = headerStack.map((h) => h.title).join(' > ');\r\n\r\n        current = {\r\n          path,\r\n          title,\r\n          level,\r\n          header: el.outerHTML,\r\n          description: '',\r\n        };\r\n      } else if (current) {\r\n        current.description += el.outerHTML;\r\n      } else {\r\n        //    \r\n        result[0].description += el.outerHTML;\r\n      }\r\n    } else if (cursor.nodeType === Node.TEXT_NODE && current) {\r\n      current.description += cursor.textContent || '';\r\n    }\r\n\r\n    cursor = cursor.nextSibling;\r\n  }\r\n\r\n  flushCurrent();\r\n  return result;\r\n}\r\n\r\nexport default function HeaderSelectBar(props: {\r\n  root: string;\r\n  path: string;\r\n  onPress: (item: Paragraph) => void;\r\n  data: Paragraph[];\r\n}) {\r\n  const theme = useColorScheme();\r\n  const commonStyles = createCommonStyles(theme);\r\n  const renderItem = (item: Paragraph) => (\r\n    <TouchableOpacity style={styles.resultItem} onPress={() => props.onPress(item)}>\r\n      {item.level === 0 && <Icon name=\"file-text-o\" size={18} color=\"#FFFFFF\" />}\r\n      <Text\r\n        style={[\r\n          props.path === item.path\r\n            ? [commonStyles.title, { marginBottom: 5, marginTop: 3 }]\r\n            : commonStyles.text,\r\n          styles.resultText,\r\n          { left: item.level * 10 + 10 },\r\n        ]}\r\n      >\r\n        {item.level === 0 ? props.root : item.title}\r\n      </Text>\r\n    </TouchableOpacity>\r\n  );\r\n  return (\r\n    <View\r\n      style={[styles.resultsContainer, theme === 'dark' ? styles.darkResults : styles.lightResults]}\r\n    >\r\n      <FlatList\r\n        data={props.data}\r\n        keyExtractor={(item) => item.path}\r\n        renderItem={({ item }) => renderItem(item)}\r\n        ItemSeparatorComponent={() => <View style={commonStyles.resultSeparator} />}\r\n      />\r\n    </View>\r\n  );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  backButton: {\r\n    padding: 8,\r\n  },\r\n  resultItem: {\r\n    padding: 10,\r\n    flexDirection: 'row',\r\n  },\r\n  resultText: {\r\n    fontSize: 14,\r\n  },\r\n  buttonContainer: {\r\n    flexDirection: 'row',\r\n    justifyContent: 'space-between',\r\n  },\r\n  resultsContainer: {\r\n    borderWidth: 1,\r\n    borderRadius: 4,\r\n  },\r\n  lightResults: {\r\n    backgroundColor: '#FFFFFF',\r\n    borderColor: '#CCCCCC',\r\n  },\r\n  darkResults: {\r\n    backgroundColor: '#222222',\r\n    borderColor: '#444444',\r\n  },\r\n});\r\n","import { useColorScheme, useLangContext, View, Text, Colors } from '@blacktokki/core';\r\nimport { useFocusEffect, useNavigation } from '@react-navigation/native';\r\nimport { StackNavigationProp } from '@react-navigation/stack';\r\nimport React, { useCallback, useEffect, useMemo, useRef, useState } from 'react';\r\nimport { TextInput, TouchableOpacity, FlatList, StyleSheet, PanResponder } from 'react-native';\r\nimport Icon from 'react-native-vector-icons/FontAwesome';\r\n\r\nimport { KeywordContent, useAddKeyowrd, useKeywords } from '../hooks/useKeywordStorage';\r\nimport { useNotePages } from '../hooks/useNoteStorage';\r\nimport { createCommonStyles } from '../styles';\r\nimport { Content, NavigationParamList } from '../types';\r\nimport { parseHtmlToParagraphs } from './HeaderSelectBar';\r\n\r\nlet _searchText = '';\r\n\r\ntype SearchContent = Content | KeywordContent;\r\n\r\nfunction extractHtmlLinksWithQuery(text: string) {\r\n  const parser = new DOMParser();\r\n  const doc = parser.parseFromString(text, 'text/html');\r\n\r\n  //  a  \r\n  const links = doc.querySelectorAll('a');\r\n\r\n  //   \r\n  const matches = Array.from(links).map((a) => ({\r\n    text: a.textContent?.trim() || a.href,\r\n    url: a.href,\r\n  }));\r\n\r\n  return matches;\r\n}\r\n\r\nfunction urlToNoteLink(url: string) {\r\n  const newLocation = new URL(url);\r\n  if (location.origin === newLocation.origin) {\r\n    const params = new URLSearchParams(newLocation.search);\r\n    const title = params.get('title');\r\n    const paragraph = params.get('paragraph') || params.get('section') || undefined;\r\n    if (title) {\r\n      return { title, paragraph };\r\n    }\r\n  }\r\n}\r\n\r\nexport function onLink(url: string, navigation: StackNavigationProp<NavigationParamList>) {\r\n  const noteLink = urlToNoteLink(url);\r\n  if (noteLink) {\r\n    navigation.push('NotePage', noteLink);\r\n  } else {\r\n    window.open(url, '_blank');\r\n  }\r\n}\r\n\r\nexport function getLinks(pages: Content[], sameTitle?: boolean) {\r\n  return pages\r\n    .flatMap((v) =>\r\n      extractHtmlLinksWithQuery(v.description || '').map((v2) => {\r\n        const noteLink = urlToNoteLink(v2.url);\r\n        if (noteLink) {\r\n          if (sameTitle || v2.text !== noteLink.title) {\r\n            return {\r\n              type: '_NOTELINK' as '_NOTELINK',\r\n              name: v2.text,\r\n              ...noteLink,\r\n              origin: v.title,\r\n            };\r\n          }\r\n          return undefined;\r\n        }\r\n        return { type: '_LINK' as '_LINK', url: v2.url, name: v2.text, origin: v.title };\r\n      })\r\n    )\r\n    .filter((v) => v !== undefined);\r\n}\r\n\r\nexport const getFilteredPages = (pages: Content[], searchText: string) => {\r\n  const lowerCaseSearch = searchText.toLowerCase().normalize('NFKD');\r\n  const links = getLinks(pages).map((v) => ({\r\n    ...v,\r\n    _name: v.name.toLowerCase().normalize('NFKD'),\r\n  }));\r\n  return [\r\n    ...pages.filter((page) =>\r\n      page.title.toLowerCase().normalize('NFKD').startsWith(lowerCaseSearch)\r\n    ),\r\n    ...links.filter((v) => v.type === '_NOTELINK' && v._name.startsWith(lowerCaseSearch)),\r\n    ...links.filter((v) => v.type === '_LINK' && v._name.includes(lowerCaseSearch)),\r\n  ];\r\n};\r\n\r\nconst RandomButton = () => {\r\n  const theme = useColorScheme();\r\n  const commonStyles = createCommonStyles(theme);\r\n  const navigation = useNavigation<StackNavigationProp<NavigationParamList>>();\r\n  const { data: pages = [] } = useNotePages();\r\n  const randomPages = pages.filter((v) => v.description);\r\n  return (\r\n    randomPages && (\r\n      <TouchableOpacity\r\n        style={commonStyles.searchButton}\r\n        onPress={() => {\r\n          const page = randomPages[Math.floor(Math.random() * randomPages.length)];\r\n          const paragraphs = parseHtmlToParagraphs(page.description || '');\r\n          navigation.push('NotePage', {\r\n            title: page.title,\r\n            paragraph: paragraphs[Math.floor(Math.random() * paragraphs.length)].title,\r\n          });\r\n        }}\r\n      >\r\n        <Icon name={'random'} size={18} color=\"#FFFFFF\" />\r\n      </TouchableOpacity>\r\n    )\r\n  );\r\n};\r\n\r\nexport const titleFormat = (item: { title: string; paragraph?: string }) =>\r\n  `${item.title}${item.paragraph ? '  ' + item.paragraph : ''}`;\r\n\r\ntype PressKeywordOption = {\r\n  onPress?: (title: string) => void;\r\n  addKeyword?: boolean;\r\n};\r\n\r\nconst useOnPressKeyword = ({\r\n  onPress,\r\n  addKeyword,\r\n  afterPress,\r\n}: PressKeywordOption & { afterPress?: () => void }) => {\r\n  const navigation = useNavigation<StackNavigationProp<NavigationParamList>>();\r\n  const { mutate: addKeywordMutate } = useAddKeyowrd();\r\n  return useCallback((item: SearchContent) => {\r\n    if (onPress && (item.type === 'NOTE' || item.type === '_KEYWORD')) {\r\n      onPress(item.title);\r\n    } else if (item.type === '_LINK') {\r\n      window.open(item.url, '_blank');\r\n      addKeyword && addKeywordMutate(item);\r\n    } else if (item.type === '_NOTELINK' && item.paragraph) {\r\n      navigation.push('NotePage', { title: item.title, paragraph: item.paragraph });\r\n      addKeyword && addKeywordMutate(item);\r\n    } else {\r\n      navigation.push('NotePage', { title: item.title });\r\n      addKeyword && addKeywordMutate({ type: '_KEYWORD', title: item.title });\r\n    }\r\n    afterPress?.();\r\n  }, []);\r\n};\r\n\r\nexport const SearchList = ({\r\n  filteredPages,\r\n  onPressKeyword,\r\n  focus,\r\n}: {\r\n  filteredPages: SearchContent[];\r\n  onPressKeyword?: (item: SearchContent) => void;\r\n  focus?: number;\r\n}) => {\r\n  const theme = useColorScheme();\r\n  const commonStyles = createCommonStyles(theme);\r\n  const onPressDefault = useOnPressKeyword({});\r\n\r\n  const pagePressHandlers = useCallback((item: SearchContent) => {\r\n    return PanResponder.create({\r\n      onPanResponderStart: () => (onPressKeyword ? onPressKeyword : onPressDefault)(item),\r\n    }).panHandlers;\r\n  }, []);\r\n\r\n  return (\r\n    <FlatList\r\n      data={filteredPages}\r\n      keyExtractor={(item: any) => JSON.stringify([item.title, item.name, item.paragraph])}\r\n      renderItem={({ item, index }) => (\r\n        <TouchableOpacity\r\n          style={[\r\n            styles.resultItem,\r\n            { borderWidth: 1, borderColor: focus === index ? Colors[theme].text : 'transparent' },\r\n          ]}\r\n          {...pagePressHandlers(item)}\r\n        >\r\n          <Text style={[commonStyles.text, styles.resultText, { flexShrink: 0 }]}>\r\n            {item.type === '_NOTELINK' || item.type === '_LINK' ? item.name : item.title}\r\n          </Text>\r\n          {item.type === '_NOTELINK' && (\r\n            <Text\r\n              numberOfLines={1}\r\n              ellipsizeMode=\"tail\"\r\n              style={[commonStyles.text, styles.resultText, { fontSize: 12, paddingLeft: 24 }]}\r\n            >\r\n              {titleFormat(item)}\r\n            </Text>\r\n          )}\r\n          {item.type === '_LINK' && (\r\n            <Text\r\n              numberOfLines={1}\r\n              ellipsizeMode=\"tail\"\r\n              style={[commonStyles.text, styles.resultText, { fontSize: 12, paddingLeft: 24 }]}\r\n            >\r\n              {titleFormat({ title: item.origin, paragraph: item.url })}\r\n            </Text>\r\n          )}\r\n        </TouchableOpacity>\r\n      )}\r\n      ItemSeparatorComponent={() => <View style={[commonStyles.resultSeparator]} />}\r\n    />\r\n  );\r\n};\r\n\r\nexport const SearchBar: React.FC<\r\n  {\r\n    useRandom?: boolean;\r\n  } & PressKeywordOption\r\n> = ({ onPress, addKeyword = true, useRandom = true }) => {\r\n  const [searchText, setSearchText] = useState(_searchText);\r\n  const [showResults, setShowResults] = useState(false);\r\n  const [focusIndex, setFocusIndex] = useState(-1);\r\n  const { lang } = useLangContext();\r\n  const theme = useColorScheme();\r\n  const commonStyles = createCommonStyles(theme);\r\n  const inputRef = useRef<TextInput | null>();\r\n  const { data: keywords = [] } = useKeywords();\r\n  const { data: pages = [] } = useNotePages();\r\n  const filteredPages: SearchContent[] = (\r\n    searchText.length > 0 ? getFilteredPages(pages, searchText) : keywords\r\n  )\r\n    .filter((v) => onPress === undefined || v.type === 'NOTE')\r\n    .slice(0, 10);\r\n\r\n  const handleKeywordPress = useOnPressKeyword({\r\n    onPress,\r\n    addKeyword,\r\n    afterPress: () => setSearchText(''),\r\n  });\r\n\r\n  const handleSearch = () => {\r\n    const title = searchText.trim();\r\n    if (title) {\r\n      handleKeywordPress({ type: '_KEYWORD', title });\r\n    }\r\n  };\r\n\r\n  const newNoteHandlers = useMemo(\r\n    () =>\r\n      PanResponder.create({\r\n        onPanResponderStart: handleSearch,\r\n      }).panHandlers,\r\n    [searchText]\r\n  );\r\n\r\n  useEffect(() => {\r\n    _searchText = searchText;\r\n    setFocusIndex(-1);\r\n  }, [searchText]);\r\n\r\n  useFocusEffect(() => {\r\n    if (searchText !== _searchText) {\r\n      setSearchText(_searchText);\r\n    }\r\n  });\r\n\r\n  return (\r\n    <View\r\n      style={styles.container}\r\n      //@ts-ignore\r\n      onKeyDownCapture={(e: KeyboardEvent) => {\r\n        if (showResults) {\r\n          if (e.key === 'ArrowUp' && focusIndex > -1) {\r\n            e.preventDefault();\r\n            setFocusIndex(focusIndex - 1);\r\n          } else if (e.key === 'ArrowDown' && focusIndex < filteredPages.length - 1) {\r\n            e.preventDefault();\r\n            setFocusIndex(focusIndex + 1);\r\n          }\r\n        }\r\n      }}\r\n    >\r\n      <View style={styles.searchContainer}>\r\n        <TextInput\r\n          ref={(ref) => {\r\n            inputRef.current = ref;\r\n          }}\r\n          style={[commonStyles.input, styles.searchInput]}\r\n          value={searchText}\r\n          onChangeText={(text) => {\r\n            setSearchText(text);\r\n          }}\r\n          placeholder={lang('Search')}\r\n          placeholderTextColor={theme === 'dark' ? '#777777' : '#999999'}\r\n          onSubmitEditing={\r\n            focusIndex > -1\r\n              ? () => {\r\n                  handleKeywordPress(filteredPages[focusIndex]);\r\n                  setFocusIndex(-1);\r\n                }\r\n              : handleSearch\r\n          }\r\n          onFocus={() => setShowResults(true)}\r\n          onBlur={() => setShowResults(false)}\r\n        />\r\n        <TouchableOpacity\r\n          style={commonStyles.searchButton}\r\n          onPress={handleSearch}\r\n          disabled={!searchText.trim()}\r\n        >\r\n          <Icon name={'search'} size={18} color=\"#FFFFFF\" />\r\n        </TouchableOpacity>\r\n        {useRandom && <RandomButton />}\r\n      </View>\r\n\r\n      {showResults && (\r\n        <View\r\n          style={[\r\n            styles.resultsContainer,\r\n            theme === 'dark' ? styles.darkResults : styles.lightResults,\r\n          ]}\r\n        >\r\n          {filteredPages.length > 0 ? (\r\n            <SearchList\r\n              filteredPages={filteredPages}\r\n              onPressKeyword={handleKeywordPress}\r\n              focus={focusIndex}\r\n            />\r\n          ) : searchText.trim() ? (\r\n            <TouchableOpacity style={styles.resultItem} {...newNoteHandlers}>\r\n              <Text style={[commonStyles.text, styles.resultText]}>\r\n                \"{searchText}\"   \r\n              </Text>\r\n            </TouchableOpacity>\r\n          ) : null}\r\n        </View>\r\n      )}\r\n    </View>\r\n  );\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    position: 'relative',\r\n    width: '100%',\r\n    maxWidth: 960,\r\n    zIndex: 999,\r\n  },\r\n  searchContainer: {\r\n    flexDirection: 'row',\r\n  },\r\n  searchInput: {\r\n    flex: 1,\r\n    height: 36,\r\n    marginBottom: 0,\r\n    paddingVertical: 4,\r\n    fontSize: 14,\r\n  },\r\n  resultsContainer: {\r\n    position: 'absolute',\r\n    top: 40,\r\n    left: 0,\r\n    right: 0,\r\n    maxHeight: 500,\r\n    borderWidth: 1,\r\n    borderRadius: 4,\r\n    zIndex: 999,\r\n    elevation: 5,\r\n  },\r\n  lightResults: {\r\n    backgroundColor: '#FFFFFF',\r\n    borderColor: '#CCCCCC',\r\n  },\r\n  darkResults: {\r\n    backgroundColor: '#222222',\r\n    borderColor: '#444444',\r\n  },\r\n  resultItem: {\r\n    flexDirection: 'row',\r\n    justifyContent: 'space-between',\r\n    padding: 10,\r\n  },\r\n  resultText: {\r\n    fontSize: 14,\r\n  },\r\n});\r\n","import { CommonButton, Text, useLangContext, useModalsContext, View } from '@blacktokki/core';\r\nimport React from 'react';\r\n\r\nexport default function AlertModal({\r\n  type,\r\n  callbacks,\r\n}: {\r\n  type: string;\r\n  callbacks: (() => void)[];\r\n}) {\r\n  const { lang } = useLangContext();\r\n  const { setModal } = useModalsContext();\r\n  const back = () => {\r\n    setModal(AlertModal, null);\r\n  };\r\n  const messages = {\r\n    UNSAVED: {\r\n      message: 'Changes that you made may not be saved.',\r\n      buttons: [\r\n        {\r\n          title: 'save',\r\n          onPress: () => {\r\n            callbacks[0]();\r\n            back();\r\n          },\r\n        },\r\n        {\r\n          title: 'do not save',\r\n          onPress: () => {\r\n            callbacks[1]();\r\n            back();\r\n          },\r\n        },\r\n      ],\r\n    },\r\n  } as Record<string, { message: string; buttons: { title: string; onPress: () => void }[] }>;\r\n\r\n  return (\r\n    <View\r\n      style={{ flex: 1, margin: 0, justifyContent: 'flex-end', backgroundColor: 'transparent' }}\r\n    >\r\n      <View style={{ padding: 16 }}>\r\n        <Text>{lang(messages[type].message)}</Text>\r\n        <View style={{ width: '100%', flexDirection: 'row', justifyContent: 'flex-end' }}>\r\n          {messages[type].buttons.map((button, i) => (\r\n            <CommonButton\r\n              key={i}\r\n              style={{ marginRight: 10 }}\r\n              title={lang(button.title)}\r\n              onPress={button.onPress}\r\n            />\r\n          ))}\r\n          <CommonButton title={lang('cancel')} onPress={() => back()} />\r\n        </View>\r\n      </View>\r\n    </View>\r\n  );\r\n}\r\n","import {\r\n  Calendar,\r\n  useLangContext,\r\n  useModalsContext,\r\n  View,\r\n  Text,\r\n  CommonButton,\r\n} from '@blacktokki/core';\r\nimport { CalendarProps } from '@blacktokki/core/build/typescript/components/Calendar';\r\nimport dayjs from 'dayjs';\r\nimport React, { Suspense, useState } from 'react';\r\nimport { TouchableOpacity } from 'react-native';\r\n\r\nexport type MarkedDateRange = { dateStart: string; dateEnd: string };\r\n\r\nconst DIRECT_PICK = true;\r\n\r\nconst getMarkedDays = (dateString: string, markedDateStrings: MarkedDateRange[]) => {\r\n  const disableDays: string[] = [];\r\n  const date = dayjs(dateString);\r\n  let startDate = date.clone().startOf('month').add(-1, 'month');\r\n  const endDate = date.clone().endOf('month').add(1, 'month');\r\n  const markedDate = markedDateStrings.map((v) => ({\r\n    startDate: dayjs(v.dateStart),\r\n    endDate: dayjs(v.dateEnd),\r\n  }));\r\n  const markedDays: string[] = [];\r\n  // const today = dayjs().startOf('day');\r\n  while (startDate <= endDate) {\r\n    // if (startDate < today) {\r\n    //   disableDays.push(startDate.format('YYYY-MM-DD'));\r\n    // }\r\n    if (markedDate.find((v) => !v.startDate.isAfter(startDate) && !v.endDate.isBefore(startDate))) {\r\n      markedDays.push(startDate.format('YYYY-MM-DD'));\r\n    }\r\n    startDate = startDate.add(1, 'day');\r\n  }\r\n  return {\r\n    ...disableDays.reduce((p, c) => {\r\n      p[c] = { disabled: true };\r\n      return p;\r\n    }, {} as Record<string, any>),\r\n    ...markedDays.reduce((p, c) => {\r\n      p[c] = { marked: true, dotColor: 'red' };\r\n      return p;\r\n    }, {} as Record<string, any>),\r\n    ...(dateString ? [dateString] : []).reduce((p, c) => {\r\n      p[c] = { selected: true };\r\n      return p;\r\n    }, {} as Record<string, any>),\r\n  };\r\n};\r\n\r\nconst defaultDayjs = () => {\r\n  const m = dayjs();\r\n  const restMinute = parseInt(m.format('mm'), 10) % 5;\r\n  return m.add(5 - restMinute, 'minute');\r\n};\r\n\r\nexport default function DatePickerModal({\r\n  datetime,\r\n  markedDateStrings,\r\n  callback,\r\n}: {\r\n  datetime?: string;\r\n  markedDateStrings?: MarkedDateRange[];\r\n  callback: (datetime?: string) => void;\r\n}) {\r\n  const _dayjs = datetime ? dayjs(datetime) : defaultDayjs();\r\n  const { lang, locale } = useLangContext();\r\n  const [date, setDate] = useState(_dayjs.format('YYYY-MM-DD'));\r\n  const [markedDates, setMarkedDates] = useState<CalendarProps['markedDates']>(\r\n    getMarkedDays(_dayjs.format('YYYY-MM-DD'), markedDateStrings || [])\r\n  );\r\n  const { setModal } = useModalsContext();\r\n  const back = () => {\r\n    setModal(DatePickerModal, null);\r\n  };\r\n  const onSave = (datetime?: string) => {\r\n    callback?.(datetime);\r\n    back();\r\n  };\r\n  return (\r\n    <View\r\n      style={{ flex: 1, margin: 0, justifyContent: 'flex-end', backgroundColor: 'transparent' }}\r\n    >\r\n      <View style={{ alignItems: 'center', minHeight: 450 }}>\r\n        <View style={{ flexDirection: 'row', width: '100%' }}>\r\n          <View style={{ flex: 1, flexDirection: 'row' }}>\r\n            <TouchableOpacity onPress={back}>\r\n              <Text>{lang('back')}</Text>\r\n            </TouchableOpacity>\r\n          </View>\r\n          <View style={{ flex: 1 }}>\r\n            <Text style={{ fontSize: 20, textAlign: 'center' }}>{lang('Date')}</Text>\r\n          </View>\r\n          <View style={{ flex: 1 }} />\r\n        </View>\r\n        <View\r\n          style={{ marginBottom: 20, height: 1, width: '100%' }}\r\n          lightColor=\"#ddd\"\r\n          darkColor=\"rgba(255,255,255, 0.3)\"\r\n        />\r\n        <Suspense fallback={<></>}>\r\n          <Calendar\r\n            locale={locale}\r\n            style={undefined}\r\n            date={date}\r\n            setDate={DIRECT_PICK ? onSave : setDate}\r\n            disableAllTouchEventsForDisabledDays={true}\r\n            onMonthChange={(v) =>\r\n              setMarkedDates(getMarkedDays(v.dateString, markedDateStrings || []))\r\n            }\r\n            markedDates={markedDates}\r\n          />\r\n        </Suspense>\r\n        {!DIRECT_PICK && (\r\n          <View style={{ flexDirection: 'row' }}>\r\n            <CommonButton title={lang('save')} onPress={() => onSave(date)} />\r\n            <CommonButton title={lang('cancel')} onPress={() => onSave(undefined)} />\r\n          </View>\r\n        )}\r\n      </View>\r\n    </View>\r\n  );\r\n}\r\n","import AlertModal from './AlertModal';\r\nimport DatePickerModal from './DatePikcerModal';\r\n\r\nexport default [DatePickerModal, AlertModal];\r\n","import { useColorScheme, useLangContext } from '@blacktokki/core';\r\nimport React, { useRef } from 'react';\r\nimport { View, Text, TouchableOpacity, FlatList } from 'react-native';\r\n\r\nimport { titleFormat } from '../../components/SearchBar';\r\nimport { createCommonStyles } from '../../styles';\r\n\r\nexport const NoteListSection = ({\r\n  contents,\r\n  isLoading,\r\n  onPress,\r\n  emptyMessage,\r\n  onScrollEnd,\r\n}: {\r\n  contents: {\r\n    title: string;\r\n    paragraph?: string;\r\n    subtitles?: string[];\r\n    id?: number;\r\n  }[];\r\n  isLoading: boolean;\r\n  onPress: (title: string, paragraph?: string, id?: number) => void;\r\n  emptyMessage: string;\r\n  onScrollEnd?: () => void;\r\n}) => {\r\n  const theme = useColorScheme();\r\n  const commonStyles = createCommonStyles(theme);\r\n  const { lang } = useLangContext();\r\n  const height = useRef(0);\r\n  return (\r\n    <View style={commonStyles.container}>\r\n      {isLoading ? (\r\n        <View style={[commonStyles.card, commonStyles.centerContent]}>\r\n          <Text style={commonStyles.text}> ...</Text>\r\n        </View>\r\n      ) : contents.length > 0 ? (\r\n        <FlatList\r\n          data={contents}\r\n          keyExtractor={(item) => JSON.stringify([item.title, item.paragraph, item.id])}\r\n          renderItem={({ item }) => (\r\n            <TouchableOpacity\r\n              style={commonStyles.card}\r\n              onPress={() => onPress(item.title, item.paragraph, item.id)}\r\n            >\r\n              <Text style={commonStyles.title}>{titleFormat(item)}</Text>\r\n              {(item.subtitles || []).map((subtitle, index) => (\r\n                <Text key={index} style={[commonStyles.smallText]}>\r\n                  {subtitle}\r\n                </Text>\r\n              ))}\r\n            </TouchableOpacity>\r\n          )}\r\n          ItemSeparatorComponent={() => <View style={{ height: 8 }} />}\r\n          onScroll={(e) => {\r\n            if (\r\n              e.nativeEvent.contentSize.height - height.current - e.nativeEvent.contentOffset.y <\r\n              1\r\n            )\r\n              onScrollEnd?.();\r\n          }}\r\n          onLayout={(p) => {\r\n            height.current = p.nativeEvent.layout.height;\r\n          }}\r\n        />\r\n      ) : (\r\n        <View style={[commonStyles.card, commonStyles.centerContent]}>\r\n          <Text selectable={false} style={commonStyles.text}>\r\n            {lang(emptyMessage)}\r\n          </Text>\r\n        </View>\r\n      )}\r\n    </View>\r\n  );\r\n};\r\n","import { CommonButton, useLangContext } from '@blacktokki/core';\r\nimport { toRaw } from '@blacktokki/editor';\r\nimport dayjs from 'dayjs';\r\nimport React from 'react';\r\nimport { View, Text, TouchableOpacity } from 'react-native';\r\n\r\nimport { Paragraph } from './HeaderSelectBar';\r\n\r\ntype DatePattern = {\r\n  pattern: string;\r\n  format?: (s: string, e: string) => string;\r\n  text: string;\r\n  dateStart: string;\r\n  dateEnd: string;\r\n  index: number;\r\n};\r\n\r\nfunction extractDates(input: string) {\r\n  const now = new Date();\r\n  const currentYear = now.getFullYear();\r\n  //  \r\n  const patterns: {\r\n    regex: RegExp;\r\n    parse: (match: RegExpExecArray) => DatePattern;\r\n  }[] = [\r\n    {\r\n      regex: /\\b(\\d{4}-\\d{2}-\\d{2})\\/(\\d{4}-\\d{2}-\\d{2})\\b/g,\r\n      parse: (match) => ({\r\n        // YYYY-MM-DD/YYYY-MM-DD\r\n        pattern: 'YYYY-MM-DD',\r\n        format: (s, e) => `${s}/${e}`,\r\n        text: match[0],\r\n        dateStart: match[1],\r\n        dateEnd: match[2],\r\n        index: match.index,\r\n      }),\r\n    },\r\n    {\r\n      regex: /\\b(\\d{4}-\\d{2}-\\d{2})\\b/g,\r\n      parse: (match) => ({\r\n        pattern: 'YYYY-MM-DD',\r\n        text: match[0],\r\n        dateStart: match[1],\r\n        dateEnd: match[1],\r\n        index: match.index,\r\n      }),\r\n    },\r\n    {\r\n      regex: /\\b\\d{4}-\\d{2}(?!-)\\b/g,\r\n      parse: (match) => {\r\n        const split = match[0].split('-');\r\n        const year = parseInt(split[0], 10);\r\n        const month = parseInt(split[1], 10);\r\n        const lastDay = new Date(year, month, 0).getDate();\r\n        return {\r\n          pattern: 'YYYY-MM',\r\n          text: match[0],\r\n          dateStart: `${year}-${String(month).padStart(2, '0')}-01`,\r\n          dateEnd: `${year}-${String(month).padStart(2, '0')}-${String(lastDay).padStart(2, '0')}`,\r\n          index: match.index,\r\n        };\r\n      },\r\n    },\r\n    {\r\n      regex: /\\b(\\d{2})\\/(\\d{2})\\s*~\\s*(\\d{2})\\/(\\d{2})\\b/g,\r\n      parse: (match) => {\r\n        const mm = parseInt(match[1], 10);\r\n        const dd = parseInt(match[2], 10);\r\n        const mm2 = parseInt(match[3], 10);\r\n        const dd2 = parseInt(match[4], 10);\r\n        return {\r\n          // MM/DD ~ MM/DD\r\n          pattern: 'MM/DD',\r\n          format: (s, e) => `${s} ~ ${e}`,\r\n          text: match[0],\r\n          dateStart: `${currentYear}-${String(mm).padStart(2, '0')}-${String(dd).padStart(2, '0')}`,\r\n          dateEnd: `${currentYear}-${String(mm2).padStart(2, '0')}-${String(dd2).padStart(2, '0')}`,\r\n          index: match.index,\r\n        };\r\n      },\r\n    },\r\n    {\r\n      regex: /\\b(?<!\\d)(\\d{2})\\/(\\d{2})(?!\\d)\\b/g,\r\n      parse: (match) => {\r\n        const mm = parseInt(match[1], 10);\r\n        const dd = parseInt(match[2], 10);\r\n        return {\r\n          pattern: 'MM/DD',\r\n          text: match[0],\r\n          dateStart: `${currentYear}-${String(mm).padStart(2, '0')}-${String(dd).padStart(2, '0')}`,\r\n          dateEnd: `${currentYear}-${String(mm).padStart(2, '0')}-${String(dd).padStart(2, '0')}`,\r\n          index: match.index,\r\n        };\r\n      },\r\n    },\r\n  ];\r\n\r\n  const results: DatePattern[] = [];\r\n\r\n  const usedRanges: [number, number][] = [];\r\n\r\n  for (const pattern of patterns) {\r\n    const regex = new RegExp(pattern.regex.source, 'g');\r\n    let match: RegExpExecArray | null;\r\n\r\n    while ((match = regex.exec(input)) !== null) {\r\n      const start = match.index;\r\n      const end = regex.lastIndex;\r\n      //     skip\r\n      if (results.some((result) => start < result.index + result.text.length && end > result.index))\r\n        continue;\r\n      results.push(pattern.parse(match));\r\n      usedRanges.push([start, end]);\r\n    }\r\n  }\r\n\r\n  return results;\r\n}\r\nexport function cleanHtml(html: string, cleanAnchors: boolean, mergeTds: boolean): string {\r\n  const parser = new DOMParser();\r\n  const doc = parser.parseFromString(html, 'text/html');\r\n\r\n  // 1. <code>   \r\n  const codeTags = doc.querySelectorAll('code');\r\n  codeTags.forEach((code) => {\r\n    code.textContent = '';\r\n  });\r\n  // 2. <a>   \r\n  const aTags = doc.querySelectorAll('a');\r\n  aTags.forEach((a) => {\r\n    a.textContent = '';\r\n  });\r\n  if (mergeTds) {\r\n    // 3.  <tr>  <td> \r\n    const trList = doc.querySelectorAll('tr');\r\n    trList.forEach((tr) => {\r\n      const tdList = tr.querySelectorAll('td');\r\n      if (tdList.length > 1) {\r\n        const mergedText = Array.from(tdList)\r\n          .map((td) => td.textContent?.trim() || '')\r\n          .join(' ');\r\n\r\n        //  td   \r\n        const newTd = document.createElement('td');\r\n        newTd.textContent = mergedText;\r\n\r\n        //  td     td \r\n        tr.innerHTML = '';\r\n        tr.appendChild(newTd);\r\n      }\r\n    });\r\n  }\r\n  return doc.body.innerHTML;\r\n}\r\n\r\nexport const paragraphsToDatePatterns = (title: string, paragraphs: Paragraph[]) => {\r\n  return paragraphs\r\n    .map((paragraph) => {\r\n      const dateMatches = [\r\n        toRaw(paragraph.header),\r\n        ...toRaw(cleanHtml(paragraph.description, false, true)).split('\\n'),\r\n      ].map((v2, i) => ({\r\n        path: paragraph.path,\r\n        isHeader: i === 0,\r\n        original: v2,\r\n        matches: extractDates(v2),\r\n      }));\r\n      return { title, paragraph: paragraph.title, dateMatches };\r\n    })\r\n    .filter((v) => v.dateMatches.filter((v2) => v2.matches.length > 0).length > 0);\r\n};\r\n\r\nexport const matchDateRange = (\r\n  dateMatches: { matches: DatePattern[]; original: string; path: string; isHeader: boolean }[],\r\n  dateNum: number\r\n) => {\r\n  return dateMatches.filter((dateMatch) =>\r\n    dateMatch.matches.find(\r\n      (match) =>\r\n        new Date(match.dateStart).getTime() <= dateNum &&\r\n        dateNum <= new Date(match.dateEnd).getTime()\r\n    )\r\n  );\r\n};\r\n\r\nexport const today = () => dayjs().format('YYYY-MM-DD');\r\n\r\nexport type TimerData = DatePattern & { original: string; replace: (a: string) => void };\r\n\r\nconst TimerTag = (props: {\r\n  data: TimerData;\r\n  buttons: (data: TimerData) => { title: string; onPress: () => void }[];\r\n  now: dayjs.Dayjs;\r\n  isExpand: boolean;\r\n  toggleExpand: () => void;\r\n}) => {\r\n  const start = dayjs(props.data.dateStart);\r\n  const end = dayjs(props.data.dateEnd).add(1, 'day');\r\n  const ratio = start.diff(props.now) / start.diff(end);\r\n  const { lang } = useLangContext();\r\n  return (\r\n    <TouchableOpacity onPress={() => props.toggleExpand()}>\r\n      <View\r\n        style={{ backgroundColor: 'lightgray', borderRadius: 20, overflow: 'hidden', margin: 4 }}\r\n      >\r\n        <View\r\n          style={{\r\n            backgroundColor: 'darkgray',\r\n            position: 'absolute',\r\n            width: `${ratio * 100}%`,\r\n            height: '100%',\r\n          }}\r\n        />\r\n        {props.isExpand ? (\r\n          <View style={{ paddingVertical: 4, paddingHorizontal: 4, maxWidth: 270 }}>\r\n            <View style={{ flexDirection: 'row', alignItems: 'stretch' }}>\r\n              <Text></Text>\r\n              <Text selectable={false}>{props.data.text}</Text>\r\n            </View>\r\n            <Text>{props.data.original}</Text>\r\n            <View style={{ width: '100%', alignItems: 'center' }}>\r\n              {props.buttons(props.data).map((v) => (\r\n                <CommonButton\r\n                  key={v.title}\r\n                  title={lang(v.title)}\r\n                  onPress={() => {\r\n                    v.onPress();\r\n                    props.toggleExpand();\r\n                  }}\r\n                  style={{ width: '100%', backgroundColor: '#8888', margin: 4, maxWidth: 150 }}\r\n                />\r\n              ))}\r\n            </View>\r\n          </View>\r\n        ) : (\r\n          <View style={{ paddingVertical: 4, paddingHorizontal: 4, flexDirection: 'row' }}>\r\n            <View style={{ paddingHorizontal: 4 }}>\r\n              <Text selectable={false}>{props.data.text}</Text>\r\n            </View>\r\n          </View>\r\n        )}\r\n      </View>\r\n    </TouchableOpacity>\r\n  );\r\n};\r\nexport default TimerTag;\r\n","import { toRaw } from '@blacktokki/editor';\r\nimport { useEffect, useRef, useState } from 'react';\r\n\r\nimport { Paragraph, parseHtmlToParagraphs } from '../components/HeaderSelectBar';\r\nimport { getLinks, titleFormat } from '../components/SearchBar';\r\nimport { cleanHtml } from '../components/TimerTag';\r\nimport { Content } from '../types';\r\nimport { useNotePages } from './useNoteStorage';\r\n\r\nconst getReadabilityLevel = (() => {\r\n  function getKoreanRatio(text: string): number {\r\n    return (text.match(/[-]/g) || []).length / text.length;\r\n  }\r\n\r\n  function countSyllables(word: string): number {\r\n    word = word.toLowerCase();\r\n    if (word.length <= 3) return 1;\r\n    const vowels = /[aeiouy]+/g;\r\n    const trailingE = /e\\b/;\r\n    const matches = word.match(vowels) || [];\r\n    let syllables = matches.length;\r\n    if (trailingE.test(word) && syllables > 1) syllables--;\r\n    return Math.max(syllables, 1);\r\n  }\r\n\r\n  function calculateFleschKincaid(text: string): number {\r\n    const sentenceCount = (text.match(/[.!?\\n]+/g) || []).length || 1;\r\n    const wordList = text.trim().split(/\\s+/);\r\n    const wordCount = wordList.length;\r\n    const syllableCount = wordList.reduce((sum, word) => sum + countSyllables(word), 0);\r\n    return 0.39 * (wordCount / sentenceCount) + 11.8 * (syllableCount / wordCount) - 15.59;\r\n  }\r\n\r\n  function classifyFleschKincaid(score: number): number {\r\n    if (score < 3.0) return 1;\r\n    if (score < 6.0) return 2;\r\n    if (score < 9.0) return 3;\r\n    if (score < 12.0) return 4;\r\n    return 5;\r\n  }\r\n\r\n  function classifyKoreanReadability(text: string): number {\r\n    const sentences = text.split(/[.?!\\n]/).filter((s) => s.trim().length > 0);\r\n    const words = text.trim().split(/\\s+/);\r\n    const wordCount = words.length;\r\n    const sentenceCount = sentences.length || 1;\r\n    const avgWordsPerSentence = wordCount / sentenceCount;\r\n\r\n    if (avgWordsPerSentence <= 7) return 1; //  \r\n    if (avgWordsPerSentence <= 10) return 2;\r\n    if (avgWordsPerSentence <= 13) return 3;\r\n    if (avgWordsPerSentence <= 16) return 4;\r\n    return 5; //  \r\n  }\r\n\r\n  function _getReadabilityLevel(text: string) {\r\n    const koRatio = getKoreanRatio(text);\r\n    const enGrade = calculateFleschKincaid(text);\r\n    const enLevel = classifyFleschKincaid(enGrade);\r\n    const koLevel = classifyKoreanReadability(text);\r\n    return { koRatio, enLevel, koLevel, level: koLevel * koRatio + enLevel * (1 - koRatio) };\r\n  }\r\n  return _getReadabilityLevel;\r\n})();\r\n\r\nfunction findLists(html: string): { type: 'ul' | 'ol'; items: string[] }[] {\r\n  const parser = new DOMParser();\r\n  const doc = parser.parseFromString(html, 'text/html');\r\n\r\n  const results: { type: 'ul' | 'ol'; items: string[] }[] = [];\r\n\r\n  const listTags = ['ul', 'ol'] as const;\r\n\r\n  listTags.forEach((tag) => {\r\n    const lists = Array.from(doc.querySelectorAll(tag));\r\n\r\n    lists.forEach((list) => {\r\n      const items: string[] = [];\r\n\r\n      const liElements = list.querySelectorAll('li');\r\n      liElements.forEach((li) => {\r\n        // li       \r\n        const cloned = li.cloneNode(true) as HTMLElement;\r\n\r\n        //   \r\n        cloned.querySelectorAll('ul, ol').forEach((nested) => nested.remove());\r\n\r\n        items.push(cloned.textContent?.trim() || '');\r\n      });\r\n\r\n      results.push({ type: tag, items });\r\n    });\r\n  });\r\n\r\n  return results;\r\n}\r\n\r\nexport const getSplitTitle = (title: string) => {\r\n  const splitTitle = title.split('/');\r\n  if (splitTitle.length < 2) {\r\n    return [title];\r\n  }\r\n  return [splitTitle.slice(0, splitTitle.length - 1).join('/'), splitTitle[splitTitle.length - 1]];\r\n};\r\n\r\nexport const paragraphDescription = (\r\n  paragraphs: Paragraph[],\r\n  paragraph: string,\r\n  rootTitle: boolean\r\n) => {\r\n  const path = paragraphs.find((v) => v.title === paragraph)?.path;\r\n  return path\r\n    ? paragraphs\r\n        .filter((v) => v.path === path || v.path.startsWith(path + ' > '))\r\n        .map((v) => (rootTitle || v.path !== path ? v.header : '') + v.description)\r\n        .join('')\r\n    : '';\r\n};\r\n\r\nconst trim = (text: string) => text.replaceAll('\\n', '').replaceAll('&nbsp;', '').trim();\r\n\r\ntype ProblemItem = [string, string | undefined, string]; // title, paragraph, subtitle\r\ntype ProblemSource = {\r\n  title: string;\r\n  updated: string;\r\n  raw: string;\r\n  links: { name: string; title: string; paragraph?: string; origin: string }[];\r\n  parentTitle: string | undefined;\r\n};\r\n\r\nconst problemCache: Record<\r\n  string,\r\n  {\r\n    record: ProblemItem[];\r\n    source: ProblemSource;\r\n    matrix: Record<string, { updated: string; record: ProblemItem[] }>;\r\n  }\r\n> = {};\r\n\r\nconst getDataLinear = (page: Content) => {\r\n  const existData = problemCache[page.title];\r\n  if (existData?.source.updated === page.updated) {\r\n    return problemCache[page.title];\r\n  }\r\n  const record: ProblemItem[] = [];\r\n  // empty contents\r\n  const paragraphs = parseHtmlToParagraphs(page.description || '');\r\n  const lists = paragraphs\r\n    .map((v) => ({ ...v, lists: findLists(v.description) }))\r\n    .filter((v) => v.lists.length > 0);\r\n  paragraphs\r\n    .filter(\r\n      (v) => v.level !== 0 && trim(paragraphDescription(paragraphs, v.title, false)).length === 0\r\n    )\r\n    .forEach((v) =>\r\n      record.push([page.title, v.level === 0 ? undefined : v.title, 'Empty paragraph'])\r\n    );\r\n  lists\r\n    .filter(\r\n      (v) =>\r\n        v.lists.filter((v2) => v2.items.filter((v2) => trim(v2).length === 0).length > 0).length > 0\r\n    )\r\n    .forEach((v2) =>\r\n      record.push([page.title, v2.level === 0 ? undefined : v2.title, 'Empty list'])\r\n    );\r\n\r\n  // duplicate contents\r\n  paragraphs\r\n    .filter((v) => v !== paragraphs.findLast((v2) => v2.path === v.path))\r\n    .forEach((v) => record.push([page.title, undefined, `Duplicate paragraphs(${v})`]));\r\n  paragraphs\r\n    .map((v) => {\r\n      const sentences = cleanHtml(v.description, false, true)\r\n        .split('\\n')\r\n        .map((v2) => toRaw(v2).trim())\r\n        .filter((v) => v.includes(' ') && v.length > 4);\r\n      return {\r\n        ...v,\r\n        duplicates: sentences.filter((v2, i) => i !== sentences.lastIndexOf(v2)),\r\n      };\r\n    })\r\n    .forEach((v) =>\r\n      v.duplicates.forEach((v2) =>\r\n        record.push([page.title, v.level === 0 ? undefined : v.title, `Duplicate contents(${v2})`])\r\n      )\r\n    );\r\n  // readability\r\n  const readability = page.description\r\n    ? getReadabilityLevel(\r\n        toRaw(\r\n          page.description\r\n            .replaceAll(/<code\\b[^>]*>[\\s\\S]*?<\\/code>/gi, '<code></code>')\r\n            .replaceAll(/<br\\s*[/]?>/gi, '\\r\\n')\r\n        )\r\n      )\r\n    : { level: 0 };\r\n  if (readability.level > 3.0) {\r\n    record.push([\r\n      page.title,\r\n      undefined,\r\n      `Too high readability score: ${readability.level.toFixed(4)} > 3.0`,\r\n    ]);\r\n  }\r\n  const links = getLinks([page], true).filter((v) => v.type === '_NOTELINK');\r\n  const splitTitle = getSplitTitle(page.title);\r\n  const parentTitle = page.description && splitTitle.length === 2 ? splitTitle[0] : undefined;\r\n  const raw = toRaw(cleanHtml(page.description || '', true, false));\r\n  problemCache[page.title] = {\r\n    record,\r\n    source: { title: page.title, updated: page.updated, links, parentTitle, raw },\r\n    matrix: {},\r\n  };\r\n  return problemCache[page.title];\r\n};\r\n\r\nconst getDataMatrix = (source: ProblemSource, target: Content) => {\r\n  if (source.title === target.title) {\r\n    return [];\r\n  }\r\n  const existData = problemCache[source.title];\r\n  const existTarget = existData.matrix[target.title];\r\n  if (existData?.source.updated === source.updated && existTarget?.updated === target.updated) {\r\n    return existTarget.record;\r\n  }\r\n  const record: ProblemItem[] = [];\r\n  const links = source.links.filter((link) => link.title === target.title);\r\n\r\n  if (target.description) {\r\n    const description = target.description;\r\n    const _target = problemCache[target.title].source;\r\n    //unknown paragraph\r\n    links\r\n      .filter(\r\n        (link) =>\r\n          link.paragraph !== undefined &&\r\n          parseHtmlToParagraphs(description).find((v2) => v2.title === link.paragraph) === undefined\r\n      )\r\n      .forEach((link) => {\r\n        record.push([link.title, link.paragraph, `Unknown paragraph link(${link.origin})`]);\r\n      });\r\n    //unlinked keyword\r\n    const sourceName = source.title;\r\n    if (\r\n      _target.parentTitle !== source.title &&\r\n      _target.links.find((v) => v.name.toLowerCase() === sourceName.toLowerCase()) === undefined\r\n    ) {\r\n      const match = _target.raw.match(new RegExp(`\\\\b${sourceName}\\\\b`, 'i'));\r\n      if (match) {\r\n        record.push([target.title, undefined, `Unlinked note keyword: ${match[0]}`]);\r\n      }\r\n    }\r\n    source.links\r\n      .filter(\r\n        (link) =>\r\n          _target.parentTitle !== link.title &&\r\n          link.title.toLowerCase() !== link.name.toLowerCase() && // alias link only\r\n          link.title !== target.title && // not self link\r\n          _target.links.find(\r\n            (v) =>\r\n              v.name.toLowerCase() === link.name.toLowerCase() &&\r\n              v.title === link.title &&\r\n              v.paragraph === link.paragraph\r\n          ) === undefined\r\n      )\r\n      .forEach((link) => {\r\n        const match = _target.raw.match(new RegExp(`\\\\b${link.name}\\\\b`, 'i'));\r\n        if (match) {\r\n          record.push([\r\n            target.title,\r\n            undefined,\r\n            `Unlinked note keyword: ${match[0]} => ${titleFormat(link)}(${link.origin})`,\r\n          ]);\r\n        }\r\n      });\r\n  } else {\r\n    //unknown note\r\n    links.forEach((link) => {\r\n      record.push([link.title, link.paragraph, `Unknown note link(${link.origin})`]);\r\n    });\r\n\r\n    //empty parent note\r\n    if (source.parentTitle === target.title) {\r\n      record.push([source.parentTitle, undefined, `Empty parent note(${source.title})`]);\r\n    }\r\n  }\r\n  existData.matrix[target.title] = { record, updated: target.updated };\r\n\r\n  return record;\r\n};\r\n\r\nconst getData = (pages: Content[]) => {\r\n  const records: { title: string; paragraph: string | undefined; subtitles: string[] }[] = [];\r\n  pages\r\n    .map(getDataLinear)\r\n    .flatMap(({ record, source }) => {\r\n      return [...pages.flatMap((target) => getDataMatrix(source, target)), ...record];\r\n    })\r\n    .forEach(([title, paragraph, subtitle]) => {\r\n      const i = records.findIndex((v) => v.title === title && v.paragraph === paragraph);\r\n      if (i >= 0) {\r\n        records[i].subtitles.push(subtitle);\r\n      } else {\r\n        records.push({ title, paragraph, subtitles: [subtitle] });\r\n      }\r\n    });\r\n  return records;\r\n};\r\n\r\nexport default (delay?: number) => {\r\n  const { data: pages = [], isLoading } = useNotePages();\r\n  const [data, setData] = useState<{ title: string; paragraph?: string; subtitles: string[] }[]>();\r\n  const timeoutRef = useRef<NodeJS.Timeout>();\r\n  useEffect(() => {\r\n    timeoutRef.current && clearTimeout(timeoutRef.current);\r\n    timeoutRef.current = setTimeout(() => {\r\n      setData(getData(pages));\r\n      timeoutRef.current = undefined;\r\n    }, delay || 500);\r\n  }, [pages]);\r\n  return { data: data || [], isLoading: isLoading || data === undefined };\r\n};\r\n","import { useMemo } from 'react';\r\n\r\nimport { parseHtmlToParagraphs } from '../components/HeaderSelectBar';\r\nimport { matchDateRange, paragraphsToDatePatterns, today } from '../components/TimerTag';\r\nimport { useNotePages } from './useNoteStorage';\r\n\r\nexport default (date?: string) => {\r\n  const dateNum = new Date(date || today()).getTime();\r\n\r\n  const { data: notes = [], isLoading } = useNotePages();\r\n  const preData = useMemo(\r\n    () =>\r\n      notes.flatMap((v) =>\r\n        paragraphsToDatePatterns(v.title, parseHtmlToParagraphs(v?.description || ''))\r\n      ),\r\n    [notes]\r\n  );\r\n  const data = preData\r\n    .map((v) => {\r\n      return {\r\n        ...v,\r\n        subtitles: matchDateRange(v.dateMatches, dateNum).map((dateMatch) => dateMatch.original),\r\n      };\r\n    })\r\n    .filter((v2) => v2.subtitles.length > 0);\r\n  return { data, isLoading, preData };\r\n};\r\n","import { useLangContext, useResizeContext, View } from '@blacktokki/core';\r\nimport { navigate, push } from '@blacktokki/navigation';\r\nimport React, { useRef } from 'react';\r\nimport { List, TouchableRipple, Badge } from 'react-native-paper';\r\n\r\nimport {\r\n  useRecentPages,\r\n  useNotePages,\r\n  useDeleteRecentPage,\r\n  useLastPage,\r\n  useAddRecentPage,\r\n} from '../../../hooks/useNoteStorage';\r\nimport useProblem from '../../../hooks/useProblem';\r\nimport useTimeLine from '../../../hooks/useTimeLine';\r\nimport { Content } from '../../../types';\r\n\r\nconst getItemPadding = (isLandscape: boolean) => {\r\n  return isLandscape ? 5 : 8;\r\n};\r\n\r\nexport const TimeLineButton = () => {\r\n  const { lang } = useLangContext();\r\n  const { data } = useTimeLine();\r\n  return (\r\n    <List.Item\r\n      left={(_props) => <List.Icon {..._props} icon={'calendar'} />}\r\n      right={(_props) => (\r\n        <View style={{ alignSelf: 'center', backgroundColor: 'transparent' }}>\r\n          {data.length > 0 && <Badge>{data.length}</Badge>}\r\n        </View>\r\n      )}\r\n      title={lang('TimeLine')}\r\n      onPress={() => navigate('TimeLine')}\r\n    />\r\n  );\r\n};\r\n\r\nexport const ProblemButton = () => {\r\n  const { lang } = useLangContext();\r\n  const { data } = useProblem();\r\n  return (\r\n    <List.Item\r\n      left={(_props) => <List.Icon {..._props} icon={'note-alert'} />}\r\n      right={(_props) => (\r\n        <View style={{ alignSelf: 'center', backgroundColor: 'transparent' }}>\r\n          {data.length > 0 && <Badge>{data.length}</Badge>}\r\n        </View>\r\n      )}\r\n      title={lang('Problems')}\r\n      onPress={() => push('Problem')}\r\n    />\r\n  );\r\n};\r\n\r\nexport const toRecentContents = (data: Content[]) =>\r\n  data\r\n    .filter((v) => v.description)\r\n    .sort((a, b) => new Date(b.updated).getTime() - new Date(a.updated).getTime());\r\n\r\nconst ContentGroupSection = (\r\n  props: { type: 'PAGE' | 'LAST' } | { type: 'NOTE'; noteCount: number }\r\n) => {\r\n  const { lang } = useLangContext();\r\n  const notes = useNotePages();\r\n  const pages = useRecentPages();\r\n  const { data: lastPage } = useLastPage();\r\n  const tabRef = useRef<NodeJS.Timeout>();\r\n  const addRecentPage = useAddRecentPage();\r\n  const deleteRecentPage = useDeleteRecentPage();\r\n  const data =\r\n    props.type === 'NOTE' ? (notes.data ? toRecentContents(notes.data) : []) : pages.data;\r\n  const lastPageExists = lastPage && data?.find((v) => v.id === lastPage.id) === undefined;\r\n  const window = useResizeContext();\r\n  const itemPadding = getItemPadding(window === 'landscape');\r\n  const noteOnPress = (title: string) => {\r\n    if (title === lastPage?.title) {\r\n      if (tabRef.current) {\r\n        clearTimeout(tabRef.current);\r\n        tabRef.current = undefined;\r\n        addRecentPage.mutate({ title });\r\n      } else {\r\n        tabRef.current = setTimeout(() => {\r\n          tabRef.current = undefined;\r\n        }, 500);\r\n      }\r\n    }\r\n    navigate('NotePage', { title });\r\n  };\r\n  const noteOnLongPress = (title: string) => {\r\n    if (tabRef.current) {\r\n      clearTimeout(tabRef.current);\r\n      tabRef.current = undefined;\r\n    }\r\n    if (pages.data?.find((v) => v.title === title) === undefined) {\r\n      addRecentPage.mutate({ title, direct: true });\r\n    } else {\r\n      deleteRecentPage.mutate(title);\r\n    }\r\n  };\r\n  return (\r\n    (props.type !== 'LAST' || lastPageExists) && (\r\n      <List.Section>\r\n        {data &&\r\n          (props.type === 'LAST' ? (\r\n            lastPageExists && (\r\n              <List.Item\r\n                left={(_props) => <List.Icon {..._props} icon={'file-document'} />}\r\n                title={lastPage.title}\r\n                onPress={() => noteOnPress(lastPage.title)}\r\n                onLongPress={() => noteOnLongPress(lastPage.title)}\r\n                style={{ padding: itemPadding }}\r\n                titleStyle={{ fontStyle: 'italic' }}\r\n              />\r\n            )\r\n          ) : props.type === 'NOTE' ? (\r\n            <>\r\n              {data.slice(0, props.noteCount).map((v) => (\r\n                <List.Item\r\n                  key={v.title}\r\n                  left={(_props) => (\r\n                    <List.Icon\r\n                      {..._props}\r\n                      icon={\r\n                        pages.data?.find((v2) => v2.title === v.title) === undefined\r\n                          ? 'notebook'\r\n                          : 'notebook-edit'\r\n                      }\r\n                    />\r\n                  )}\r\n                  title={v.title}\r\n                  onPress={() => noteOnPress(v.title)}\r\n                  onLongPress={() => noteOnLongPress(v.title)}\r\n                  style={{ padding: itemPadding }}\r\n                />\r\n              ))}\r\n              <List.Item\r\n                left={(_props) => <List.Icon {..._props} icon={'notebook-multiple'} />}\r\n                title={lang('more...')}\r\n                onPress={() => push('RecentPages')}\r\n                style={{ padding: itemPadding }}\r\n              />\r\n            </>\r\n          ) : (\r\n            data.map((v) => (\r\n              <List.Item\r\n                key={v.title}\r\n                left={(_props) => <List.Icon {..._props} icon={'file-document-edit'} />}\r\n                right={(_props) => (\r\n                  <TouchableRipple\r\n                    style={{\r\n                      justifyContent: 'center',\r\n                      borderRadius: itemPadding,\r\n                      width: 40 + itemPadding * 2,\r\n                      height: 40 + itemPadding * 2,\r\n                      margin: -itemPadding,\r\n                    }}\r\n                    onPress={() => deleteRecentPage.mutate(v.title)}\r\n                  >\r\n                    <List.Icon style={{ left: itemPadding - 7 }} icon={'close'} />\r\n                  </TouchableRipple>\r\n                )}\r\n                title={v.title}\r\n                onPress={() => navigate('NotePage', { title: v.title })}\r\n                style={{ padding: itemPadding }}\r\n              />\r\n            ))\r\n          ))}\r\n      </List.Section>\r\n    )\r\n  );\r\n};\r\n\r\nexport default ContentGroupSection;\r\n","import { useColorScheme, useResizeContext, View, Text, useLangContext } from '@blacktokki/core';\r\nimport { useNavigation } from '@react-navigation/core';\r\nimport { StackNavigationProp } from '@react-navigation/stack';\r\nimport React, { Suspense, useEffect, useMemo, useState } from 'react';\r\nimport { TouchableOpacity, ScrollView } from 'react-native';\r\nimport { Card } from 'react-native-paper';\r\n\r\nimport { useNotePages } from '../../hooks/useNoteStorage';\r\nimport { createCommonStyles } from '../../styles';\r\nimport { Content, NavigationParamList } from '../../types';\r\nimport { toRecentContents } from './home/ContentGroupSection';\r\n\r\nconst updatedOffset = new Date().getTimezoneOffset();\r\n\r\nexport const updatedFormat = (_updated: string) => {\r\n  const _date = new Date(_updated);\r\n  _date.setMinutes(_date.getMinutes() - updatedOffset);\r\n  const updated = _date.toISOString().slice(0, 16);\r\n  const date = updated.slice(0, 10);\r\n  const today = new Date().toISOString().slice(0, 10);\r\n  return date === today ? updated.slice(11) : date;\r\n};\r\n\r\nfunction removeAttributesRecursively(element: Element) {\r\n  const attributes = Array.from(element.attributes); //     \r\n\r\n  for (const attr of attributes) {\r\n    if (attr.name === 'href') {\r\n      element.setAttribute('href', '');\r\n    } else {\r\n      element.removeAttribute(attr.name);\r\n    }\r\n  }\r\n\r\n  //     \r\n  for (const child of element.children as unknown as Element[]) {\r\n    removeAttributesRecursively(child);\r\n  }\r\n}\r\n\r\nfunction removeAllAttributesFromHTML(html: string): string {\r\n  const parser = new DOMParser();\r\n  const doc = parser.parseFromString(html, 'text/html');\r\n\r\n  // body    \r\n  const body = doc.body;\r\n  for (const child of body.children as unknown as Element[]) {\r\n    removeAttributesRecursively(child);\r\n  }\r\n\r\n  return body.innerHTML;\r\n}\r\n\r\nconst _cardPadding = (isLandscape: boolean) => (isLandscape ? 20 : 4);\r\nconst _cardMaxWidth = (isLandscape: boolean) => (isLandscape ? 250 : 190);\r\n\r\ntype Item = (Content & { descriptionComponent: JSX.Element }) | null;\r\n\r\nconst CardPage = React.memo(({ item, index }: { item: Item; index: number }) => {\r\n  const window = useResizeContext();\r\n  const cardMaxWidth = _cardMaxWidth(window === 'landscape');\r\n  const theme = useColorScheme();\r\n  const commonStyles = createCommonStyles(theme);\r\n  const fSize = window === 'landscape' ? 2 : 0;\r\n  const [mounted, setMounted] = useState(index < 10);\r\n\r\n  useEffect(() => {\r\n    if (!mounted) {\r\n      const timer = setTimeout(() => setMounted(true), 50 * index - 400);\r\n      return () => clearTimeout(timer);\r\n    }\r\n  }, [item, index, mounted]);\r\n\r\n  if (item === null) {\r\n    return (\r\n      <View\r\n        style={{\r\n          flexBasis: window === 'landscape' ? '33%' : '50%',\r\n          maxWidth: cardMaxWidth,\r\n          backgroundColor: 'transparent',\r\n        }}\r\n      />\r\n    );\r\n  }\r\n  const navigation = useNavigation<StackNavigationProp<NavigationParamList>>();\r\n  const onPress = () => navigation.push('NotePage', { title: item.title });\r\n  return (\r\n    <TouchableOpacity\r\n      style={{\r\n        flexBasis: window === 'landscape' ? '33%' : '50%',\r\n        padding: _cardPadding(window === 'landscape'),\r\n        paddingRight: 0,\r\n        minWidth: cardMaxWidth,\r\n        maxWidth: cardMaxWidth,\r\n      }}\r\n      onPress={onPress}\r\n    >\r\n      <Card\r\n        onPress={onPress}\r\n        style={[\r\n          commonStyles.card,\r\n          {\r\n            paddingTop: 8,\r\n            aspectRatio: 1 / Math.sqrt(2),\r\n            borderRadius: 6,\r\n            marginVertical: 10,\r\n            marginHorizontal: 8,\r\n            overflow: 'hidden',\r\n          },\r\n        ]}\r\n      >\r\n        <Card.Content style={{ padding: 0 }}>{mounted && item.descriptionComponent}</Card.Content>\r\n      </Card>\r\n      <View\r\n        style={{\r\n          flexDirection: 'row',\r\n          marginTop: 10,\r\n          padding: 0,\r\n          justifyContent: 'space-between',\r\n          alignItems: 'center',\r\n          width: '100%',\r\n          backgroundColor: 'transparent',\r\n        }}\r\n      >\r\n        <Text style={{ fontSize: 14 + fSize, overflow: 'hidden' }}>{item.title}</Text>\r\n        <Text style={{ fontSize: 12 + fSize, opacity: 0.4, textAlign: 'right' }}>\r\n          {updatedFormat(item.updated)}\r\n        </Text>\r\n      </View>\r\n    </TouchableOpacity>\r\n  );\r\n});\r\n\r\nconst renderItem = ({ item, index }: { item: Item; index: number }) => (\r\n  <CardPage key={index} index={index} item={item} />\r\n);\r\n\r\nexport const RecentPagesSection = React.memo(() => {\r\n  const theme = useColorScheme();\r\n  const commonStyles = createCommonStyles(theme);\r\n  const window = useResizeContext();\r\n  const { lang } = useLangContext();\r\n  const { data: recentPages = [], isLoading } = useNotePages();\r\n  const navigation = useNavigation<StackNavigationProp<NavigationParamList>>();\r\n  const cardMaxWidth = _cardMaxWidth(window === 'landscape');\r\n  const RenderHtml = useMemo(() => React.lazy(() => import('react-native-render-html')), []);\r\n  const contents = useMemo(\r\n    () => [\r\n      ...toRecentContents(recentPages).map((v) => ({\r\n        ...v,\r\n        descriptionComponent: (\r\n          <RenderHtml\r\n            source={{ html: removeAllAttributesFromHTML(v.description || '').slice(0, 300) || '' }}\r\n            renderersProps={{\r\n              a: { onPress: () => navigation.push('NotePage', { title: v.title }) },\r\n            }}\r\n            tagsStyles={{ body: { color: commonStyles.text.color } }}\r\n            contentWidth={cardMaxWidth}\r\n          />\r\n        ),\r\n      })),\r\n      null,\r\n      null,\r\n    ],\r\n    [recentPages]\r\n  );\r\n  const maxWidth = (cardMaxWidth + 5) * (window === 'landscape' ? 5 : 3);\r\n  return isLoading ? (\r\n    <View style={commonStyles.container}>\r\n      <View style={[commonStyles.card, commonStyles.centerContent]}>\r\n        <Text style={commonStyles.text}> ...</Text>\r\n      </View>\r\n    </View>\r\n  ) : contents.length > 2 ? (\r\n    <ScrollView\r\n      key={window}\r\n      contentContainerStyle={{\r\n        alignSelf: 'center',\r\n        backgroundColor: 'transparent',\r\n        flexBasis: '100%',\r\n        maxWidth,\r\n        flexWrap: 'wrap',\r\n        flexDirection: 'row',\r\n        paddingRight: _cardPadding(window === 'landscape'),\r\n        justifyContent: window === 'landscape' ? undefined : 'center',\r\n      }}\r\n    >\r\n      <Suspense>{contents.map((item, index) => renderItem({ item, index }))}</Suspense>\r\n    </ScrollView>\r\n  ) : (\r\n    <View style={commonStyles.container}>\r\n      <View style={[commonStyles.card, commonStyles.centerContent]}>\r\n        <Text style={commonStyles.text}>{lang('There are no recently modified notes.')}</Text>\r\n        <TouchableOpacity\r\n          onPress={() => navigation.push('NoteViewer', { key: 'Usage' })}\r\n          style={commonStyles.button}\r\n        >\r\n          <Text style={commonStyles.buttonText}>{lang('Usage')}</Text>\r\n        </TouchableOpacity>\r\n      </View>\r\n    </View>\r\n  );\r\n});\r\n","import { useResizeContext } from '@blacktokki/core';\r\nimport { RouteProp, useNavigation, useRoute } from '@react-navigation/native';\r\nimport { StackNavigationProp } from '@react-navigation/stack';\r\nimport React from 'react';\r\n\r\nimport { SearchBar } from '../../components/SearchBar';\r\nimport { useNotePage, useSnapshotPages } from '../../hooks/useNoteStorage';\r\nimport { NavigationParamList } from '../../types';\r\nimport { NoteListSection } from './NoteListSection';\r\nimport { updatedFormat } from './RecentPageSection';\r\n\r\ntype ArchiveScreenRouteProp = RouteProp<NavigationParamList, 'Archive'>;\r\n\r\nexport const ArchiveScreen: React.FC = () => {\r\n  const navigation = useNavigation<StackNavigationProp<NavigationParamList>>();\r\n  const route = useRoute<ArchiveScreenRouteProp>();\r\n  const _window = useResizeContext();\r\n  const title = route.params?.title;\r\n  const { data: note } = useNotePage(title || '');\r\n  const { data: archives = { pages: [] }, isLoading, fetchNextPage } = useSnapshotPages(note?.id);\r\n  return (\r\n    <>\r\n      {_window === 'portrait' && <SearchBar />}\r\n      <NoteListSection\r\n        contents={archives.pages\r\n          .flat()\r\n          .filter((v) => title === undefined || title === v.title)\r\n          .map((v, i) => ({\r\n            ...v,\r\n            subtitles: [` : ${updatedFormat(v.updated as string)}`],\r\n            id: v.id || i,\r\n          }))}\r\n        isLoading={isLoading}\r\n        onPress={(title, _, id) =>\r\n          (title === undefined ? navigation.push : navigation.navigate)('NotePage', {\r\n            title,\r\n            archiveId: id,\r\n          })\r\n        }\r\n        emptyMessage=\"There are no recently modified notes.\"\r\n        onScrollEnd={fetchNextPage}\r\n      />\r\n    </>\r\n  );\r\n};\r\n","import { useColorScheme, useLangContext, useModalsContext } from '@blacktokki/core';\r\nimport { Editor } from '@blacktokki/editor';\r\nimport { RouteProp, useIsFocused, useNavigation, useRoute } from '@react-navigation/native';\r\nimport { StackNavigationProp } from '@react-navigation/stack';\r\nimport React, { useEffect, useRef, useState } from 'react';\r\nimport { View, Text, TouchableOpacity, Alert, StyleSheet } from 'react-native';\r\n\r\nimport { getFilteredPages, titleFormat } from '../../components/SearchBar';\r\nimport { useNotePage, useCreateOrUpdatePage, useNotePages } from '../../hooks/useNoteStorage';\r\nimport AlertModal from '../../modals/AlertModal';\r\nimport { previewUrl } from '../../services/notebook';\r\nimport { createCommonStyles } from '../../styles';\r\nimport { NavigationParamList } from '../../types';\r\n\r\ntype EditPageScreenRouteProp = RouteProp<NavigationParamList, 'EditPage'>;\r\n\r\nconst useUnsaveEffect = (\r\n  isPrevent: () => boolean,\r\n  handleUnsaved: () => void,\r\n  currentTitle: () => string | undefined\r\n) => {\r\n  const navigation = useNavigation<StackNavigationProp<NavigationParamList>>();\r\n  const route = useRoute<EditPageScreenRouteProp>();\r\n  const { title } = route.params;\r\n  useEffect(\r\n    () =>\r\n      navigation.addListener('beforeRemove', (e) => {\r\n        if (!isPrevent()) {\r\n          return;\r\n        }\r\n        e.preventDefault();\r\n        if (e.data.action.type === 'NAVIGATE') {\r\n          const payload = e.data.action.payload as any;\r\n          navigation.push(payload.name, payload.params);\r\n          return;\r\n        }\r\n        handleUnsaved();\r\n      }),\r\n    [navigation]\r\n  );\r\n\r\n  useEffect(() => {\r\n    if (isPrevent() && currentTitle() !== title) {\r\n      navigation.setParams({ title: currentTitle() });\r\n      handleUnsaved();\r\n    }\r\n  }, [navigation, title]);\r\n\r\n  useEffect(() => {\r\n    const callback = (event: any) => {\r\n      if (isPrevent()) {\r\n        event.preventDefault();\r\n        event.returnValue = '';\r\n      }\r\n    };\r\n    window.addEventListener('beforeunload', callback);\r\n    return () => window.removeEventListener('beforeunload', callback);\r\n  }, []);\r\n};\r\n\r\nexport const EditPageScreen: React.FC = () => {\r\n  const route = useRoute<EditPageScreenRouteProp>();\r\n  const isFocused = useIsFocused();\r\n  const { title } = route.params;\r\n  const navigation = useNavigation<StackNavigationProp<NavigationParamList>>();\r\n  const theme = useColorScheme();\r\n  const commonStyles = createCommonStyles(theme);\r\n  const { lang } = useLangContext();\r\n\r\n  const { data: page, isLoading } = useNotePage(title);\r\n  const { data: pages = [] } = useNotePages();\r\n  const getChildrenPages = (keyword: string) =>\r\n    pages\r\n      .filter((v) => v.title.startsWith(title + '/'))\r\n      .map((v) => ({\r\n        type: '_CHILDNOTE' as '_CHILDNOTE',\r\n        name: v.title.split(title + '/')[1],\r\n        title: v.title,\r\n      }))\r\n      .filter((v) => v.name.toLowerCase().startsWith(keyword.toLowerCase()));\r\n  const [content, setContent] = useState('');\r\n\r\n  const mutation = useCreateOrUpdatePage();\r\n  const { setModal } = useModalsContext();\r\n  const checkedRef = useRef<{ title: string; unsaved: boolean }>();\r\n\r\n  const handleBack = () => {\r\n    if (navigation.canGoBack()) {\r\n      navigation.goBack();\r\n    } else {\r\n      navigation.navigate('NotePage', { title });\r\n    }\r\n  };\r\n\r\n  const handleSave = () => {\r\n    if (checkedRef.current === undefined) return;\r\n    const title = checkedRef.current.title;\r\n    mutation.mutate(\r\n      { title, description: content },\r\n      {\r\n        onSuccess: () => {\r\n          checkedRef.current = undefined;\r\n          navigation.navigate('NotePage', { title });\r\n        },\r\n        onError: (error: any) => {\r\n          Alert.alert('', error.message || '    .');\r\n        },\r\n      }\r\n    );\r\n  };\r\n\r\n  const handleUnsaved = () => {\r\n    setModal(AlertModal, {\r\n      type: 'UNSAVED',\r\n      callbacks: [\r\n        handleSave,\r\n        () => {\r\n          if (title === checkedRef.current?.title && page?.description !== undefined) {\r\n            setContent(page?.description);\r\n          }\r\n          checkedRef.current = undefined;\r\n          handleBack();\r\n        },\r\n      ],\r\n    });\r\n  };\r\n\r\n  if (title === checkedRef.current?.title) {\r\n    checkedRef.current.unsaved = page?.description !== content;\r\n  }\r\n\r\n  const isPrevent = () => checkedRef.current !== undefined && checkedRef.current.unsaved;\r\n\r\n  useEffect(() => {\r\n    if (!isLoading && page?.description !== undefined && !isPrevent()) {\r\n      checkedRef.current = { title, unsaved: false };\r\n      setContent(page.description);\r\n    }\r\n  }, [isLoading, page]);\r\n\r\n  useUnsaveEffect(isPrevent, handleUnsaved, () => checkedRef.current?.title);\r\n  return (\r\n    isFocused && (\r\n      <View style={commonStyles.container}>\r\n        <View style={commonStyles.header}>\r\n          <Text style={[commonStyles.title, { flex: 1 }]}>{title} - </Text>\r\n        </View>\r\n        <Editor\r\n          active\r\n          value={content}\r\n          setValue={setContent}\r\n          theme={theme}\r\n          autoComplete={[\r\n            {\r\n              trigger: '[',\r\n              getMatchedChars: async (pattern) => {\r\n                const childrenPages = getChildrenPages(pattern);\r\n                return [\r\n                  { type: '_NOTELINK', name: pattern, title, paragraph: pattern },\r\n                  ...(childrenPages.length\r\n                    ? childrenPages\r\n                    : [{ type: '_CHILDNOTE', name: pattern, title: title + '/' + pattern }]),\r\n                  ...getFilteredPages(pages, pattern).filter((v) => v.type !== '_LINK'),\r\n                ].map((v) => {\r\n                  const name = v.type === '_NOTELINK' || v.type === '_CHILDNOTE' ? v.name : v.title;\r\n                  const description =\r\n                    v.type === '_NOTELINK'\r\n                      ? `(${titleFormat(v)})`\r\n                      : v.type === '_CHILDNOTE'\r\n                      ? `(${v.title})`\r\n                      : '';\r\n                  const url = encodeURI(\r\n                    v.type === '_NOTELINK' && v.paragraph\r\n                      ? `?title=${v.title}&paragraph=${v.paragraph}`\r\n                      : `?title=${v.title}`\r\n                  );\r\n                  return {\r\n                    text: name + description,\r\n                    value: `<a href=${url}>${name}</a>`,\r\n                  };\r\n                });\r\n              },\r\n            },\r\n            {\r\n              trigger: 'http',\r\n              getMatchedChars: async (pattern) => {\r\n                const query = 'http' + pattern;\r\n                const url = new URL(query);\r\n                if (url.protocol !== 'http:' && url.protocol !== 'https:') {\r\n                  return [];\r\n                }\r\n                const preview = await previewUrl({ query });\r\n                if (!preview.title) {\r\n                  return [];\r\n                }\r\n                return [\r\n                  {\r\n                    text: preview.title,\r\n                    value: `<a href=${preview.url}>${preview.title}</a>`,\r\n                  },\r\n                  // {\r\n                  //   text:preview.title + '...',\r\n                  //   value:`<a href=${preview.url}>${preview.title}</a><p>${preview.description}...</p>`,\r\n                  // }\r\n                ];\r\n              },\r\n            },\r\n          ]}\r\n        />\r\n\r\n        <View style={styles.buttonContainer}>\r\n          <TouchableOpacity\r\n            style={[commonStyles.button, styles.cancelButton]}\r\n            onPress={isPrevent() ? handleUnsaved : handleBack}\r\n          >\r\n            <Text style={commonStyles.buttonText}>{lang('cancel')}</Text>\r\n          </TouchableOpacity>\r\n          <TouchableOpacity style={[commonStyles.button, styles.saveButton]} onPress={handleSave}>\r\n            <Text style={commonStyles.buttonText}>{lang('save')}</Text>\r\n          </TouchableOpacity>\r\n        </View>\r\n      </View>\r\n    )\r\n  );\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n  buttonContainer: {\r\n    flexDirection: 'row',\r\n    justifyContent: 'space-between',\r\n  },\r\n  cancelButton: {\r\n    flex: 1,\r\n    marginRight: 8,\r\n    backgroundColor: '#95A5A6',\r\n  },\r\n  saveButton: {\r\n    flex: 1,\r\n    marginLeft: 8,\r\n  },\r\n});\r\n","import { useColorScheme, useLangContext, useResizeContext } from '@blacktokki/core';\r\nimport { EditorViewer } from '@blacktokki/editor';\r\nimport { RouteProp, useNavigation, useRoute } from '@react-navigation/native';\r\nimport { StackNavigationProp } from '@react-navigation/stack';\r\nimport React, { useEffect, useMemo, useState } from 'react';\r\nimport { View, Text, TouchableOpacity, Alert, StyleSheet, ScrollView } from 'react-native';\r\n\r\nimport HeaderSelectBar, { parseHtmlToParagraphs } from '../../components/HeaderSelectBar';\r\nimport { onLink, SearchBar, titleFormat } from '../../components/SearchBar';\r\nimport { useCreateOrUpdatePage, useMovePage, useNotePage } from '../../hooks/useNoteStorage';\r\nimport { createCommonStyles } from '../../styles';\r\nimport { NavigationParamList } from '../../types';\r\n\r\ntype MovePageScreenRouteProp = RouteProp<NavigationParamList, 'MovePage'>;\r\n\r\nexport const MovePageScreen: React.FC = () => {\r\n  const route = useRoute<MovePageScreenRouteProp>();\r\n  const { title, paragraph } = route.params;\r\n  const navigation = useNavigation<StackNavigationProp<NavigationParamList>>();\r\n  const theme = useColorScheme();\r\n  const _window = useResizeContext();\r\n  const { lang } = useLangContext();\r\n  const [newTitle, setNewTitle] = useState(title);\r\n  const { data: page, isLoading } = useNotePage(title);\r\n  const paragraphs = parseHtmlToParagraphs(page?.description || '');\r\n  const path = paragraphs.find((v) => v.title === paragraph)?.path || '';\r\n  const { data: newPage } = useNotePage(newTitle);\r\n  const newParagraph = parseHtmlToParagraphs(newPage?.description || '').filter(\r\n    (v) => title !== newTitle || path === v.path || !v.path.startsWith(path)\r\n  );\r\n  const [newPath, setNewPath] = useState('');\r\n  const [preview, setPreview] = useState<boolean>();\r\n  const commonStyles = createCommonStyles(theme);\r\n\r\n  const mutation = useCreateOrUpdatePage();\r\n  const moveMutation = useMovePage();\r\n  const { sourceDescription, targetDescription } = useMemo(() => {\r\n    const moveParagraph = paragraphs.filter((v) => v.path.startsWith(path));\r\n    const isSplit = newPage?.title === page?.title + '/' + moveParagraph[0]?.title;\r\n    const moveDescription = moveParagraph\r\n      .map((v, i) => (isSplit && i === 0 ? '' : v.header) + v.description)\r\n      .join('');\r\n    const sourceParagraph = paragraphs.filter((v) => !v.path.startsWith(path));\r\n    const sourceDescription = sourceParagraph.map((v) => v.header + v.description).join('');\r\n    const targetParagraph = page?.title === newPage?.title ? sourceParagraph : newParagraph;\r\n    const targetIndex = targetParagraph.findLastIndex((v) => v.path.startsWith(newPath));\r\n    const targetDescription =\r\n      newPage?.id === undefined\r\n        ? moveDescription\r\n        : [\r\n            ...targetParagraph.slice(0, targetIndex + 1).map((v) => v.header + v.description),\r\n            ...moveParagraph.map(\r\n              (v, i) =>\r\n                ((v.path === path && v.description === '') || (isSplit && i === 0)\r\n                  ? ''\r\n                  : v.header) + v.description\r\n            ),\r\n            ...targetParagraph.slice(targetIndex + 1).map((v) => v.header + v.description),\r\n          ].join('');\r\n    return { sourceDescription, targetDescription };\r\n  }, [paragraphs, newParagraph, path, newPath]);\r\n\r\n  const handleMove = () => {\r\n    if (newPage?.id === undefined) {\r\n      moveMutation.mutate(\r\n        {\r\n          oldTitle: title,\r\n          newTitle: newTitle.trim(),\r\n          description: path === '' ? undefined : targetDescription,\r\n        },\r\n        {\r\n          onSuccess: (data) => {\r\n            navigation.navigate({ name: 'NotePage', params: { title: data.newTitle } });\r\n          },\r\n          onError: (error: any) => {\r\n            Alert.alert(\r\n              lang('error'),\r\n              error.message || lang('An error occurred while moving note.')\r\n            );\r\n          },\r\n        }\r\n      );\r\n    } else {\r\n      if (page?.title === newPage.title && path === newPath) {\r\n        handleCancel();\r\n      }\r\n      mutation.mutate(\r\n        { title: newPage.title, description: targetDescription },\r\n        {\r\n          onSuccess: (data) => {\r\n            if (page?.title !== newPage.title) {\r\n              mutation.mutate({ title, description: sourceDescription });\r\n            }\r\n            navigation.navigate({ name: 'NotePage', params: { title: data.title } });\r\n          },\r\n          onError: (error: any) => {\r\n            Alert.alert(\r\n              lang('error'),\r\n              error.message || lang('An error occurred while moving note.')\r\n            );\r\n          },\r\n        }\r\n      );\r\n    }\r\n  };\r\n  const handleCancel = () => {\r\n    if (navigation.canGoBack()) {\r\n      navigation.goBack();\r\n    } else {\r\n      navigation.navigate('NotePage', { title });\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (!isLoading && !page) {\r\n      handleCancel();\r\n    }\r\n    page && setNewTitle(page.title + (paragraph ? `/${paragraph}` : ''));\r\n  }, [page, isLoading]);\r\n  useEffect(() => {\r\n    if (!isLoading) {\r\n      setNewPath(paragraph ? '' : path);\r\n    }\r\n  }, [paragraph, isLoading]);\r\n  const paragraphItem = paragraphs.find((v) => v.path === path);\r\n  const newParagraphItem = newParagraph.find((v) => v.path === newPath);\r\n  const moveDisabled = !newTitle.trim() || newParagraphItem === undefined;\r\n  return (\r\n    <ScrollView style={commonStyles.container}>\r\n      <View style={commonStyles.card}>\r\n        <View style={{ flexDirection: _window === 'landscape' ? 'row' : 'column', zIndex: 1 }}>\r\n          <View style={{ zIndex: 1 }}>\r\n            <Text style={commonStyles.text}>\r\n              {lang(paragraph ? 'Current note title and paragraph:' : 'Current note title:')}\r\n            </Text>\r\n            <Text style={[commonStyles.title, styles.columns]}>\r\n              {titleFormat({ title, paragraph })}\r\n            </Text>\r\n            <Text style={commonStyles.text}>{lang('New note title and paragraph:')}</Text>\r\n            <SearchBar onPress={setNewTitle} addKeyword={false} useRandom={false} />\r\n            <View style={styles.columns}>\r\n              <HeaderSelectBar\r\n                path={newPath}\r\n                onPress={(item) => setNewPath(item.path)}\r\n                root={newPage?.title || ''}\r\n                data={newParagraph}\r\n              />\r\n            </View>\r\n          </View>\r\n          <View style={{ flex: 1 }}>\r\n            <Text style={commonStyles.text}> {lang('Preview:')}</Text>\r\n            <TouchableOpacity\r\n              style={[\r\n                commonStyles.button,\r\n                styles.moveButton,\r\n                {\r\n                  flex: 0,\r\n                  flexDirection: 'row',\r\n                  alignItems: 'center',\r\n                  paddingTop: 24,\r\n                  paddingBottom: 16,\r\n                },\r\n              ]}\r\n              onPress={() => setPreview(!preview)}\r\n            >\r\n              <Text style={commonStyles.title}>\r\n                {titleFormat({ title, paragraph: paragraphItem?.title })}\r\n              </Text>\r\n              <Text style={[commonStyles.text, { marginBottom: 8, fontSize: 14 }]}>  </Text>\r\n              <Text style={commonStyles.title}>\r\n                {titleFormat({ title: newTitle, paragraph: newParagraphItem?.title })}\r\n              </Text>\r\n            </TouchableOpacity>\r\n            {preview !== undefined && (\r\n              <View style={{ display: preview ? 'flex' : 'none' }}>\r\n                <EditorViewer\r\n                  active\r\n                  value={targetDescription}\r\n                  theme={theme}\r\n                  onLink={(url) => onLink(url, navigation)}\r\n                  autoResize\r\n                />\r\n              </View>\r\n            )}\r\n          </View>\r\n        </View>\r\n        <View style={styles.buttonContainer}>\r\n          <TouchableOpacity\r\n            style={[commonStyles.button, styles.cancelButton]}\r\n            onPress={handleCancel}\r\n          >\r\n            <Text style={commonStyles.buttonText}>{lang('cancel')}</Text>\r\n          </TouchableOpacity>\r\n          <TouchableOpacity\r\n            style={[commonStyles.button, moveDisabled ? styles.cancelButton : styles.moveButton]}\r\n            onPress={handleMove}\r\n            disabled={moveDisabled}\r\n          >\r\n            <Text style={commonStyles.buttonText}>{lang('move')}</Text>\r\n          </TouchableOpacity>\r\n        </View>\r\n      </View>\r\n    </ScrollView>\r\n  );\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n  columns: {\r\n    marginTop: 8,\r\n    marginBottom: 16,\r\n  },\r\n  backButton: {\r\n    padding: 8,\r\n  },\r\n  buttonContainer: {\r\n    flexDirection: 'row',\r\n    justifyContent: 'space-between',\r\n  },\r\n  cancelButton: {\r\n    flex: 1,\r\n    marginRight: 8,\r\n    backgroundColor: '#95A5A6',\r\n  },\r\n  moveButton: {\r\n    flex: 1,\r\n    marginLeft: 8,\r\n  },\r\n});\r\n","import { useColorScheme } from '@blacktokki/core';\r\nimport { EditorViewer } from '@blacktokki/editor';\r\nimport { useNavigation } from '@react-navigation/core';\r\nimport { StackNavigationProp } from '@react-navigation/stack';\r\nimport React from 'react';\r\nimport { View, Text, TouchableOpacity, StyleSheet } from 'react-native';\r\nimport Icon from 'react-native-vector-icons/FontAwesome';\r\n\r\nimport HeaderSelectBar, { Paragraph } from '../../components/HeaderSelectBar';\r\nimport { onLink, titleFormat } from '../../components/SearchBar';\r\nimport { getSplitTitle } from '../../hooks/useProblem';\r\nimport { createCommonStyles } from '../../styles';\r\nimport { NavigationParamList } from '../../types';\r\n\r\nexport const NotePageHeader = ({\r\n  title,\r\n  onPress,\r\n  paragraph,\r\n  updated,\r\n}: {\r\n  title: string;\r\n  onPress: (title: string, hasChild: boolean) => void;\r\n  pressable?: boolean;\r\n  paragraph?: string;\r\n  updated?: string;\r\n}) => {\r\n  const theme = useColorScheme();\r\n  const commonStyles = createCommonStyles(theme);\r\n  const splitTitle = getSplitTitle(title);\r\n  const pressableTextColor = theme === 'dark' ? '#FFFFFF88' : '#00000088';\r\n  return (\r\n    <View\r\n      style={{\r\n        flexDirection: 'row',\r\n        maxWidth: '100%',\r\n        flexBasis: 0,\r\n        flexGrow: 1,\r\n        flexWrap: 'wrap',\r\n        alignItems: 'center',\r\n      }}\r\n    >\r\n      <TouchableOpacity\r\n        onPress={() => onPress(splitTitle[0], splitTitle.length === 2)}\r\n        style={{ maxWidth: '100%' }}\r\n      >\r\n        <Text\r\n          style={[\r\n            commonStyles.title,\r\n            styles.title,\r\n            paragraph || splitTitle.length === 2 ? { color: pressableTextColor } : {},\r\n          ]}\r\n          numberOfLines={1}\r\n        >\r\n          {splitTitle[0]}\r\n        </Text>\r\n      </TouchableOpacity>\r\n      {splitTitle.length === 2 && (\r\n        <View style={{ maxWidth: '100%', flexDirection: 'row' }}>\r\n          <Text style={[commonStyles.title, styles.title, { flex: 0 }]}>/</Text>\r\n          <TouchableOpacity onPress={() => onPress(title, false)}>\r\n            <Text\r\n              style={[\r\n                commonStyles.title,\r\n                styles.title,\r\n                paragraph ? { color: pressableTextColor } : {},\r\n              ]}\r\n              numberOfLines={1}\r\n            >\r\n              {splitTitle[1]}\r\n            </Text>\r\n          </TouchableOpacity>\r\n        </View>\r\n      )}\r\n      <View style={{ maxWidth: '100%', flexDirection: 'row' }}>\r\n        {!!paragraph && (\r\n          <Text style={[commonStyles.title, styles.title, { marginLeft: 5 }]} numberOfLines={1}>\r\n            {titleFormat({ title: '', paragraph })}\r\n          </Text>\r\n        )}\r\n        {updated && <Text style={[commonStyles.text, styles.updated]}>{'(' + updated + ')'}</Text>}\r\n      </View>\r\n    </View>\r\n  );\r\n};\r\n\r\nexport const NotePageSection = ({\r\n  active,\r\n  description,\r\n  children,\r\n}: {\r\n  active: boolean;\r\n  description?: string;\r\n  children?: React.ReactNode;\r\n}) => {\r\n  const navigation = useNavigation<StackNavigationProp<NavigationParamList>>();\r\n  const theme = useColorScheme();\r\n  const commonStyles = createCommonStyles(theme);\r\n  return (\r\n    <View style={active && description ? [commonStyles.card, styles.card] : styles.inactiveCard}>\r\n      <EditorViewer\r\n        active\r\n        value={description || ''}\r\n        theme={theme}\r\n        onLink={(url) => onLink(url, navigation)}\r\n        autoResize\r\n      />\r\n      {children}\r\n    </View>\r\n  );\r\n};\r\n\r\nexport const NoteBottomSection = ({\r\n  toc,\r\n  fullParagraph,\r\n  paragraph,\r\n  paragraphs,\r\n  root,\r\n  onPress,\r\n}: {\r\n  toc: boolean;\r\n  fullParagraph: boolean;\r\n  paragraph?: string;\r\n  paragraphs: Paragraph[];\r\n  root: string;\r\n  onPress: (paragraph: Paragraph) => void;\r\n}) => {\r\n  const idx = paragraphs.findIndex((v) => v.title === paragraph);\r\n  const theme = useColorScheme();\r\n  const commonStyles = createCommonStyles(theme);\r\n  const iconColor = getIconColor(theme);\r\n  const moveParagraphs = [\r\n    {\r\n      icon: 'arrow-left',\r\n      moveParagraph: paragraphs.findLast(\r\n        (v, i) => i < idx && (fullParagraph ? paragraphs[idx]?.level >= v.level : true)\r\n      ),\r\n      reverse: false,\r\n    },\r\n    {\r\n      icon: 'arrow-right',\r\n      moveParagraph: paragraphs.find(\r\n        (v, i) => i > idx && (fullParagraph ? paragraphs[idx]?.level >= v.level : true)\r\n      ),\r\n      reverse: true,\r\n    },\r\n  ];\r\n  return toc ? (\r\n    <HeaderSelectBar data={paragraphs} path={paragraph || ''} root={root} onPress={onPress} />\r\n  ) : (\r\n    !!paragraph && (\r\n      <View\r\n        style={{\r\n          flex: 1,\r\n          flexDirection: 'row',\r\n          justifyContent: 'space-between',\r\n          alignItems: 'flex-end',\r\n        }}\r\n      >\r\n        {moveParagraphs.map(\r\n          ({ moveParagraph, icon, reverse }) =>\r\n            moveParagraph !== undefined && (\r\n              <TouchableOpacity\r\n                key={icon}\r\n                onPress={() => onPress(moveParagraph)}\r\n                style={[\r\n                  { flex: 1, flexDirection: reverse ? 'row-reverse' : 'row', paddingVertical: 16 },\r\n                ]}\r\n              >\r\n                <Icon name={icon} size={16} color={iconColor} style={{ alignSelf: 'center' }} />\r\n                <Text\r\n                  ellipsizeMode=\"tail\"\r\n                  style={[commonStyles.text, { fontWeight: 'bold', marginHorizontal: 16 }]}\r\n                >\r\n                  {moveParagraph.level === 0 ? root : moveParagraph.title}\r\n                </Text>\r\n              </TouchableOpacity>\r\n            )\r\n        )}\r\n      </View>\r\n    )\r\n  );\r\n};\r\n\r\nexport const getIconColor = (theme: 'light' | 'dark') => (theme === 'dark' ? '#E4E4E4' : '#333333');\r\n\r\nconst styles = StyleSheet.create({\r\n  title: {\r\n    flex: 1,\r\n    fontSize: 20,\r\n  },\r\n  updated: { marginLeft: 5, fontStyle: 'italic' },\r\n  card: { padding: 0, marginBottom: 0 },\r\n  inactiveCard: { flex: 1, position: 'absolute' },\r\n});\r\n\r\nexport const pageStyles = StyleSheet.create({\r\n  container: { paddingRight: 12, scrollbarGutter: 'stable' },\r\n  contentContainer: { flexGrow: 1 },\r\n  actionButtons: {\r\n    flexDirection: 'row',\r\n    justifyContent: 'flex-end',\r\n    flexBasis: 156,\r\n  },\r\n  actionButton: {\r\n    padding: 8,\r\n    marginLeft: 8,\r\n  },\r\n});\r\n","import { useAuthContext } from '@blacktokki/account';\r\nimport { Colors, TextButton, useColorScheme, useLangContext, Text } from '@blacktokki/core';\r\nimport { toHtml, toMarkdown } from '@blacktokki/editor';\r\nimport { ConfigSection, LanguageConfigSection, SkinConfigSection } from '@blacktokki/navigation';\r\nimport { useNavigation } from '@react-navigation/core';\r\nimport { StackNavigationProp } from '@react-navigation/stack';\r\nimport React, { useState } from 'react';\r\nimport { View } from 'react-native';\r\n\r\nimport { SearchList } from '../../../components/SearchBar';\r\nimport { useKeywords, useResetKeyowrd } from '../../../hooks/useKeywordStorage';\r\nimport { useCreateOrUpdatePage, useNotePages } from '../../../hooks/useNoteStorage';\r\nimport { createCommonStyles } from '../../../styles';\r\nimport { Content, NavigationParamList } from '../../../types';\r\n\r\nconst exportMarkdowns = async (contents: Content[]) => {\r\n  const JSZip = (await import('jszip')).default;\r\n  const zip = new JSZip();\r\n  for (const content of contents.filter((v) => (v.description?.length || 0) > 0)) {\r\n    zip.file(content.title + '.md', toMarkdown(content.description as string));\r\n  }\r\n  const blob = await zip.generateAsync({ type: 'blob' });\r\n  const url = window.URL.createObjectURL(blob);\r\n  const a = document.createElement('a');\r\n  a.href = url;\r\n  a.download = 'notebook.zip';\r\n  document.body.appendChild(a);\r\n  a.click();\r\n  setTimeout(() => {\r\n    window.URL.revokeObjectURL(url);\r\n  }, 500);\r\n  a.remove();\r\n};\r\n\r\nconst importMarkdowns = async () => {\r\n  const files = await new Promise<File[]>((resolve, reject) => {\r\n    const input = document.createElement('input');\r\n    input.type = 'file';\r\n    input.accept = 'application/zip,.md,.markdown'; //     'text/plain', 'image/*'  \r\n    input.style.display = 'none';\r\n    input.multiple = true;\r\n\r\n    input.onchange = () => {\r\n      if (input.files && input.files.length > 0) {\r\n        resolve(Array.from(input.files)); // File Blob  \r\n      } else {\r\n        reject(new Error('  .'));\r\n      }\r\n    };\r\n\r\n    input.click(); //   \r\n  });\r\n  const contents: { title: string; description: string }[] = [];\r\n  const JSZip = (await import('jszip')).default;\r\n  for (const file of files) {\r\n    if (file.type === 'application/zip' || file.name.endsWith('.zip')) {\r\n      const zip = new JSZip();\r\n      const files = (await zip.loadAsync(file)).files;\r\n      for (const relativePath in files) {\r\n        const file = zip.files[relativePath];\r\n        if (!file.dir) {\r\n          contents.push({\r\n            title: relativePath.replace(/\\.[^/.]+$/, ''),\r\n            description: toHtml((await file.async('text')).toString()),\r\n          });\r\n        }\r\n      }\r\n    } else if (file.name.endsWith('.md') || file.name.endsWith('.markdown')) {\r\n      contents.push({\r\n        title: file.name.replace(/\\.[^/.]+$/, ''),\r\n        description: toHtml(await file.text()),\r\n      });\r\n    }\r\n  }\r\n  return contents;\r\n};\r\n\r\nconst OptionButton = (props: { title: string; onPress: () => void; active: boolean }) => {\r\n  const theme = useColorScheme();\r\n  const color = Colors[theme].text;\r\n  return (\r\n    <TextButton\r\n      title={props.title}\r\n      textStyle={{\r\n        fontSize: 16,\r\n        color,\r\n        textDecorationLine: props.active ? 'underline' : 'none',\r\n      }}\r\n      style={{ borderRadius: 20 }}\r\n      onPress={props.onPress}\r\n    />\r\n  );\r\n};\r\n\r\nexport default () => {\r\n  const { lang } = useLangContext();\r\n  const { auth, dispatch } = useAuthContext();\r\n  const theme = useColorScheme();\r\n  const navigation = useNavigation<StackNavigationProp<NavigationParamList>>();\r\n  const commonStyles = createCommonStyles(theme);\r\n  const { data: contents } = useNotePages();\r\n  const mutation = useCreateOrUpdatePage();\r\n  const [search, setSearch] = useState(false);\r\n  const { data: keywords = [] } = useKeywords();\r\n  const resetKeyword = useResetKeyowrd();\r\n  return (\r\n    <View>\r\n      <View style={commonStyles.card}>\r\n        <ConfigSection\r\n          title={lang('* Usage')}\r\n          onPress={() => navigation.push('NoteViewer', { key: 'Usage' })}\r\n        />\r\n      </View>\r\n      <View style={commonStyles.card}>\r\n        <LanguageConfigSection />\r\n      </View>\r\n      <View style={commonStyles.card}>\r\n        <SkinConfigSection />\r\n      </View>\r\n      <View style={commonStyles.card}>\r\n        <ConfigSection title={lang('* Search Settings')}>\r\n          <View style={{ flexDirection: 'row' }}>\r\n            <OptionButton\r\n              title={lang('Search History')}\r\n              onPress={() => setSearch(!search)}\r\n              active={search}\r\n            />\r\n            {search && !!keywords.length && (\r\n              <OptionButton\r\n                title={lang('Clear')}\r\n                onPress={() => resetKeyword.mutate()}\r\n                active={false}\r\n              />\r\n            )}\r\n          </View>\r\n          {search && (\r\n            <View style={[commonStyles.card, { padding: 0 }]}>\r\n              <SearchList filteredPages={keywords} />\r\n            </View>\r\n          )}\r\n        </ConfigSection>\r\n      </View>\r\n      <View style={commonStyles.card}>\r\n        <ConfigSection title={lang('* Archive')}>\r\n          <View style={{ flexDirection: 'row' }}>\r\n            <OptionButton\r\n              title={lang('Export')}\r\n              onPress={() => contents && exportMarkdowns(contents)}\r\n              active={false}\r\n            />\r\n            <OptionButton\r\n              title={lang('Import')}\r\n              onPress={() => importMarkdowns().then((v) => v.forEach((v2) => mutation.mutate(v2)))}\r\n              active={false}\r\n            />\r\n            {!auth.isLocal && (\r\n              <OptionButton\r\n                title={lang('Changelog')}\r\n                onPress={() => navigation.push('Archive', {})}\r\n                active={false}\r\n              />\r\n            )}\r\n          </View>\r\n        </ConfigSection>\r\n      </View>\r\n      <View style={commonStyles.card}>\r\n        <View style={{ flexDirection: 'row', alignItems: 'center' }}>\r\n          <ConfigSection title={lang('* Account Settings')} />\r\n          {!auth.isLocal && (\r\n            <Text numberOfLines={1} ellipsizeMode=\"tail\" style={{ marginLeft: 4 }}>\r\n              - {auth.user?.username}\r\n            </Text>\r\n          )}\r\n        </View>\r\n        <View style={{ flexDirection: 'row' }}>\r\n          {!!auth.user && (\r\n            <OptionButton\r\n              title={lang('My Account')}\r\n              onPress={() => auth.isLocal && dispatch({ type: 'LOGOUT_LOCAL' })}\r\n              active={!auth.isLocal}\r\n            />\r\n          )}\r\n          <OptionButton\r\n            title={lang('Local Account')}\r\n            onPress={() => !auth.isLocal && dispatch({ type: 'LOGIN_LOCAL' })}\r\n            active={!!auth.isLocal}\r\n          />\r\n          {auth.user ? (\r\n            <OptionButton\r\n              title={lang('Sign out')}\r\n              onPress={() => dispatch({ type: 'LOGOUT_REQUEST' })}\r\n              active={false}\r\n            />\r\n          ) : (\r\n            <OptionButton\r\n              title={lang('Sign in')}\r\n              onPress={() => dispatch({ type: 'LOGOUT_LOCAL' })}\r\n              active={false}\r\n            />\r\n          )}\r\n        </View>\r\n      </View>\r\n    </View>\r\n  );\r\n};\r\n","import { useAuthContext } from '@blacktokki/account';\r\nimport { Colors, ContractFooter, useColorScheme, useLangContext } from '@blacktokki/core';\r\nimport { HomeSection, TabViewOption } from '@blacktokki/navigation';\r\nimport { StackScreenProps } from '@react-navigation/stack';\r\nimport React, { useMemo } from 'react';\r\nimport { ScrollView, View } from 'react-native';\r\nimport { List } from 'react-native-paper';\r\nimport AntDesign from 'react-native-vector-icons/AntDesign';\r\n\r\nimport { SearchBar } from '../../../components/SearchBar';\r\nimport { createCommonStyles } from '../../../styles';\r\nimport { RecentPagesSection } from '../RecentPageSection';\r\nimport ConfigSection from './ConfigSection';\r\nimport ContentGroupSection, { ProblemButton, TimeLineButton } from './ContentGroupSection';\r\n\r\nconst NotesTabView = () => {\r\n  const theme = useColorScheme();\r\n  const { lang } = useLangContext();\r\n  return (\r\n    <ScrollView style={{ flex: 1, backgroundColor: Colors[theme].background }}>\r\n      <List.Subheader style={{}} selectable={false}>\r\n        {lang('Open Notes')}\r\n      </List.Subheader>\r\n      <ContentGroupSection type={'LAST'} />\r\n      <ContentGroupSection type={'PAGE'} />\r\n      <List.Subheader style={{}} selectable={false}>\r\n        {lang('Event Notes')}\r\n      </List.Subheader>\r\n      <TimeLineButton />\r\n      <ProblemButton />\r\n    </ScrollView>\r\n  );\r\n};\r\n\r\nconst RecentChangesTabView = () => {\r\n  return <RecentPagesSection />;\r\n};\r\n\r\nconst ConfigTabView = () => {\r\n  const theme = useColorScheme();\r\n  const commonStyles = createCommonStyles(theme);\r\n  return (\r\n    <ScrollView\r\n      style={{ flex: 1 }}\r\n      contentContainerStyle={[\r\n        commonStyles.container,\r\n        { backgroundColor: Colors[theme].background },\r\n      ]}\r\n    >\r\n      <ConfigSection />\r\n    </ScrollView>\r\n  );\r\n};\r\n\r\nexport default function HomeScreen({ navigation, route }: StackScreenProps<any, 'Home'>) {\r\n  const theme = useColorScheme();\r\n  const commonStyles = createCommonStyles(theme);\r\n  const { auth } = useAuthContext();\r\n  const title = auth.isLocal ? 'Blacktokki Notebook - Local' : 'Blacktokki Notebook';\r\n  const tabViews: TabViewOption[] = useMemo(\r\n    () => [\r\n      {\r\n        title: 'Discovery',\r\n        component: NotesTabView,\r\n        icon: <List.Icon icon={'compass'} />,\r\n        headerRight: () => <></>,\r\n      },\r\n      {\r\n        title: 'All Notes',\r\n        component: RecentChangesTabView,\r\n        icon: <List.Icon icon={'notebook'} />,\r\n        headerRight: () => <></>,\r\n      },\r\n      {\r\n        title: 'Config',\r\n        component: ConfigTabView,\r\n        icon: <List.Icon icon={'dots-horizontal'} />,\r\n        headerRight: () => <></>,\r\n      },\r\n    ],\r\n    []\r\n  );\r\n  return (\r\n    <HomeSection\r\n      tabViews={tabViews}\r\n      homeView={{ title, headerRight: () => <SearchBar /> }}\r\n      headerTitle={title}\r\n    >\r\n      <View style={[commonStyles.container, { width: '100%', justifyContent: 'space-between' }]}>\r\n        <ConfigSection />\r\n        <ContractFooter\r\n          buttons={[\r\n            {\r\n              icon: <AntDesign name=\"github\" size={24} color={Colors[theme].iconColor} />,\r\n              url: 'https://github.com/blacktokki/blacktokki-notebook',\r\n              isWeb: true,\r\n            },\r\n            {\r\n              icon: <AntDesign name=\"mail\" size={24} color={Colors[theme].iconColor} />,\r\n              url: 'mailto:ydh051541@naver.com',\r\n              isWeb: false,\r\n            },\r\n          ]}\r\n        />\r\n      </View>\r\n    </HomeSection>\r\n  );\r\n}\r\n","import dayjs from 'dayjs';\r\nimport { useEffect, useState } from 'react';\r\nimport { View } from 'react-native';\r\n\r\nimport { Paragraph } from '../../../components/HeaderSelectBar';\r\nimport TimerTag, {\r\n  matchDateRange,\r\n  paragraphsToDatePatterns,\r\n  TimerData,\r\n  today,\r\n} from '../../../components/TimerTag';\r\nimport { useCreateOrUpdatePage } from '../../../hooks/useNoteStorage';\r\n\r\nconst replaceDay = (data: TimerData, newDate: string) => {\r\n  return (\r\n    data.original.substring(0, data.index) +\r\n    newDate +\r\n    data.original.substring(data.index + data.text.length)\r\n  );\r\n};\r\n\r\nconst addDay = (data: TimerData, value: number, unit: 'day' | 'month', moved: boolean) => {\r\n  const s = dayjs(data.dateStart)\r\n    .add(moved ? value : 0, unit)\r\n    .format(data.pattern);\r\n  const e = dayjs(data.dateEnd).add(value, unit).format(data.pattern);\r\n  return replaceDay(data, data.format ? data.format(s, e) : e);\r\n};\r\n\r\nconst buttons = (data: TimerData) => {\r\n  const format = data.format;\r\n  return [\r\n    ...(data.pattern.includes('DD')\r\n      ? [\r\n          { title: '+1d', onPress: () => data.replace(addDay(data, 1, 'day', true)) },\r\n          { title: '+2d', onPress: () => data.replace(addDay(data, 2, 'day', true)) },\r\n          { title: '+7d', onPress: () => data.replace(addDay(data, 7, 'day', true)) },\r\n        ]\r\n      : []),\r\n    { title: '+1M', onPress: () => data.replace(addDay(data, 1, 'month', true)) },\r\n    ...(format\r\n      ? [\r\n          {\r\n            title: '+Period',\r\n            onPress: () => {\r\n              const s = dayjs(data.dateStart);\r\n              const e = dayjs(data.dateEnd);\r\n              const diff = e.diff(s, 'day');\r\n              data.replace(\r\n                replaceDay(\r\n                  data,\r\n                  format(\r\n                    s.add(diff + 1, 'day').format(data.pattern),\r\n                    e.add(diff + 1, 'day').format(data.pattern)\r\n                  )\r\n                )\r\n              );\r\n            },\r\n          },\r\n          { title: 'End date +1d', onPress: () => data.replace(addDay(data, 1, 'day', false)) },\r\n          { title: 'End date +2d', onPress: () => data.replace(addDay(data, 2, 'day', false)) },\r\n          { title: 'End date +7d', onPress: () => data.replace(addDay(data, 7, 'day', false)) },\r\n          { title: 'End date +1M', onPress: () => data.replace(addDay(data, 1, 'month', false)) },\r\n        ]\r\n      : []),\r\n    { title: 'Delete', onPress: () => data.replace(replaceDay(data, '')) },\r\n  ];\r\n};\r\n\r\nexport default (props: {\r\n  title: string;\r\n  path?: string;\r\n  fullParagraph: boolean;\r\n  paragraphs: Paragraph[];\r\n}) => {\r\n  const dateNum = new Date(today()).getTime();\r\n  const createOrUpdatePage = useCreateOrUpdatePage();\r\n  const data = paragraphsToDatePatterns(props.title, props.paragraphs)\r\n    .flatMap((v) => matchDateRange(v.dateMatches, dateNum))\r\n    .filter(\r\n      (v) =>\r\n        props.path === undefined ||\r\n        v.path === props.path ||\r\n        (props.fullParagraph && v.path.startsWith(props.path))\r\n    )\r\n    .flatMap((v) =>\r\n      v.matches.map((v2) => ({\r\n        ...v2,\r\n        original: v.original,\r\n        replace: (a: string) =>\r\n          createOrUpdatePage.mutate({\r\n            title: props.title,\r\n            description: props.paragraphs\r\n              .map(\r\n                (v3) =>\r\n                  (v3.path === v.path && v.isHeader\r\n                    ? v3.header.replace(v.original, a)\r\n                    : v3.header) +\r\n                  (v3.path === v.path && !v.isHeader\r\n                    ? v3.description.replace(v.original, a)\r\n                    : v3.description)\r\n              )\r\n              .join(''),\r\n          }),\r\n      }))\r\n    );\r\n\r\n  const [now, setNow] = useState(dayjs());\r\n  const [expand, setExpand] = useState<number>();\r\n  useEffect(() => {\r\n    const timeout = setTimeout(() => {\r\n      setNow(dayjs());\r\n    }, 30000);\r\n    return () => clearTimeout(timeout);\r\n  }, [now]);\r\n  return (\r\n    <View style={{ height: 0 }}>\r\n      <View style={{ flexDirection: 'row', overflow: 'hidden' }}>\r\n        {data.map((v, i) => (\r\n          <TimerTag\r\n            key={i}\r\n            data={v}\r\n            buttons={buttons}\r\n            now={now}\r\n            isExpand={i === expand}\r\n            toggleExpand={() => setExpand(expand === i ? undefined : i)}\r\n          />\r\n        ))}\r\n      </View>\r\n    </View>\r\n  );\r\n};\r\n","import { useColorScheme, useLangContext, useResizeContext } from '@blacktokki/core';\r\nimport { RouteProp, useNavigation, useRoute, useIsFocused } from '@react-navigation/native';\r\nimport { StackNavigationProp } from '@react-navigation/stack';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { View, Text, TouchableOpacity, ScrollView, ActivityIndicator } from 'react-native';\r\nimport Icon from 'react-native-vector-icons/FontAwesome';\r\n\r\nimport { parseHtmlToParagraphs } from '../../../components/HeaderSelectBar';\r\nimport { SearchBar } from '../../../components/SearchBar';\r\nimport { useArchivePage, useNotePage } from '../../../hooks/useNoteStorage';\r\nimport { paragraphDescription } from '../../../hooks/useProblem';\r\nimport { createCommonStyles } from '../../../styles';\r\nimport { NavigationParamList } from '../../../types';\r\nimport {\r\n  getIconColor,\r\n  NoteBottomSection,\r\n  NotePageHeader,\r\n  NotePageSection,\r\n  pageStyles,\r\n} from '../NoteItemSections';\r\nimport TimerTagSection from './TimerTagSection';\r\n\r\ntype NotePageScreenRouteProp = RouteProp<NavigationParamList, 'NotePage'>;\r\n\r\nexport const NotePageScreen: React.FC = () => {\r\n  const isFocused = useIsFocused();\r\n  const route = useRoute<NotePageScreenRouteProp>();\r\n  const { title, paragraph, archiveId } = route.params;\r\n  const navigation = useNavigation<StackNavigationProp<NavigationParamList>>();\r\n  const theme = useColorScheme();\r\n  const _window = useResizeContext();\r\n  const { lang } = useLangContext();\r\n  const commonStyles = createCommonStyles(theme);\r\n  const [toc, toggleToc] = useState(false);\r\n  const [fullParagraph, toggleFullParagraph] = useState(false);\r\n\r\n  const { data: page, isFetching } = useNotePage(title);\r\n  const { data: _archive } = useArchivePage(archiveId);\r\n  const archive = page?.description !== _archive?.description ? _archive : undefined;\r\n\r\n  const handleEdit = () => {\r\n    navigation.navigate('EditPage', { title });\r\n  };\r\n\r\n  const handleMovePage = () => {\r\n    navigation.navigate('MovePage', { title, paragraph });\r\n  };\r\n\r\n  const paragraphs = parseHtmlToParagraphs(page?.description || '');\r\n  const paragraphItem = paragraphs.find((v) => v.title === paragraph);\r\n  const [description, setDescription] = useState<string>();\r\n  useEffect(() => {\r\n    setDescription(\r\n      archive\r\n        ? archive.description\r\n        : paragraph\r\n        ? fullParagraph\r\n          ? paragraphDescription(paragraphs, paragraph, true).trim()\r\n          : paragraphItem?.description\r\n        : page?.description?.trim()\r\n    );\r\n  }, [page, archive, paragraph, fullParagraph]);\r\n  useEffect(() => {\r\n    toggleToc(false);\r\n  }, [route]);\r\n  const iconColor = getIconColor(theme);\r\n  return (\r\n    isFocused && (\r\n      <>\r\n        {_window === 'portrait' && <SearchBar />}\r\n        <ScrollView\r\n          //@ts-ignore\r\n          style={[commonStyles.container, pageStyles.container]}\r\n          contentContainerStyle={pageStyles.contentContainer}\r\n        >\r\n          <View style={[commonStyles.header, { zIndex: 1, alignItems: 'flex-start' }]}>\r\n            <NotePageHeader\r\n              title={title}\r\n              paragraph={paragraph}\r\n              updated={archive?.updated}\r\n              onPress={(title, hasChild) =>\r\n                (hasChild ? navigation.push : navigation.navigate)('NotePage', { title })\r\n              }\r\n            />\r\n            <View style={pageStyles.actionButtons}>\r\n              <TimerTagSection\r\n                title={page?.title || ''}\r\n                path={paragraphItem?.path}\r\n                fullParagraph={fullParagraph}\r\n                paragraphs={paragraphs}\r\n              />\r\n              {!paragraph && (\r\n                <>\r\n                  <TouchableOpacity\r\n                    onPress={() => navigation.navigate('Archive', { title })}\r\n                    style={pageStyles.actionButton}\r\n                  >\r\n                    <Icon name=\"history\" size={16} color={iconColor} />\r\n                  </TouchableOpacity>\r\n                </>\r\n              )}\r\n              {!!paragraph && (\r\n                <>\r\n                  <TouchableOpacity\r\n                    onPress={() => toggleFullParagraph(!fullParagraph)}\r\n                    style={pageStyles.actionButton}\r\n                  >\r\n                    <Icon\r\n                      name={fullParagraph ? 'compress' : 'expand'}\r\n                      size={16}\r\n                      color={iconColor}\r\n                    />\r\n                  </TouchableOpacity>\r\n                </>\r\n              )}\r\n              {!!(paragraph || description) && !archive && (\r\n                <>\r\n                  <TouchableOpacity onPress={() => toggleToc(!toc)} style={pageStyles.actionButton}>\r\n                    <Icon name=\"list\" size={16} color={iconColor} />\r\n                  </TouchableOpacity>\r\n                  <TouchableOpacity onPress={handleMovePage} style={pageStyles.actionButton}>\r\n                    <Icon name=\"exchange\" size={16} color={iconColor} />\r\n                  </TouchableOpacity>\r\n                </>\r\n              )}\r\n              {!!(paragraph || description) && !archive && !paragraph && (\r\n                <>\r\n                  <TouchableOpacity onPress={handleEdit} style={pageStyles.actionButton}>\r\n                    <Icon name=\"pencil\" size={16} color={iconColor} />\r\n                  </TouchableOpacity>\r\n                </>\r\n              )}\r\n            </View>\r\n          </View>\r\n          <View style={commonStyles.flex}>\r\n            <NotePageSection active={!toc} description={description}>\r\n              {!!paragraph && !fullParagraph && paragraphItem?.description?.trim().length === 0 && (\r\n                <View style={{ position: 'absolute', width: '100%' }}>\r\n                  <View style={[commonStyles.card, commonStyles.centerContent]}>\r\n                    <Text style={commonStyles.text}>\r\n                      {lang('There is no direct content in this paragraph.')}\r\n                    </Text>\r\n                    <TouchableOpacity\r\n                      onPress={() => toggleFullParagraph(true)}\r\n                      style={commonStyles.button}\r\n                    >\r\n                      <Text style={commonStyles.buttonText}>{lang('View subparagraph')}</Text>\r\n                    </TouchableOpacity>\r\n                  </View>\r\n                </View>\r\n              )}\r\n            </NotePageSection>\r\n            {isFetching || description === undefined ? (\r\n              <View style={[commonStyles.card, commonStyles.centerContent]}>\r\n                <ActivityIndicator size=\"large\" color=\"#3498DB\" />\r\n              </View>\r\n            ) : page?.description ? (\r\n              <NoteBottomSection\r\n                toc={toc}\r\n                fullParagraph={fullParagraph}\r\n                root={title}\r\n                paragraph={paragraph}\r\n                paragraphs={paragraphs}\r\n                onPress={(moveParagraph) =>\r\n                  navigation.navigate(\r\n                    'NotePage',\r\n                    moveParagraph.level === 0\r\n                      ? { title }\r\n                      : { title, paragraph: moveParagraph.title }\r\n                  )\r\n                }\r\n              />\r\n            ) : (\r\n              <View style={[commonStyles.card, commonStyles.centerContent]}>\r\n                <Text style={commonStyles.text}>\r\n                  {lang('This note has no content yet. Press the Edit button to add content.')}\r\n                </Text>\r\n                <TouchableOpacity onPress={handleEdit} style={commonStyles.button}>\r\n                  <Text style={commonStyles.buttonText}>{lang('Edit')}</Text>\r\n                </TouchableOpacity>\r\n              </View>\r\n            )}\r\n          </View>\r\n        </ScrollView>\r\n      </>\r\n    )\r\n  );\r\n};\r\n","import { useColorScheme, useModalsContext, Text, useLangContext } from '@blacktokki/core';\r\nimport dayjs from 'dayjs';\r\nimport React from 'react';\r\nimport { View, TouchableOpacity, StyleSheet } from 'react-native';\r\nimport Icon from 'react-native-vector-icons/MaterialIcons';\r\n\r\nimport { today } from '../../../components/TimerTag';\r\nimport DatePickerModal, { MarkedDateRange } from '../../../modals/DatePikcerModal';\r\nimport { createCommonStyles } from '../../../styles';\r\n\r\ntype DateHeaderSectionProps = {\r\n  date: string;\r\n  setDate: (date: string) => void;\r\n  markedDateRange: MarkedDateRange[];\r\n  monthly?: boolean;\r\n};\r\n\r\nexport default function DateHeaderSection({\r\n  date,\r\n  setDate,\r\n  monthly,\r\n  markedDateRange,\r\n}: DateHeaderSectionProps) {\r\n  const theme = useColorScheme();\r\n  const commonStyles = createCommonStyles(theme);\r\n  const { setModal } = useModalsContext();\r\n  const { lang } = useLangContext();\r\n  const moveDate = (value: number) =>\r\n    setDate(\r\n      dayjs(date)\r\n        .add(value, monthly ? 'month' : 'day')\r\n        .format('YYYY-MM-DD')\r\n    );\r\n\r\n  const themedStyles = StyleSheet.create({\r\n    container: {\r\n      backgroundColor: commonStyles.container.backgroundColor,\r\n      shadowColor: commonStyles.text.color,\r\n      borderColor: commonStyles.card.borderColor,\r\n    },\r\n    dateDisplay: {\r\n      color: commonStyles.text.color,\r\n    },\r\n    todayButton: {\r\n      backgroundColor: commonStyles.searchButton.backgroundColor,\r\n    },\r\n    navButton: {\r\n      backgroundColor: theme === 'dark' ? '#333333' : '#efefef',\r\n    },\r\n  });\r\n  return (\r\n    <View style={[headerStyles.container, themedStyles.container]}>\r\n      <View style={commonStyles.flex} />\r\n      {/* Date Display */}\r\n      <View style={headerStyles.dateContainer}>\r\n        <TouchableOpacity\r\n          onPress={() =>\r\n            setModal(DatePickerModal, {\r\n              datetime: date,\r\n              markedDateStrings: markedDateRange,\r\n              callback: (datetime?: string) => setDate(datetime || date),\r\n            })\r\n          }\r\n        >\r\n          <Text style={[headerStyles.dateDisplay, themedStyles.dateDisplay]}>{date}</Text>\r\n        </TouchableOpacity>\r\n      </View>\r\n      {/* Navigation Bar */}\r\n      <View style={headerStyles.navContainer}>\r\n        {/* Previous Day Button */}\r\n        <TouchableOpacity\r\n          onPress={() => moveDate(-1)}\r\n          style={[headerStyles.navButton, themedStyles.navButton]}\r\n        >\r\n          <Icon name=\"chevron-left\" size={16} color={commonStyles.text.color} />\r\n        </TouchableOpacity>\r\n\r\n        {/* Today Button */}\r\n        <TouchableOpacity\r\n          onPress={() => setDate(today())}\r\n          style={[headerStyles.todayButton, themedStyles.todayButton]}\r\n          accessibilityLabel=\"Go to today\"\r\n        >\r\n          <Text style={headerStyles.todayButtonText}>{lang('Today')}</Text>\r\n        </TouchableOpacity>\r\n\r\n        {/* Next Day Button */}\r\n        <TouchableOpacity\r\n          onPress={() => moveDate(1)}\r\n          style={[headerStyles.navButton, themedStyles.navButton]}\r\n        >\r\n          <Icon name=\"chevron-right\" size={16} color={commonStyles.text.color} />\r\n        </TouchableOpacity>\r\n      </View>\r\n    </View>\r\n  );\r\n}\r\n\r\nconst BUTTON_SIZE = 30;\r\n\r\n// Base styles that don't change based on theme\r\nconst headerStyles = StyleSheet.create({\r\n  container: {\r\n    width: '100%',\r\n    alignSelf: 'center',\r\n    flexDirection: 'row',\r\n    justifyContent: 'flex-end',\r\n    padding: 16,\r\n    borderRadius: 8,\r\n    shadowOffset: { width: 0, height: 2 },\r\n    shadowOpacity: 0.1,\r\n    shadowRadius: 4,\r\n    elevation: 2,\r\n    borderWidth: 1,\r\n  },\r\n  dateContainer: {\r\n    flex: 1,\r\n    minWidth: 130,\r\n    height: BUTTON_SIZE,\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n  },\r\n  dateDisplay: {\r\n    fontSize: 20,\r\n    fontWeight: 'bold',\r\n  },\r\n  navContainer: {\r\n    flex: 1,\r\n    minWidth: 150,\r\n    flexDirection: 'row',\r\n    justifyContent: 'flex-end',\r\n  },\r\n  navButton: {\r\n    width: BUTTON_SIZE,\r\n    height: BUTTON_SIZE,\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n    marginHorizontal: 8,\r\n    borderRadius: 8,\r\n    padding: 8,\r\n  },\r\n  todayButton: {\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n    alignSelf: 'center',\r\n    paddingHorizontal: 12,\r\n    paddingVertical: 6,\r\n    borderRadius: 6,\r\n  },\r\n  todayButtonText: {\r\n    fontSize: 14,\r\n    color: '#ffffff',\r\n    fontWeight: 'bold',\r\n  },\r\n});\r\n","import { useColorScheme, useResizeContext } from '@blacktokki/core';\r\nimport { useNavigation } from '@react-navigation/native';\r\nimport { StackNavigationProp } from '@react-navigation/stack';\r\nimport React, { useState } from 'react';\r\nimport { View } from 'react-native';\r\n\r\nimport { SearchBar } from '../../../components/SearchBar';\r\nimport { today } from '../../../components/TimerTag';\r\nimport useTimeLine from '../../../hooks/useTimeLine';\r\nimport { createCommonStyles } from '../../../styles';\r\nimport { NavigationParamList } from '../../../types';\r\nimport { NoteListSection } from '../NoteListSection';\r\nimport DateHeaderSection from './DateHeaderSection';\r\n\r\nexport const TimeLineScreen: React.FC = () => {\r\n  const navigation = useNavigation<StackNavigationProp<NavigationParamList>>();\r\n  const theme = useColorScheme();\r\n  const commonStyles = createCommonStyles(theme);\r\n  const _window = useResizeContext();\r\n  const [date, setDate] = useState(today());\r\n  const { data, preData, isLoading } = useTimeLine(date);\r\n  const markedDateRange = preData.flatMap((v) => v.dateMatches.flatMap((v2) => v2.matches));\r\n  return (\r\n    <>\r\n      {_window === 'portrait' && <SearchBar />}\r\n      <View style={[{ ...commonStyles.container, flex: undefined, paddingBottom: 0 }]}>\r\n        <DateHeaderSection date={date} setDate={setDate} markedDateRange={markedDateRange} />\r\n      </View>\r\n      <NoteListSection\r\n        contents={data}\r\n        onPress={(title, paragraph) => navigation.push('NotePage', { title, paragraph })}\r\n        isLoading={isLoading}\r\n        emptyMessage=\"There are no notes.\"\r\n      />\r\n    </>\r\n  );\r\n};\r\n","// import HomeScreen from \"./main/home/HomeScreen\";\r\n\r\nimport { Auth } from '@blacktokki/account';\r\n\r\nimport { ArchiveScreen } from './main/ArchiveScreen';\r\nimport { EditPageScreen } from './main/EditPageScreen';\r\nimport { MovePageScreen } from './main/MovePageScreen';\r\nimport { NoteViewerScreen } from './main/NoteViewerScreen';\r\nimport { ProblemsScreen } from './main/ProblemScreen';\r\nimport { RecentPagesScreen } from './main/RecentPageScreen';\r\nimport HomeScreen from './main/home/HomeScreen';\r\nimport { NotePageScreen } from './main/notepage/NotePageScreen';\r\nimport { TimeLineScreen } from './main/timeline/TimeLineScreen';\r\n\r\nconst title = (auth: Auth) =>\r\n  !auth.isLocal ? 'Blacktokki Notebook' : 'Blacktokki Notebook - Local';\r\nexport const main = {\r\n  Home: {\r\n    title,\r\n    component: HomeScreen,\r\n    path: 'home',\r\n  },\r\n  NotePage: {\r\n    title,\r\n    component: NotePageScreen,\r\n    path: 'page',\r\n  },\r\n  EditPage: {\r\n    title,\r\n    component: EditPageScreen,\r\n    path: 'edit',\r\n  },\r\n  MovePage: {\r\n    title,\r\n    component: MovePageScreen,\r\n    path: 'move',\r\n  },\r\n  RecentPages: {\r\n    title,\r\n    component: RecentPagesScreen,\r\n    path: 'recent',\r\n  },\r\n  Problem: {\r\n    title,\r\n    component: ProblemsScreen,\r\n    path: 'problem',\r\n  },\r\n  Archive: {\r\n    title,\r\n    component: ArchiveScreen,\r\n    path: 'archive',\r\n  },\r\n  TimeLine: {\r\n    title,\r\n    component: TimeLineScreen,\r\n    path: 'timeline',\r\n  },\r\n  NoteViewer: {\r\n    title,\r\n    component: NoteViewerScreen,\r\n    path: 'viewer',\r\n  },\r\n};\r\n","import { useResizeContext } from '@blacktokki/core';\r\nimport React from 'react';\r\n\r\nimport { SearchBar } from '../../components/SearchBar';\r\nimport { RecentPagesSection } from './RecentPageSection';\r\n\r\nexport const RecentPagesScreen: React.FC = () => {\r\n  const window = useResizeContext();\r\n  return (\r\n    <>\r\n      {window === 'portrait' && <SearchBar />}\r\n      <RecentPagesSection />\r\n    </>\r\n  );\r\n};\r\n","import { useResizeContext } from '@blacktokki/core';\r\nimport { useNavigation } from '@react-navigation/native';\r\nimport { StackNavigationProp } from '@react-navigation/stack';\r\nimport React from 'react';\r\n\r\nimport { SearchBar } from '../../components/SearchBar';\r\nimport useProblem from '../../hooks/useProblem';\r\nimport { NavigationParamList } from '../../types';\r\nimport { NoteListSection } from './NoteListSection';\r\n\r\nexport const ProblemsScreen: React.FC = () => {\r\n  const _window = useResizeContext();\r\n  const navigation = useNavigation<StackNavigationProp<NavigationParamList>>();\r\n  const { data, isLoading } = useProblem(1);\r\n\r\n  return (\r\n    <>\r\n      {_window === 'portrait' && <SearchBar />}\r\n      <NoteListSection\r\n        contents={data}\r\n        onPress={(title) => navigation.push('EditPage', { title })}\r\n        isLoading={isLoading}\r\n        emptyMessage=\"There are no notes needed to be written.\"\r\n      />\r\n    </>\r\n  );\r\n};\r\n","import { useColorScheme, useResizeContext } from '@blacktokki/core';\r\nimport { RouteProp, useNavigation, useRoute, useIsFocused } from '@react-navigation/native';\r\nimport { StackNavigationProp } from '@react-navigation/stack';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { View, ScrollView, TouchableOpacity } from 'react-native';\r\nimport Icon from 'react-native-vector-icons/FontAwesome';\r\n\r\nimport { parseHtmlToParagraphs } from '../../components/HeaderSelectBar';\r\nimport { SearchBar } from '../../components/SearchBar';\r\nimport { useNoteViewers } from '../../hooks/useNoteStorage';\r\nimport { paragraphDescription } from '../../hooks/useProblem';\r\nimport { createCommonStyles } from '../../styles';\r\nimport { NavigationParamList } from '../../types';\r\nimport {\r\n  getIconColor,\r\n  NoteBottomSection,\r\n  NotePageHeader,\r\n  NotePageSection,\r\n  pageStyles,\r\n} from './NoteItemSections';\r\n\r\ntype NoteViewerScreenRouteProp = RouteProp<NavigationParamList, 'NoteViewer'>;\r\n\r\nexport const NoteViewerScreen: React.FC = () => {\r\n  const isFocused = useIsFocused();\r\n  const route = useRoute<NoteViewerScreenRouteProp>();\r\n  const { key, paragraph } = route.params;\r\n  const navigation = useNavigation<StackNavigationProp<NavigationParamList>>();\r\n  const theme = useColorScheme();\r\n  const _window = useResizeContext();\r\n  const commonStyles = createCommonStyles(theme);\r\n  const [toc, toggleToc] = useState(false);\r\n  const [fullParagraph, toggleFullParagraph] = useState(false);\r\n  const { data: viewers } = useNoteViewers();\r\n\r\n  const page = viewers?.find((v) => v.key === key);\r\n\r\n  const paragraphs = parseHtmlToParagraphs(page?.description || '');\r\n  const [description, setDescription] = useState<string>();\r\n  useEffect(() => {\r\n    setDescription(\r\n      paragraph\r\n        ? fullParagraph\r\n          ? paragraphDescription(paragraphs, paragraph, true)\r\n          : paragraphs.find((v) => v.title === paragraph)?.description\r\n        : page?.description?.trim()\r\n    );\r\n  }, [page, paragraph, fullParagraph]);\r\n  useEffect(() => {\r\n    toggleToc(false);\r\n  }, [route]);\r\n  const iconColor = getIconColor(theme);\r\n  return (\r\n    isFocused && (\r\n      <>\r\n        {_window === 'portrait' && <SearchBar />}\r\n        <ScrollView\r\n          //@ts-ignore\r\n          style={[commonStyles.container, pageStyles.container]}\r\n          contentContainerStyle={pageStyles.contentContainer}\r\n        >\r\n          <View style={[commonStyles.header, { zIndex: 1, alignItems: 'flex-start' }]}>\r\n            <NotePageHeader\r\n              title={key}\r\n              paragraph={paragraph}\r\n              pressable={false}\r\n              onPress={(key, hasChild) =>\r\n                (hasChild ? navigation.push : navigation.navigate)('NoteViewer', { key })\r\n              }\r\n            />\r\n            <View style={pageStyles.actionButtons}>\r\n              {!!paragraph && (\r\n                <>\r\n                  <TouchableOpacity\r\n                    onPress={() => toggleFullParagraph(!fullParagraph)}\r\n                    style={pageStyles.actionButton}\r\n                  >\r\n                    <Icon\r\n                      name={fullParagraph ? 'compress' : 'expand'}\r\n                      size={16}\r\n                      color={iconColor}\r\n                    />\r\n                  </TouchableOpacity>\r\n                </>\r\n              )}\r\n              {!!(paragraph || description) && (\r\n                <>\r\n                  <TouchableOpacity onPress={() => toggleToc(!toc)} style={pageStyles.actionButton}>\r\n                    <Icon name=\"list\" size={16} color={iconColor} />\r\n                  </TouchableOpacity>\r\n                </>\r\n              )}\r\n            </View>\r\n          </View>\r\n          <View style={commonStyles.flex}>\r\n            <NotePageSection active={!toc} description={description} />\r\n            {\r\n              <NoteBottomSection\r\n                toc={toc}\r\n                fullParagraph={fullParagraph}\r\n                root={key}\r\n                paragraph={paragraph}\r\n                paragraphs={paragraphs}\r\n                onPress={(paragraph) =>\r\n                  navigation.navigate(\r\n                    'NoteViewer',\r\n                    paragraph.level === 0 ? { key } : { key, paragraph: paragraph.title }\r\n                  )\r\n                }\r\n              />\r\n            }\r\n          </View>\r\n        </ScrollView>\r\n      </>\r\n    )\r\n  );\r\n};\r\n","import { useLangContext, View } from '@blacktokki/core';\r\nimport { push } from '@blacktokki/navigation';\r\nimport React from 'react';\r\nimport { Platform, ScrollView } from 'react-native';\r\nimport { List } from 'react-native-paper';\r\n\r\nimport ContentGroupSection, {\r\n  ProblemButton,\r\n  TimeLineButton,\r\n} from '../screens/main/home/ContentGroupSection';\r\n\r\nexport default () => {\r\n  const { lang } = useLangContext();\r\n  return (\r\n    <View style={{ flex: 1 }}>\r\n      <List.Item\r\n        left={(_props) => <List.Icon {..._props} icon={'home'} />}\r\n        title={lang('Home')}\r\n        onPress={() => push('Home')}\r\n      />\r\n      <TimeLineButton />\r\n      <ProblemButton />\r\n      <ScrollView style={Platform.OS === 'web' ? ({ scrollbarWidth: 'thin' } as any) : {}}>\r\n        <List.Subheader style={{}} selectable={false}>\r\n          {lang('Open Notes')}\r\n        </List.Subheader>\r\n        <ContentGroupSection type={'LAST'} />\r\n        <ContentGroupSection type={'PAGE'} />\r\n        <List.Subheader style={{ flex: 1 }} selectable={false}>\r\n          {lang('Recent Changes')}\r\n        </List.Subheader>\r\n        {/*   */}\r\n        <ContentGroupSection type={'NOTE'} noteCount={10} />\r\n      </ScrollView>\r\n    </View>\r\n  );\r\n};\r\n","import { Colors, useColorScheme, useResizeContext } from '@blacktokki/core';\r\nimport { login, Navigation, NavigationConfig } from '@blacktokki/navigation';\r\nimport React, { Suspense } from 'react';\r\nimport { List, MD2DarkTheme, MD2LightTheme, PaperProvider } from 'react-native-paper';\r\n\r\nimport { SearchBar } from '../components/SearchBar';\r\nimport modals from '../modals';\r\nimport { main } from '../screens';\r\nimport Drawer from './Drawer';\r\n\r\nconst HeaderRight = () => {\r\n  const windowType = useResizeContext();\r\n  return windowType === 'landscape' ? <SearchBar /> : undefined;\r\n};\r\n\r\nconst getConfig = async () => {\r\n  const Linking = await import('expo-linking');\r\n  return {\r\n    main,\r\n    login,\r\n    prefixes: [Linking.makeUrl('/')],\r\n    rootPath: 'blacktokki-notebook',\r\n    documentTitle: {\r\n      formatter: () => {\r\n        return 'blacktokki-notebook';\r\n      },\r\n    },\r\n    rootScreen: {\r\n      main: 'Home',\r\n      login: 'LoginScreen',\r\n    },\r\n    headerLeftIcon: <List.Icon icon=\"backburger\" style={{ left: -18, top: -14 }} />,\r\n    headerRight: <HeaderRight />,\r\n    modals,\r\n    drawer: <Drawer />,\r\n  } as NavigationConfig;\r\n};\r\n\r\nexport default () => {\r\n  const scheme = useColorScheme();\r\n  const preTheme = scheme === 'dark' ? MD2DarkTheme : MD2LightTheme;\r\n  const theme: typeof preTheme = {\r\n    ...preTheme,\r\n    colors: { ...preTheme.colors, primary: Colors[scheme].text },\r\n  };\r\n  const NavigationLazy = React.lazy(() =>\r\n    getConfig().then((config) => ({ default: () => <Navigation config={config} /> }))\r\n  );\r\n  return (\r\n    <PaperProvider theme={theme}>\r\n      <Suspense fallback={<></>}>\r\n        <NavigationLazy />\r\n      </Suspense>\r\n    </PaperProvider>\r\n  );\r\n};\r\n"],"names":["KEYWORDS_KEY","getKeywords","_ref","_asyncToGenerator","subkey","jsonValue","AsyncStorage","getItem","JSON","parse","e","console","error","_x","apply","arguments","saveKeywords","_ref2","keywords","stringify","setItem","_x2","_x3","useKeywords","_auth$user","auth","useAuthContext","isLocal","user","id","useQuery","queryKey","queryFn","_queryFn","axios","axiosCreate","getContentOne","get","data","getContentList","parentId","types","page","parentIdParam","undefined","typeParam","join","pageParam","value","_x4","postContent","_ref3","post","_x5","patchContent","_ref5","_ref4","updated","patch","ids","_x6","previewUrl","_ref6","delete","_ref7","preview","query","_x8","openDB","_openDB","Promise","resolve","reject","request","indexedDB","open","onupgradeneeded","event","db","target","result","objectStoreNames","contains","createObjectStore","keyPath","onsuccess","onerror","lastPage","RECENT_PAGES_KEY","getContents","isOnline","type","transaction","objectStore","getAll","saveNoteContents","contents","content","find","v","savedId","then","snapshot","_objectSpread","tx","store","contentItem","put","oncomplete","getRecentPages","saveRecentPages","titles","useNotePages","useNotePage","title","queryClient","useQueryClient","_useNotePages","_useNotePages$data","isFetching","_queryFn3","c","invalidateQueries","description","enabled","useLastPage","_useNotePages3","_useNotePages3$data","_queryFn6","useCreateOrUpdatePage","_useNotePages4$data","useMutation","mutationFn","_mutationFn","updatedContents","skip","Date","toISOString","map","i","newPage","input","userId","order","option","concat","_toConsumableArray","_x7","onSuccess","_onSuccess","useDeleteRecentPage","_mutationFn4","updatedRecentPages","filter","_title","_x11","createCommonStyles","theme","StyleSheet","create","container","flex","backgroundColor","paddingHorizontal","paddingVertical","card","borderRadius","padding","marginBottom","borderWidth","borderColor","shadowColor","shadowOffset","width","height","shadowOpacity","shadowRadius","elevation","fontSize","fontWeight","color","text","lineHeight","button","alignItems","marginVertical","buttonText","searchButton","justifyContent","marginHorizontal","resultSeparator","separator","smallText","header","flexDirection","row","centerContent","parseHtmlToParagraphs","html","doc","DOMParser","parseFromString","path","level","headings","headerStack","current","cursor","body","firstChild","flushCurrent","push","nodeType","Node","ELEMENT_NODE","el","includes","tagName","_el$textContent","parseInt","substring","textContent","trim","length","pop","h","outerHTML","TEXT_NODE","nextSibling","HeaderSelectBar","props","useColorScheme","commonStyles","_jsx","View","style","styles","resultsContainer","darkResults","lightResults","children","FlatList","keyExtractor","item","renderItem","_jsxs","TouchableOpacity","resultItem","onPress","Icon","name","size","Text","marginTop","resultText","left","root","ItemSeparatorComponent","backButton","buttonContainer","_searchText","urlToNoteLink","url","newLocation","URL","location","origin","params","URLSearchParams","search","paragraph","onLink","navigation","noteLink","window","getLinks","pages","sameTitle","flatMap","links","querySelectorAll","Array","from","a","_a$textContent","href","extractHtmlLinksWithQuery","v2","getFilteredPages","searchText","lowerCaseSearch","toLowerCase","normalize","_name","startsWith","RandomButton","useNavigation","randomPages","Math","floor","random","paragraphs","titleFormat","useOnPressKeyword","addKeyword","afterPress","_useAddKeyowrd","_auth$user2","keyword","newKeywords","Set","useAddKeyowrd","addKeywordMutate","mutate","useCallback","SearchList","filteredPages","onPressKeyword","focus","onPressDefault","pagePressHandlers","PanResponder","onPanResponderStart","panHandlers","index","Colors","flexShrink","numberOfLines","ellipsizeMode","paddingLeft","SearchBar","_ref4$addKeyword","_ref4$useRandom","useRandom","_useState","useState","_useState2","_slicedToArray","setSearchText","_useState3","_useState4","showResults","setShowResults","_useState5","_useState6","focusIndex","setFocusIndex","lang","useLangContext","inputRef","useRef","_useKeywords$data","_useNotePages2$data","slice","handleKeywordPress","handleSearch","newNoteHandlers","useMemo","useEffect","useFocusEffect","onKeyDownCapture","key","preventDefault","searchContainer","TextInput","ref","searchInput","onChangeText","placeholder","placeholderTextColor","onSubmitEditing","onFocus","onBlur","disabled","position","maxWidth","zIndex","top","right","maxHeight","AlertModal","callbacks","setModal","useModalsContext","back","messages","UNSAVED","message","buttons","margin","CommonButton","marginRight","getMarkedDays","dateString","markedDateStrings","date","dayjs","startDate","clone","startOf","add","endDate","endOf","markedDate","dateStart","dateEnd","markedDays","isAfter","isBefore","format","reduce","p","marked","dotColor","selected","DatePickerModal","datetime","callback","_dayjs","m","restMinute","defaultDayjs","_useLangContext","locale","markedDates","setMarkedDates","onSave","minHeight","textAlign","lightColor","darkColor","Suspense","fallback","_Fragment","Calendar","setDate","disableAllTouchEventsForDisabledDays","onMonthChange","NoteListSection","isLoading","emptyMessage","onScrollEnd","subtitles","subtitle","onScroll","nativeEvent","contentSize","contentOffset","y","onLayout","layout","selectable","extractDates","currentYear","getFullYear","patterns","regex","match","pattern","s","split","year","month","lastDay","getDate","String","padStart","mm","dd","mm2","dd2","results","usedRanges","RegExp","source","_loop","start","end","lastIndex","some","exec","cleanHtml","cleanAnchors","mergeTds","forEach","code","tr","tdList","mergedText","td","_td$textContent","newTd","document","createElement","innerHTML","appendChild","paragraphsToDatePatterns","dateMatches","toRaw","isHeader","original","matches","matchDateRange","dateNum","dateMatch","getTime","today","ratio","diff","now","toggleExpand","overflow","isExpand","getReadabilityLevel","calculateFleschKincaid","sentenceCount","wordList","wordCount","sum","word","syllables","test","max","countSyllables","score","koRatio","getKoreanRatio","enGrade","enLevel","koLevel","sentences","avgWordsPerSentence","classifyKoreanReadability","findLists","tag","list","items","li","_cloned$textContent","cloned","cloneNode","nested","remove","getSplitTitle","splitTitle","paragraphDescription","rootTitle","_paragraphs$find","replaceAll","problemCache","getDataLinear","existData","record","lists","findLast","duplicates","lastIndexOf","readability","toFixed","parentTitle","raw","matrix","getData","records","existTarget","link","_target","sourceName","getDataMatrix","findIndex","delay","setData","timeoutRef","clearTimeout","setTimeout","notes","preData","TimeLineButton","useTimeLine","List","_props","icon","alignSelf","Badge","navigate","ProblemButton","useProblem","toRecentContents","sort","b","_useNotePages2","_queryFn5","useRecentPages","tabRef","addRecentPage","_mutationFn3","_ref8","direct","recentPages","_x10","useAddRecentPage","deleteRecentPage","lastPageExists","useResizeContext","itemPadding","noteOnPress","noteOnLongPress","_pages$data","onLongPress","titleStyle","fontStyle","noteCount","_pages$data2","TouchableRipple","updatedOffset","getTimezoneOffset","updatedFormat","_updated","_date","setMinutes","getMinutes","removeAttributesRecursively","element","attributes","attr","setAttribute","removeAttribute","child","removeAllAttributesFromHTML","_cardPadding","isLandscape","_cardMaxWidth","CardPage","React","cardMaxWidth","fSize","mounted","setMounted","timer","flexBasis","paddingRight","minWidth","Card","paddingTop","aspectRatio","sqrt","Content","descriptionComponent","opacity","RecentPagesSection","RenderHtml","renderersProps","tagsStyles","contentWidth","ScrollView","contentContainerStyle","flexWrap","cancelButton","saveButton","marginLeft","columns","moveButton","NotePageHeader","pressableTextColor","flexGrow","NotePageSection","active","inactiveCard","EditorViewer","autoResize","NoteBottomSection","toc","fullParagraph","idx","iconColor","getIconColor","moveParagraphs","moveParagraph","_paragraphs$idx","reverse","_paragraphs$idx2","pageStyles","scrollbarGutter","contentContainer","actionButtons","actionButton","exportMarkdowns","zip","JSZip","default","_v$description","file","toMarkdown","blob","generateAsync","createObjectURL","download","click","revokeObjectURL","importMarkdowns","files","accept","display","multiple","onchange","Error","endsWith","loadAsync","relativePath","dir","replace","toHtml","async","toString","OptionButton","TextButton","textStyle","textDecorationLine","_useAuthContext","dispatch","mutation","setSearch","resetKeyword","_auth$user3","_mutationFn2","_onSuccess2","useResetKeyowrd","ConfigSection","LanguageConfigSection","SkinConfigSection","username","NotesTabView","background","ContentGroupSection","RecentChangesTabView","ConfigTabView","replaceDay","newDate","addDay","unit","moved","createOrUpdatePage","v3","setNow","expand","setExpand","timeout","TimerTag","DateHeaderSection","monthly","markedDateRange","moveDate","themedStyles","dateDisplay","todayButton","navButton","headerStyles","dateContainer","navContainer","accessibilityLabel","todayButtonText","main","Home","component","route","tabViews","headerRight","HomeSection","homeView","headerTitle","ContractFooter","AntDesign","isWeb","NotePage","_paragraphItem$descri","isFocused","useIsFocused","useRoute","_route$params","archiveId","_window","toggleToc","toggleFullParagraph","_useNotePage","_useArchivePage","_queryFn4","useArchivePage","_archive","archive","handleEdit","paragraphItem","setDescription","_page$description","hasChild","TimerTagSection","ActivityIndicator","EditPage","_checkedRef$current2","setContent","checkedRef","handleBack","canGoBack","goBack","handleSave","onError","Alert","alert","handleUnsaved","_checkedRef$current","unsaved","isPrevent","currentTitle","addListener","action","payload","setParams","returnValue","addEventListener","removeEventListener","useUnsaveEffect","_checkedRef$current3","Editor","setValue","autoComplete","trigger","getMatchedChars","_getMatchedChars","childrenPages","encodeURI","_getMatchedChars2","protocol","MovePage","newTitle","setNewTitle","newParagraph","newPath","setNewPath","setPreview","moveMutation","_useNotePages5$data","oldTitle","_x9","useMovePage","_useMemo","_moveParagraph$","isSplit","moveDescription","sourceParagraph","sourceDescription","targetParagraph","targetIndex","findLastIndex","targetDescription","handleCancel","newParagraphItem","moveDisabled","paddingBottom","RecentPages","Problem","_useProblem","Archive","note","_useSnapshotPages","useInfiniteQuery","_queryFn2","getNextPageParam","allPages","refetchOnReconnect","refetchOnWindowFocus","useSnapshotPages","_useSnapshotPages$dat","archives","fetchNextPage","flat","_","TimeLine","_useTimeLine","NoteViewer","_useNoteViewers","_queryFn7","all","_ref9","fetch","process","_x12","useNoteViewers","viewers","pressable","Platform","OS","scrollbarWidth","HeaderRight","getConfig","Linking","login","prefixes","makeUrl","rootPath","documentTitle","formatter","rootScreen","headerLeftIcon","modals","drawer","Drawer","scheme","preTheme","MD2DarkTheme","MD2LightTheme","colors","primary","NavigationLazy","config","Navigation","PaperProvider"],"sourceRoot":""}