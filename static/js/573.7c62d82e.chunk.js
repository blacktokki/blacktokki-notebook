"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[573],{5573:(t,e,n)=>{n.r(e),n.d(e,{default:()=>Vt});var r=n(4586),i=n(6330),o=n(9399),a=n(919),l=n(689),u=n(7904),s=n(5346),c=n(3717),d=n(5225),f=n(863),p=n(4807),h=n(3705),g=n(8111),y=n(5209),x=n(8594),m=(0,x.axiosCreate)("notebook"),j=(function(){var t=(0,i.default)((function*(t){return(yield m.get(`/api/v1/content/${t}`)).data}))}(),function(){var t=(0,i.default)((function*(t,e){var n=void 0!==t?`&parentId=${t}`:"",r=void 0!==e?`&type=${e}`:"";return(yield m.get(`/api/v1/content?self=true&size=256${n}${r}`)).data.value}));return function(e,n){return t.apply(this,arguments)}}()),v=function(){var t=(0,i.default)((function*(t){return(yield m.post("/api/v1/content",t)).data.id}));return function(e){return t.apply(this,arguments)}}(),b=function(){var t=(0,i.default)((function*(t){var e=t.id,n=t.updated;yield m.patch("/api/v1/content",{ids:[e],updated:n})}));return function(e){return t.apply(this,arguments)}}(),C=(function(){var t=(0,i.default)((function*(t){yield m.delete(`/api/v1/content/${t}`)}))}(),/https?:\/\/(?:www\\.)?[-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b(?:[-a-zA-Z0-9()@:%_\+.~#?&\/=]*)/gi),w=function(t){return function(t,e){for(var n,r=e,i=0,o=[];null!=(n=new RegExp(t).exec(r));){o.push({index:i,str:r.substring(0,n.index)});var a=n.index+n[0].length;o.push({index:i+n.index,str:r.substring(n.index,a)}),i+=a,r=r.substring(a)}return o.push({index:i,str:r}),o}(C,t).filter((function(t,e){return e%2==1})).map((function(t){return t.str}))};!function(){var t=(0,i.default)((function*(t){var e=[];for(var n of w(t.query))e.push((yield m.get(`/api/v1/preview/autocomplete?query=${n}`)).data);return e}))}();function O(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function P(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?O(Object(n),!0).forEach((function(e){(0,r.default)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var k,S="@blacktokki:notebook:contents",D="@blacktokki:recent_pages",E=function(){var t=(0,i.default)((function*(){return(yield j()).filter((function(t){return"NOTE"===t.type||"BOOKMARK"===t.type}))}));return function(){return t.apply(this,arguments)}}(),F=function(){var t=(0,i.default)((function*(t,e){var n=t.find((function(t){return e===t.id}));n&&(yield e?b({id:e,updated:n}):v(n));try{var r=JSON.stringify(t);yield y.default.setItem(S,r)}catch(i){console.error("Error saving page contents",i)}}));return function(e,n){return t.apply(this,arguments)}}(),T=function(){var t=(0,i.default)((function*(){try{var t=yield y.default.getItem(D);return t?JSON.parse(t):[]}catch(e){return console.error("Error loading recent pages",e),[]}}));return function(){return t.apply(this,arguments)}}(),B=function(){var t=(0,i.default)((function*(t){try{var e=JSON.stringify(t);yield y.default.setItem(D,e)}catch(n){console.error("Error saving recent pages",n)}}));return function(e){return t.apply(this,arguments)}}(),M=function(){return(0,g.useQuery)({queryKey:["pageContents"],queryFn:E})},R=function(t){var e=(0,g.useQueryClient)();return(0,g.useQuery)({queryKey:["pageContent",t],queryFn:function(){var n=(0,i.default)((function*(){var n=(yield E()).find((function(e){return e.title===t}));n&&(void 0===(yield T()).find((function(e){return e===t}))&&(k=t,yield e.invalidateQueries({queryKey:["lastPage"]})));return n||{title:t,description:""}}));return function(){return n.apply(this,arguments)}}()})},N=function(){return(0,g.useQuery)({queryKey:["recentPages"],queryFn:function(){var t=(0,i.default)((function*(){var t=yield T(),e=yield E();return t.map((function(t){return e.find((function(e){return e.title===t}))})).filter((function(t){return void 0!==t}))}));return function(){return t.apply(this,arguments)}}()})},I=function(){return(0,g.useQuery)({queryKey:["lastPage"],queryFn:function(){var t=(0,i.default)((function*(){return(yield E()).find((function(t){return t.title===k}))}));return function(){return t.apply(this,arguments)}}()})},z=function(){var t=(0,g.useQueryClient)(),e=(0,x.useAuthContext)().auth;return(0,g.useMutation)({mutationFn:function(){var t=(0,i.default)((function*(t){var n,r=t.title,i=t.description,o=yield E(),a=o.find((function(t){return t.title===r}));if(a)n=o.map((function(t,e){return t.id===a.id?P(P({},t),{},{description:i}):t}));else{var l,u={title:r,description:i,input:r,userId:(null==(l=e.user)?void 0:l.id)||0,parentId:0,type:"NOTE",order:0,option:{}};n=[].concat((0,h.default)(o),[u])}return yield F(n,null==a?void 0:a.id),{title:r,description:i}}));return function(e){return t.apply(this,arguments)}}(),onSuccess:function(){var e=(0,i.default)((function*(e){yield t.invalidateQueries({queryKey:["pageContents"]}),yield t.invalidateQueries({queryKey:["pageContent",e.title]}),yield t.invalidateQueries({queryKey:["recentPages"]})}));return function(t){return e.apply(this,arguments)}}()})},L=function(){var t=(0,g.useQueryClient)();return(0,g.useMutation)({mutationFn:function(){var t=(0,i.default)((function*(t){var e=(yield T()).filter((function(e){return t!==e}));return k=void 0,yield B(e),{title:t}}));return function(e){return t.apply(this,arguments)}}(),onSuccess:function(e){t.invalidateQueries({queryKey:["recentPages"]}),t.invalidateQueries({queryKey:["pageContent"]}),t.invalidateQueries({queryKey:["lastPage"]})}})},Y=function(t){return f.default.create({container:{flex:1,backgroundColor:"dark"===t?"#121212":"#FFFFFF",paddingHorizontal:24,paddingVertical:16},card:{backgroundColor:"dark"===t?"#1E1E1E":"#FFFFFF",borderRadius:8,padding:16,marginBottom:16,borderWidth:1,borderColor:"dark"===t?"#333333":"#EEEEEE",shadowColor:"dark"===t?"#000000":"#888888",shadowOffset:{width:0,height:2},shadowOpacity:.1,shadowRadius:4,elevation:2},title:{fontSize:18,fontWeight:"bold",marginBottom:8,color:"dark"===t?"#FFFFFF":"#000000"},text:{fontSize:16,color:"dark"===t?"#E4E4E4":"#333333",lineHeight:24},button:{backgroundColor:"dark"===t?"#2C73B5":"#3498DB",borderRadius:4,padding:12,alignItems:"center",marginVertical:8},buttonText:{color:"#FFFFFF",fontWeight:"500",fontSize:16},searchButton:{backgroundColor:"#3498DB",justifyContent:"center",alignItems:"center",width:36,height:36,borderRadius:4,marginHorizontal:4},resultSeparator:{height:1,backgroundColor:"dark"===t?"#333333":"#EEEEEE"},input:{backgroundColor:"dark"===t?"#222222":"#FFFFFF",borderWidth:1,borderColor:"dark"===t?"#444444":"#CCCCCC",borderRadius:4,padding:10,color:"dark"===t?"#E4E4E4":"#333333",marginBottom:16},separator:{height:1,backgroundColor:"dark"===t?"#333333":"#EEEEEE",marginVertical:12},smallText:{fontSize:14,color:"dark"===t?"#BBBBBB":"#777777"},header:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",marginBottom:16},flex:{flex:1},row:{flexDirection:"row",alignItems:"center"},centerContent:{justifyContent:"center",alignItems:"center"}})},V=n(4678),H=n(2184),q=n(575),Q=f.default.create({buttonContainer:{flexDirection:"row",justifyContent:"space-between"},cancelButton:{flex:1,marginRight:8,backgroundColor:"#95A5A6"},saveButton:{flex:1,marginLeft:8}}),K=n(9367),A=n(6579),W=n(48),$=n(205),_=n(4342);function G(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function J(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?G(Object(n),!0).forEach((function(e){(0,r.default)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):G(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var U=function(){var t=(0,V.useLangContext)().lang;return(0,q.jsx)(A.default,{left:function(t){return(0,q.jsx)(W.default,J(J({},t),{},{icon:"timeline"}))},title:t("TimeLine"),onPress:function(){return(0,a.navigate)("TimeLine")}})};const Z=function(t){var e,n=(0,V.useLangContext)().lang,r=M(),l=N(),u=I().data,s=o.useRef(),c=function(){var t=(0,g.useQueryClient)();return(0,g.useMutation)({mutationFn:function(){var t=(0,i.default)((function*(t){var e=t.title,n=t.direct,r=yield T();if(void 0===r.find((function(t){return t===e}))||n){var i=[e].concat((0,h.default)(r));yield B(i)}return{title:e}}));return function(e){return t.apply(this,arguments)}}(),onSuccess:function(e){t.invalidateQueries({queryKey:["recentPages"]})}})}(),d=L(),f="NOTE"===t.type?null==(e=r.data)?void 0:e.filter((function(t){return t.description})).sort((function(t,e){return new Date(e.updated).getTime()-new Date(t.updated).getTime()})):l.data,p=(0,V.useResizeContext)(),y="landscape"===p?5:8,x=function(t){t===(null==u?void 0:u.title)&&(s.current?(clearTimeout(s.current),s.current=void 0,c.mutate({title:t})):s.current=setTimeout((function(){s.current=void 0}),500)),(0,a.navigate)("NotePage",{title:t})},m=function(t){var e;s.current&&(clearTimeout(s.current),s.current=void 0),void 0===(null==(e=l.data)?void 0:e.find((function(e){return e.title===t})))?c.mutate({title:t,direct:!0}):d.mutate(t)};return(0,q.jsx)($.default,{children:f&&("LAST"===t.type?u&&void 0===(null==f?void 0:f.find((function(t){return t.id===u.id})))&&(0,q.jsx)(A.default,{left:function(t){return(0,q.jsx)(W.default,J(J({},t),{},{icon:"file-document"}))},title:u.title,onPress:function(){return x(u.title)},onLongPress:function(){return m(u.title)},style:{padding:y},titleStyle:{fontStyle:"italic"}}):"NOTE"===t.type?(0,q.jsxs)(q.Fragment,{children:[f.slice(0,t.noteCount).map((function(t){return(0,q.jsx)(A.default,{left:function(e){var n;return(0,q.jsx)(W.default,J(J({},e),{},{icon:void 0===(null==(n=l.data)?void 0:n.find((function(e){return e.title===t.title})))?"notebook":"notebook-edit"}))},title:t.title,onPress:function(){return x(t.title)},onLongPress:function(){return m(t.title)},style:{padding:y}},t.id)})),((null==f?void 0:f.length)||0)>t.noteCount&&(0,q.jsx)(A.default,{left:function(t){return(0,q.jsx)(W.default,J(J({},t),{},{icon:"notebook-multiple"}))},title:n("more..."),onPress:function(){return(0,a.navigate)("RecentPages")},style:{padding:y}})]}):f.map((function(t){return(0,q.jsx)(A.default,{left:function(t){return(0,q.jsx)(W.default,J(J({},t),{},{icon:"file-document-edit"}))},right:function(e){return(0,q.jsx)(_.default,{style:{justifyContent:"center",borderRadius:y,width:40+2*y,height:40+2*y,margin:-y},onPress:function(){return d.mutate(t.title)},children:(0,q.jsx)(W.default,{style:{left:y-7},icon:"close"})})},title:t.title,onPress:function(){return(0,a.navigate)("NotePage",{title:t.title})},style:{padding:y}},t.id)})))})};var X=n(3390),tt=n(6927),et=n(2103),nt=n(1867);function rt(t){for(var e=(new DOMParser).parseFromString(t,"text/html"),n=[{path:"",title:"",header:"",level:0,description:""}],r=["H1","H2","H3","H4","H5","H6"],i=[],o=null,a=e.body.firstChild,l=function(){o&&(n.push(o),o=null)};a;){if(a.nodeType===Node.ELEMENT_NODE){var u=a;if(r.includes(u.tagName)){var s;l();for(var c=parseInt(u.tagName.substring(1)),d=(null==(s=u.textContent)?void 0:s.trim())||"";i.length>0&&i[i.length-1].level>=c;)i.pop();i.length>0&&i[i.length-1].title;i.push({level:c,title:d});var f=i.map((function(t){return t.title})).join(" > ");o={path:f,title:d,level:c,header:u.outerHTML,description:""}}else o?o.description+=u.outerHTML:n[0].description+=u.outerHTML}else a.nodeType===Node.TEXT_NODE&&o&&(o.description+=a.textContent||"");a=a.nextSibling}return l(),n}function it(t){var e=(0,V.useColorScheme)(),n=Y(e);return(0,q.jsx)(u.default,{style:[ot.resultsContainer,"dark"===e?ot.darkResults:ot.lightResults],children:(0,q.jsx)(tt.default,{data:t.data,keyExtractor:function(t){return t.path},renderItem:function(e){return function(e){return(0,q.jsxs)(c.default,{style:ot.resultItem,onPress:function(){return t.onPress(e)},children:[0===e.level&&(0,q.jsx)(nt.default,{name:"file-text-o",size:18,color:"#FFFFFF"}),(0,q.jsx)(V.Text,{style:[t.path===e.path?[n.title,{marginBottom:5,marginTop:3}]:n.text,ot.resultText,{left:10*e.level+10}],children:0===e.level?t.root:e.title})]})}(e.item)},ItemSeparatorComponent:function(){return(0,q.jsx)(u.default,{style:n.resultSeparator})}})})}var ot=f.default.create({backButton:{padding:8},resultItem:{padding:10,flexDirection:"row"},resultText:{fontSize:14},buttonContainer:{flexDirection:"row",justifyContent:"space-between"},resultsContainer:{borderWidth:1,borderRadius:4},lightResults:{backgroundColor:"#FFFFFF",borderColor:"#CCCCCC"},darkResults:{backgroundColor:"#222222",borderColor:"#444444"}});function at(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function lt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?at(Object(n),!0).forEach((function(e){(0,r.default)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):at(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var ut="",st=function(t){var e,n=t.handlePress,r=t.renderExtra,i=t.useRandom,a=void 0===i||i,d=(0,o.useState)(ut),f=(0,l.default)(d,2),g=f[0],y=f[1],x=(0,o.useState)(!1),m=(0,l.default)(x,2),j=m[0],v=m[1],b=(0,p.useNavigation)(),C=(0,V.useColorScheme)(),w=Y(C),O=null==(e=(0,p.useRoute)().params)?void 0:e.title,P=M().data,k=void 0===P?[]:P,S=I().data,D=N().data,E=void 0===D?[]:D,F=[].concat((0,h.default)(S?[S]:[]),(0,h.default)(E)),T=k.filter((function(t){return t.description})),B=g.toLowerCase(),R=g.length>0?[].concat((0,h.default)(k.filter((function(t){return t.title.toLowerCase().startsWith(B)}))),(0,h.default)(k.flatMap((function(t){return rt(t.description||"").filter((function(t){return t.title.toLowerCase().startsWith(B)})).map((function(e){return lt(lt({},t),{},{section:e})}))})))).slice(0,10):[].concat((0,h.default)(F),(0,h.default)(k.sort((function(t,e){return new Date(e.updated).getTime()-new Date(t.updated).getTime()})).filter((function(t){return void 0===F.find((function(e){return e.title===t.title}))})))).filter((function(t){return t.description&&t.title!==O})).slice(0,10),z=function(){g.trim()&&L(g.trim())},L=function(t,e){n?n(t):b.navigate("NotePage",{title:t,section:e}),y("")},H=(0,o.useMemo)((function(){return et.default.create({onPanResponderStart:z}).panHandlers}),[g]),Q=(0,o.useCallback)((function(t){return et.default.create({onPanResponderStart:function(){var e;return L(t.title,null==(e=t.section)?void 0:e.title)}}).panHandlers}),[]);return(0,o.useEffect)((function(){ut=g}),[g]),(0,p.useFocusEffect)((function(){g!==ut&&y(ut)})),(0,q.jsxs)(u.default,{style:ct.container,children:[(0,q.jsxs)(u.default,{style:ct.searchContainer,children:[(0,q.jsx)(X.default,{style:[w.input,ct.searchInput],value:g,onChangeText:function(t){y(t)},placeholder:"\uac80\uc0c9",placeholderTextColor:"dark"===C?"#777777":"#999999",onSubmitEditing:z,onFocus:function(){return v(!0)},onBlur:function(){return v(!1)}}),(0,q.jsx)(c.default,{style:w.searchButton,onPress:z,disabled:!g.trim(),children:(0,q.jsx)(nt.default,{name:r?"search-plus":"search",size:18,color:"#FFFFFF"})}),a&&T&&(0,q.jsx)(c.default,{style:w.searchButton,onPress:function(){var t=T[Math.floor(Math.random()*T.length)],e=rt(t.description||"");L(t.title,e[Math.floor(Math.random()*e.length)].title)},children:(0,q.jsx)(nt.default,{name:"random",size:18,color:"#FFFFFF"})})]}),j&&(0,q.jsxs)(u.default,{style:[ct.resultsContainer,"dark"===C?ct.darkResults:ct.lightResults],children:[R.length>0?(0,q.jsx)(tt.default,{data:R,keyExtractor:function(t){var e;return JSON.stringify([t.title,null==(e=t.section)?void 0:e.title])},renderItem:function(t){var e=t.item;return(0,q.jsxs)(c.default,lt(lt({style:ct.resultItem},Q(e)),{},{children:[(0,q.jsx)(s.default,{style:[w.text,ct.resultText],children:e.section?e.section.title:e.title}),e.section&&(0,q.jsx)(s.default,{style:[w.text,ct.resultText,{fontSize:12}],children:e.title})]}))},ItemSeparatorComponent:function(){return(0,q.jsx)(u.default,{style:[w.resultSeparator]})}}):g.trim()?(0,q.jsx)(c.default,lt(lt({style:ct.resultItem},H),{},{children:(0,q.jsxs)(s.default,{style:[w.text,ct.resultText],children:['"',g,'" \uc0c8 \ub178\ud2b8 \ub9cc\ub4e4\uae30']})})):null,null==r?void 0:r(g,R.length>0)]})]})},ct=f.default.create({container:{position:"relative",width:"100%",maxWidth:960,zIndex:999},searchContainer:{flexDirection:"row"},searchInput:{flex:1,height:36,marginBottom:0,paddingVertical:4,fontSize:14},resultsContainer:{position:"absolute",top:40,left:0,right:0,maxHeight:500,borderWidth:1,borderRadius:4,zIndex:999,elevation:5},lightResults:{backgroundColor:"#FFFFFF",borderColor:"#CCCCCC"},darkResults:{backgroundColor:"#222222",borderColor:"#444444"},resultItem:{flexDirection:"row",justifyContent:"space-between",padding:10},resultText:{fontSize:14}}),dt=function(){var t=(0,V.useColorScheme)();return(0,q.jsxs)(K.default,{style:{flex:1,backgroundColor:V.Colors[t].background},children:[(0,q.jsx)(Z,{type:"LAST"}),(0,q.jsx)(Z,{type:"PAGE"}),(0,q.jsx)(U,{})]})},ft=function(){var t=(0,V.useColorScheme)();return(0,q.jsx)(K.default,{style:{flex:1,backgroundColor:V.Colors[t].background},children:(0,q.jsx)(Z,{type:"NOTE",noteCount:15})})},pt=function(){var t=(0,V.useColorScheme)();return(0,q.jsx)(K.default,{style:{flex:1,backgroundColor:V.Colors[t].background},children:(0,q.jsx)(a.ConfigSections,{})})};f.default.create({searchContainer:{flexDirection:"row",marginBottom:16},searchInput:{flex:1,marginBottom:0},searchButton:{backgroundColor:"#3498DB",justifyContent:"center",alignItems:"center",width:48,borderRadius:4,marginLeft:8},recentButton:{flexDirection:"row",alignItems:"center",padding:8}});var ht=f.default.create({columns:{marginTop:8,marginBottom:16},backButton:{padding:8},buttonContainer:{flexDirection:"row",justifyContent:"space-between"},cancelButton:{flex:1,marginRight:8,backgroundColor:"#95A5A6"},moveButton:{flex:1,marginLeft:8}}),gt=(new Date).getTimezoneOffset(),yt=function(t){var e=new Date(t);e.setMinutes(e.getMinutes()-gt);var n=e.toISOString().slice(0,16),r=n.slice(0,10);return r==(new Date).toISOString().slice(0,10)?n.slice(11):r},xt=(f.default.create({backButton:{padding:8}}),n(7917)),mt=f.default.create({backButton:{padding:8},pageTitle:{flex:1,fontSize:20},actionButtons:{flexDirection:"row"},actionButton:{padding:8,marginLeft:8}}),jt=n(6434),vt=n.n(jt);function bt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Ct(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?bt(Object(n),!0).forEach((function(e){(0,r.default)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):bt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function wt(t){var e=t.datetime,n=t.callback,r=e?vt()(e):function(){var t=vt()(),e=parseInt(t.format("mm"),10)%5;return t.add(5-e,"minute")}(),i=(0,V.useLangContext)(),a=i.lang,u=i.locale,s=(0,o.useState)(r.format("YYYY-MM-DD")),d=(0,l.default)(s,2),f=d[0],p=d[1],h=(0,o.useState)([]),g=(0,l.default)(h,2),y=g[0],x=g[1],m=(0,V.useModalsContext)().setModal,j=function(){m(wt,null)};return(0,q.jsx)(V.View,{style:{flex:1,margin:0,justifyContent:"flex-end",backgroundColor:"transparent"},children:(0,q.jsxs)(V.View,{style:{alignItems:"center",minHeight:450},children:[(0,q.jsxs)(V.View,{style:{flexDirection:"row",width:"100%"},children:[(0,q.jsx)(V.View,{style:{flex:1,flexDirection:"row"},children:(0,q.jsx)(c.default,{onPress:j,children:(0,q.jsx)(V.Text,{children:a("back")})})}),(0,q.jsx)(V.View,{style:{flex:1},children:(0,q.jsx)(V.Text,{style:{fontSize:20,textAlign:"center"},children:a("Date")})}),(0,q.jsx)(V.View,{style:{flex:1}})]}),(0,q.jsx)(V.View,{style:{marginBottom:20,height:1,width:"100%"},lightColor:"#ddd",darkColor:"rgba(255,255,255, 0.3)"}),(0,q.jsx)(o.Suspense,{fallback:(0,q.jsx)(q.Fragment,{}),children:(0,q.jsx)(V.Calendar,{locale:u,style:void 0,setDate:p,disableAllTouchEventsForDisabledDays:!0,onMonthChange:function(t){return x((vt()(t.dateString),[]))},markedDates:Ct(Ct({},y.reduce((function(t,e){return t[e]={disabled:!0},t}),{})),(f?[f]:[]).reduce((function(t,e){return t[e]={selected:!0},t}),{}))})}),(0,q.jsxs)(V.View,{style:{flexDirection:"row"},children:[(0,q.jsx)(V.CommonButton,{title:a("save"),onPress:function(){null==n||n(f),j()}}),(0,q.jsx)(V.CommonButton,{title:a("cancel"),onPress:function(){null==n||n(void 0),j()}})]})]})})}function Ot(t){var e=t.date,n=t.setDate,r=t.monthly,i=(0,V.useColorScheme)(),o=Y(i),a=(0,V.useModalsContext)().setModal;return(0,q.jsxs)(V.View,{style:[o.card,{flexDirection:"row",justifyContent:"center"}],children:[(0,q.jsx)(V.CommonButton,{title:"<<",onPress:function(){return n(vt()(e).add(-1,r?"year":"month").format("YYYY-MM-DD"))},style:{paddingVertical:8,backgroundColor:"transparent"}}),(0,q.jsx)(V.CommonButton,{title:"<",onPress:function(){return n(vt()(e).add(-1,r?"month":"day").format("YYYY-MM-DD"))},style:{paddingVertical:8,backgroundColor:"transparent"}}),(0,q.jsx)(V.View,{style:{flexDirection:"row",backgroundColor:"transparent"},children:(0,q.jsx)(c.default,{style:[{flex:1,borderWidth:1,borderRadius:8,height:30,paddingHorizontal:10,paddingVertical:3,borderColor:"rgba(27,31,36,0.15)",minWidth:210,minHeight:37,paddingTop:0}],onPress:function(){return a(wt,{datetime:e,callback:function(t){return n(t||e)}})},children:(0,q.jsx)(V.Text,{style:{textAlign:"center",fontWeight:"700",fontSize:28},children:r&&e?e.substring(0,7):e})})}),(0,q.jsx)(V.CommonButton,{title:">",onPress:function(){return n(vt()(e).add(1,r?"month":"day").format("YYYY-MM-DD"))},style:{paddingVertical:8,backgroundColor:"transparent"}}),(0,q.jsx)(V.CommonButton,{title:">>",onPress:function(){return n(vt()(e).add(1,r?"year":"month").format("YYYY-MM-DD"))},style:{paddingVertical:8,backgroundColor:"transparent"}})]})}function Pt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function kt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Pt(Object(n),!0).forEach((function(e){(0,r.default)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Pt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function St(t){var e=[{regex:/^(\d{4}-\d{2}-\d{2})\s*~\s*(\d{4}-\d{2}-\d{2}).*$/,parse:function(t){var e=vt()(t[1]),n=vt()(t[2]),r=n.diff(e,"day")+1;return{text:t[0].trim(),dateStart:t[1],dateEnd:t[2],nextText:e.add(r,"day").format("YYYY-MM-DD")+"~"+n.add(r,"day").format("YYYY-MM-DD")}}},{regex:/^(\d{4}-\d{2}-\d{2}).*$/,parse:function(t){return{text:t[0].trim(),dateStart:t[1],dateEnd:t[1],nextText:vt()(t[1]).add(1,"day").format("YYYY-MM-DD")}}},{regex:/^(\d{4})-(\d{2}).*$/,parse:function(t){var e=parseInt(t[1],10),n=parseInt(t[2],10),r=new Date(e,n,0).getDate(),i=`${e}-${String(n).padStart(2,"0")}-01`;return{text:t[0].trim(),dateStart:i,dateEnd:`${e}-${String(n).padStart(2,"0")}-${String(r).padStart(2,"0")}`,nextText:vt()(i).add(1,"month").format("YYYY-MM")}}}];for(var n of e){var r=n.regex.exec(t);if(r)return n.parse(r)}}f.default.create({backButton:{padding:8}});var Dt={Home:{title:"Blacktokki Notebook",component:function(t){t.navigation,t.route;var e=(0,V.useLangContext)().lang,n=(0,V.useColorScheme)(),r=Y(n),i=e("Blacktokki Notebook"),o=[{title:e("Open Pages"),component:dt,icon:(0,q.jsx)(W.default,{icon:"file-document"}),headerRight:function(){return(0,q.jsx)(q.Fragment,{})}},{title:e("Notes"),component:ft,icon:(0,q.jsx)(W.default,{icon:"notebook"}),headerRight:function(){return(0,q.jsx)(q.Fragment,{})}},{title:e("Config"),component:pt,icon:(0,q.jsx)(W.default,{icon:"dots-horizontal"}),headerRight:function(){return(0,q.jsx)(q.Fragment,{})}}];return(0,q.jsx)(a.HomeSection,{tabViews:o,homeView:{title:i,headerRight:function(){return(0,q.jsx)(st,{})}},headerTitle:i,children:(0,q.jsx)(u.default,{style:[r.container,{width:"100%"}],children:(0,q.jsx)(u.default,{style:r.card,children:(0,q.jsx)(a.ConfigSections,{})})})})},path:"home"},NotePage:{title:"Blacktokki Notebook",component:function(){var t=(0,p.useRoute)(),e=t.params,n=e.title,r=e.section,i=(0,p.useNavigation)(),a=(0,V.useColorScheme)(),d=(0,V.useResizeContext)(),f=Y(a),h=(0,o.useState)(!1),g=(0,l.default)(h,2),y=g[0],x=g[1],m=R(n),j=m.data,v=m.isLoading,b=function(){i.navigate("EditPage",{title:n})},C=rt((null==j?void 0:j.description)||""),w=r?function(t,e){var n,r=null==(n=t.find((function(t){return t.title===e})))?void 0:n.path;return r?t.filter((function(t){return t.path.startsWith(r)})).map((function(t){return t.header+t.description})).join(""):""}(C,r):null==j?void 0:j.description;return(0,o.useEffect)((function(){x(!1)}),[t]),(0,q.jsxs)(q.Fragment,{children:["portrait"===d&&(0,q.jsx)(st,{}),(0,q.jsxs)(K.default,{style:[f.container,{paddingRight:12,scrollbarGutter:"stable"}],children:[(0,q.jsxs)(u.default,{style:f.header,children:[(0,q.jsx)(c.default,{onPress:function(){return i.navigate("NotePage",{title:n})},children:(0,q.jsxs)(s.default,{style:[f.title,mt.pageTitle],numberOfLines:1,children:[n,r?" \u25b6 "+r:""]})}),(null==j?void 0:j.description)&&(0,q.jsxs)(u.default,{style:mt.actionButtons,children:[(0,q.jsx)(c.default,{onPress:function(){return x(!y)},style:mt.actionButton,children:(0,q.jsx)(nt.default,{name:"list",size:16,color:"dark"===a?"#E4E4E4":"#333333"})}),(0,q.jsx)(c.default,{onPress:function(){i.navigate("MovePage",{title:n,section:r})},style:mt.actionButton,children:(0,q.jsx)(nt.default,{name:"exchange",size:16,color:"dark"===a?"#E4E4E4":"#333333"})}),r?void 0:(0,q.jsx)(q.Fragment,{children:(0,q.jsx)(c.default,{onPress:b,style:mt.actionButton,children:(0,q.jsx)(nt.default,{name:"pencil",size:16,color:"dark"===a?"#E4E4E4":"#333333"})})})]})]}),(0,q.jsx)(u.default,{style:f.flex,children:v?(0,q.jsx)(u.default,{style:[f.card,f.centerContent],children:(0,q.jsx)(xt.default,{size:"large",color:"#3498DB"})}):(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)(u.default,{style:!y&&w?[f.card,{flex:1,padding:0}]:{flex:1,position:"absolute"},children:(0,q.jsx)(H.EditorViewer,{active:!0,value:w||"",theme:a,onLink:function(t){var e=new URL(t);if(location.origin+location.pathname===e.origin+e.pathname){var n=new URLSearchParams(e.search).get("title");n&&i.navigate("NotePage",{title:n})}else window.open(t,"_blank")},autoResize:!0})}),y?(0,q.jsx)(it,{data:C,path:r||"",root:n,onPress:function(t){return i.navigate("NotePage",{title:n,section:t.title})}}):null!=j&&j.description?void 0:(0,q.jsxs)(u.default,{style:[f.card,f.centerContent],children:[(0,q.jsx)(s.default,{style:f.text,children:"\uc544\uc9c1 \ub0b4\uc6a9\uc774 \uc5c6\ub294 \ubb38\uc11c\uc785\ub2c8\ub2e4. '\ud3b8\uc9d1' \ubc84\ud2bc\uc744 \ub20c\ub7ec \ub0b4\uc6a9\uc744 \ucd94\uac00\ud574\ubcf4\uc138\uc694."}),(0,q.jsx)(c.default,{onPress:b,style:f.button,children:(0,q.jsx)(s.default,{style:f.buttonText,children:"\ud3b8\uc9d1\ud558\uae30"})})]})]})})]})]})},path:"page"},EditPage:{title:"Blacktokki Notebook",component:function(){var t=(0,p.useRoute)().params.title,e=(0,p.useNavigation)(),n=(0,V.useColorScheme)(),r=Y(n),i=R(t),a=i.data,f=i.isLoading,h=(0,o.useState)(""),g=(0,l.default)(h,2),y=g[0],x=g[1],m=z();return(0,o.useEffect)((function(){!f&&null!=a&&a.description&&x(null==a?void 0:a.description)}),[f]),(0,p.useFocusEffect)((function(){var t=function(t){t.preventDefault(),t.returnValue=""};return window.addEventListener("beforeunload",t),function(){return window.removeEventListener("beforeunload",t)}})),(0,q.jsxs)(u.default,{style:r.container,children:[(0,q.jsx)(u.default,{style:r.header,children:(0,q.jsxs)(s.default,{style:[r.title,{flex:1}],children:[t," - \ud3b8\uc9d1"]})}),(0,q.jsx)(H.Editor,{active:!0,value:y,setValue:x,theme:n}),(0,q.jsxs)(u.default,{style:Q.buttonContainer,children:[(0,q.jsx)(c.default,{style:[r.button,Q.cancelButton],onPress:function(){e.canGoBack()?e.goBack():e.navigate("NotePage",{title:t})},children:(0,q.jsx)(s.default,{style:r.buttonText,children:"\ucde8\uc18c"})}),(0,q.jsx)(c.default,{style:[r.button,Q.saveButton],onPress:function(){m.mutate({title:t,description:y},{onSuccess:function(){e.navigate("NotePage",{title:t})},onError:function(t){d.default.alert("\uc624\ub958",t.message||"\ubb38\uc11c\ub97c \uc800\uc7a5\ud558\ub294 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}})},children:(0,q.jsx)(s.default,{style:r.buttonText,children:"\uc800\uc7a5"})})]})]})},path:"edit"},MovePage:{title:"Blacktokki Notebook",component:function(){var t=(0,p.useRoute)().params,e=t.title,n=t.section,r=(0,p.useNavigation)(),a=(0,V.useColorScheme)(),f=(0,V.useResizeContext)(),y=(0,o.useState)(e),x=(0,l.default)(y,2),m=x[0],j=x[1],v=R(e),b=v.data,C=v.isLoading,w=rt((null==b?void 0:b.description)||""),O=(0,o.useState)(""),k=(0,l.default)(O,2),S=k[0],D=k[1],M=R(m).data,N=rt((null==M?void 0:M.description)||"").filter((function(t){return e!==m||S===t.path||!t.path.startsWith(S)})),I=(0,o.useState)(""),L=(0,l.default)(I,2),Q=L[0],A=L[1],W=(0,o.useState)(),$=(0,l.default)(W,2),_=$[0],G=$[1],J=Y(a),U=z(),Z=function(){var t=(0,g.useQueryClient)();return(0,g.useMutation)({mutationFn:function(){var t=(0,i.default)((function*(t){var e=t.oldTitle,n=t.newTitle,r=t.description,i=yield E(),o=i.find((function(t){return t.title===e}));if(!o)throw new Error("Page not found");if(i.some((function(t){return t.title===n})))throw new Error("Page with new title already exists");var a=i.map((function(t){return t.title===e?P(P({},t),{},{title:n,description:r||o.description}):t}));yield F(a,o.id);var l=(yield T()).map((function(t){return t===e?n:t}));return yield B(l),{oldTitle:e,newTitle:n}}));return function(e){return t.apply(this,arguments)}}(),onSuccess:function(e){t.invalidateQueries({queryKey:["pageContents"]}),t.invalidateQueries({queryKey:["pageContent",e.oldTitle]}),t.invalidateQueries({queryKey:["pageContent",e.newTitle]}),t.invalidateQueries({queryKey:["recentPages"]})}})}(),X=(0,o.useMemo)((function(){var t=w.filter((function(t){return t.path.startsWith(S)})),e=t.map((function(t){return t.header+t.description})).join(""),n=w.filter((function(t){return!t.path.startsWith(S)})),r=n.map((function(t){return t.header+t.description})).join(""),i=(null==b?void 0:b.title)===(null==M?void 0:M.title)?n:N,o=i.findLastIndex((function(t){return t.path.startsWith(Q)}));return{sourceDescription:r,targetDescription:void 0===M?e:[].concat((0,h.default)(i.slice(0,o+1).map((function(t){return t.header+t.description}))),(0,h.default)(t.map((function(t){return(t.path===S&&""===t.description?"":t.header)+t.description}))),(0,h.default)(i.slice(o+1).map((function(t){return t.header+t.description})))).join("")}}),[w,N,S,Q]),tt=X.sourceDescription,et=X.targetDescription,nt=function(){r.canGoBack()?r.goBack():r.navigate("NotePage",{title:e})};(0,o.useEffect)((function(){C||b||nt(),b&&j(b.title)}),[b,C]),(0,o.useEffect)((function(){if(!C){var t,e=(null==(t=w.find((function(t){return t.title===n})))?void 0:t.path)||"";D(e),A(e)}}),[n,C]);var ot=w.find((function(t){return t.path===S})),at=N.find((function(t){return t.path===Q})),lt=!m.trim()||void 0===at;return(0,q.jsx)(K.default,{style:J.container,children:(0,q.jsxs)(u.default,{style:J.card,children:[(0,q.jsxs)(u.default,{style:{flexDirection:"landscape"===f?"row":"column",zIndex:1},children:[(0,q.jsxs)(u.default,{style:{zIndex:1},children:[(0,q.jsx)(s.default,{style:J.text,children:"\ud604\uc7ac \ub178\ud2b8 \uc81c\ubaa9:"}),(0,q.jsx)(s.default,{style:[J.title,ht.columns],children:e}),(0,q.jsx)(s.default,{style:J.text,children:"\ud604\uc7ac \ub178\ud2b8 \ubb38\ub2e8:"}),void 0!==n?(0,q.jsx)(s.default,{style:[J.title,ht.columns],children:n}):(0,q.jsx)(u.default,{style:ht.columns,children:(0,q.jsx)(it,{path:S,onPress:function(t){return D(t.path)},root:(null==b?void 0:b.title)||"",data:w})}),(0,q.jsx)(s.default,{style:J.text,children:"\uc0c8 \ub178\ud2b8 \uc81c\ubaa9:"}),(0,q.jsx)(st,{handlePress:j,useRandom:!1}),(0,q.jsx)(s.default,{style:J.text,children:"\uc0c8 \ub178\ud2b8 \ubb38\ub2e8:"}),(0,q.jsx)(u.default,{style:ht.columns,children:(0,q.jsx)(it,{path:Q,onPress:function(t){return A(t.path)},root:(null==M?void 0:M.title)||"",data:N})})]}),(0,q.jsxs)(u.default,{style:{flex:1},children:[(0,q.jsx)(s.default,{style:J.text,children:" \ubbf8\ub9ac\ubcf4\uae30:"}),(0,q.jsxs)(c.default,{style:[J.button,ht.moveButton,{flex:0,flexDirection:"row",alignItems:"center",paddingTop:24,paddingBottom:16}],onPress:function(){return G(!_)},children:[(0,q.jsxs)(s.default,{style:J.title,children:[e,0!==(null==ot?void 0:ot.level)?"/"+(null==ot?void 0:ot.title):""]}),(0,q.jsx)(s.default,{style:[J.text,{marginBottom:8,fontSize:14}],children:"  \u25b6  "}),(0,q.jsxs)(s.default,{style:J.title,children:[m,0!==(null==at?void 0:at.level)?"/"+((null==at?void 0:at.title)||"?"):""]})]}),void 0!==_&&(0,q.jsx)(u.default,{style:{display:_?"flex":"none"},children:(0,q.jsx)(H.EditorViewer,{active:!0,value:et,theme:a,autoResize:!0})})]})]}),(0,q.jsxs)(u.default,{style:ht.buttonContainer,children:[(0,q.jsx)(c.default,{style:[J.button,ht.cancelButton],onPress:nt,children:(0,q.jsx)(s.default,{style:J.buttonText,children:"\ucde8\uc18c"})}),(0,q.jsx)(c.default,{style:[J.button,lt?ht.cancelButton:ht.moveButton],onPress:function(){void 0===M?Z.mutate({oldTitle:e,newTitle:m.trim(),description:""===S?void 0:et},{onSuccess:function(t){r.navigate({name:"NotePage",params:{title:t.newTitle}})},onError:function(t){d.default.alert("\uc624\ub958",t.message||"\ub178\ud2b8 \uc774\ub3d9 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}}):((null==b?void 0:b.title)===M.title&&S===Q&&nt(),U.mutate({title:M.title,description:et},{onSuccess:function(t){(null==b?void 0:b.title)!==M.title&&U.mutate({title:e,description:tt}),r.navigate({name:"NotePage",params:{title:t.title}})},onError:function(t){d.default.alert("\uc624\ub958",t.message||"\ub178\ud2b8 \uc774\ub3d9 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}}))},disabled:lt,children:(0,q.jsx)(s.default,{style:J.buttonText,children:"\uc774\ub3d9"})})]})]})})},path:"move"},RecentPages:{title:"Blacktokki Notebook",component:function(){var t=(0,p.useNavigation)(),e=(0,V.useColorScheme)(),n=Y(e),r=(0,V.useResizeContext)(),i=M(),o=i.data,a=void 0===o?[]:o,l=i.isLoading;return(0,q.jsxs)(q.Fragment,{children:["portrait"===r&&(0,q.jsx)(st,{}),(0,q.jsx)(u.default,{style:n.container,children:l?(0,q.jsx)(u.default,{style:[n.card,n.centerContent],children:(0,q.jsx)(s.default,{style:n.text,children:"\ub85c\ub529 \uc911..."})}):a.length>0?(0,q.jsx)(tt.default,{data:a.sort((function(t,e){return new Date(e.updated).getTime()-new Date(t.updated).getTime()})),keyExtractor:function(t){return t.title},renderItem:function(e){var r=e.item;return(0,q.jsxs)(c.default,{style:n.card,onPress:function(){return e=r.title,void t.navigate("NotePage",{title:e});var e},children:[(0,q.jsx)(s.default,{style:n.title,children:r.title}),(0,q.jsxs)(s.default,{style:n.smallText,children:["\ucd5c\uadfc \uc218\uc815: ",yt(r.updated)]})]})},ItemSeparatorComponent:function(){return(0,q.jsx)(u.default,{style:{height:8}})}}):(0,q.jsx)(u.default,{style:[n.card,n.centerContent],children:(0,q.jsx)(s.default,{style:n.text,children:"\ucd5c\uadfc \uc218\uc815\ud55c \ub178\ud2b8\uac00 \uc5c6\uc2b5\ub2c8\ub2e4."})})})]})},path:"recent"},TimeLine:{title:"Blacktokki Notebook",component:function(){var t=(0,p.useNavigation)(),e=(0,V.useColorScheme)(),n=Y(e),r=(0,V.useResizeContext)(),i=(0,o.useState)("2022-08-05"),a=(0,l.default)(i,2),d=a[0],f=a[1],g=new Date(d).getTime(),y=M(),x=y.data,m=void 0===x?[]:x,j=y.isLoading,v=m.flatMap((function(t){var e=rt(t.description||"").map((function(e){var n=e.path.split(" > "),r=n.slice(0,n.length-1).join(" > "),i=St(e.title),o=i&&St(i.nextText);if(i&&o)return kt(kt({},t),{},{section:e,parentPath:r,dateMatch:i,nextMatch:o})})).filter((function(t){return void 0!==t})),n=e.filter((function(t){return new Date(t.dateMatch.dateStart).getTime()<=g&&g<=new Date(t.dateMatch.dateEnd).getTime()})).map((function(t){return kt(kt({},t),{},{future:!1})})),r=new Set(n.map((function(t){return t.parentPath}))),i=e.filter((function(t){return!r.has(t.parentPath)&&new Date(t.nextMatch.dateStart).getTime()<=g&&g<=new Date(t.nextMatch.dateEnd).getTime()})).map((function(t){return kt(kt({},t),{},{future:!0})}));return[].concat((0,h.default)(n),(0,h.default)(i))}));return(0,q.jsxs)(q.Fragment,{children:["portrait"===r&&(0,q.jsx)(st,{}),(0,q.jsxs)(u.default,{style:n.container,children:[(0,q.jsx)(Ot,{date:d,setDate:f}),j?(0,q.jsx)(u.default,{style:[n.card,n.centerContent],children:(0,q.jsx)(s.default,{style:n.text,children:"\ub85c\ub529 \uc911..."})}):v.length>0?(0,q.jsx)(tt.default,{data:v,keyExtractor:function(t){return t.title},renderItem:function(e){var r=e.item,i=r.parentPath.split(" > "),o=r.parentPath.length>0&&i.length>0?i[i.length-1]:r.title,a=r.future?r.nextMatch.text:r.section.title;return(0,q.jsxs)(c.default,{style:n.card,onPress:function(){return function(e,n){t.navigate("NotePage",{title:e,section:n})}(r.title,a)},children:[(0,q.jsx)(s.default,{style:n.title,children:o}),(0,q.jsx)(s.default,{style:n.smallText,children:a})]})},ItemSeparatorComponent:function(){return(0,q.jsx)(u.default,{style:{height:8}})}}):(0,q.jsx)(u.default,{style:[n.card,n.centerContent],children:(0,q.jsx)(s.default,{selectable:!1,style:n.text,children:"\ub178\ud2b8\uac00 \uc5c6\uc2b5\ub2c8\ub2e4."})})]})]})},path:"timeline"}},Et=n(5589);function Ft(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Tt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ft(Object(n),!0).forEach((function(e){(0,r.default)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ft(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}const Bt=function(){var t=(0,V.useLangContext)().lang;return(0,q.jsxs)(V.View,{style:{flex:1},children:[(0,q.jsx)(A.default,{left:function(t){return(0,q.jsx)(W.default,Tt(Tt({},t),{},{icon:"home"}))},title:t("Home"),onPress:function(){return(0,a.navigate)("Home")}}),(0,q.jsx)(U,{}),(0,q.jsxs)(K.default,{children:[(0,q.jsx)(Et.default,{style:{},selectable:!1,children:t("Open Pages")}),(0,q.jsx)(Z,{type:"LAST"}),(0,q.jsx)(Z,{type:"PAGE"}),(0,q.jsx)(Et.default,{style:{flex:1},selectable:!1,children:t("Notes")}),(0,q.jsx)(Z,{type:"NOTE",noteCount:10})]})]})};var Mt=n(8610),Rt=n(7650),Nt=n(2876);function It(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function zt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?It(Object(n),!0).forEach((function(e){(0,r.default)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):It(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Lt=function(){return"landscape"===(0,V.useResizeContext)()?(0,q.jsx)(st,{}):void 0},Yt=function(){var t=(0,i.default)((function*(t){var e=yield Promise.all([n.e(928),n.e(973)]).then(n.bind(n,9928));return{main:Dt,login:a.login,prefixes:[e.makeUrl("/")],rootPath:"blacktokki-notebook",documentTitle:{formatter:function(){return"blacktokki-notebook"}},rootScreen:{main:"Home",login:"LoginScreen"},headerLeftIcon:(0,q.jsx)(W.default,{icon:"backburger",style:{left:-18,top:-14}}),headerRight:(0,q.jsx)(Lt,{}),modals:[wt],drawer:(0,q.jsx)(Bt,{})}}));return function(e){return t.apply(this,arguments)}}();const Vt=function(){var t=(0,V.useColorScheme)(),e="dark"==t?Mt.MD2DarkTheme:Rt.MD2LightTheme,n=zt(zt({},e),{},{colors:zt(zt({},e.colors),{},{primary:V.Colors[t].text})}),r=o.lazy((function(){return Yt(t).then((function(t){return{default:function(){return(0,q.jsx)(a.Navigation,{config:t})}}}))}));return(0,q.jsx)(Nt.default,{theme:n,children:(0,q.jsx)(o.Suspense,{fallback:(0,q.jsx)(q.Fragment,{}),children:(0,q.jsx)(r,{})})})}}}]);
//# sourceMappingURL=573.7c62d82e.chunk.js.map