"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[483],{84483:(e,t,n)=>{n.r(t),n.d(t,{default:()=>tn});var r=n(24586),i=n(86330),o=n(32024),a=n(12089),l=n(29399),u=n(20048),s=n(88610),c=n(77650),d=n(50910),f=n(90689),p=n(83705),h=n(54807),g=n(63390),y=n(63717),x=n(56927),v=n(20863),m=n(82103),j=n(41867),b=n(8594),w=n(5209),O=n(68111),C="@blacktokki:notebook:keywords:",P=function(){var e=(0,i.default)((function*(e){try{var t=yield w.default.getItem(C+e);return t?JSON.parse(t):[]}catch(n){return console.error("Error loading keywords",n),[]}}));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=(0,i.default)((function*(e,t){try{var n=JSON.stringify(t);yield w.default.setItem(C+e,n)}catch(r){console.error("Error saving keywords",r)}}));return function(t,n){return e.apply(this,arguments)}}(),k=function(){var e,t=(0,b.useAuthContext)().auth,n=t.isLocal?"":`${null==(e=t.user)?void 0:e.id}`;return(0,O.useQuery)({queryKey:["keywords",n],queryFn:function(){var e=(0,i.default)((function*(){return yield P(n)}));return function(){return e.apply(this,arguments)}}()})},E=n(54426),D=(0,b.axiosCreate)("notebook"),L=function(){var e=(0,i.default)((function*(e){return(yield D.get(`/api/v1/content/${e}`)).data}));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=(0,i.default)((function*(e,t,n){var r=void 0!==e?`&parentId=${e}`:"",i=void 0!==t?`&types=${t.join(",")}`:"",o=void 0!==n?`&size=20&page=${n}`:"&size=256";return(yield D.get(`/api/v1/content?self=true&sort=id,DESC${r}${i}${o}`)).data.value}));return function(t,n,r){return e.apply(this,arguments)}}(),F=function(){var e=(0,i.default)((function*(e){return(yield D.post("/api/v1/content",e)).data.id}));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=(0,i.default)((function*(e){var t=e.id,n=e.updated;yield D.patch("/api/v1/content",{ids:[t],updated:n})}));return function(t){return e.apply(this,arguments)}}(),I=(function(){var e=(0,i.default)((function*(e){yield D.delete(`/api/v1/content/${e}`)}))}(),function(){var e=(0,i.default)((function*(e){return(yield D.get(`/api/v1/preview/autocomplete?query=${e.query}`)).data}));return function(t){return e.apply(this,arguments)}}());function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function R(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function B(){return z.apply(this,arguments)}function z(){return(z=(0,i.default)((function*(){return new Promise((function(e,t){var n=indexedDB.open("@Blacktokki:notebook",1);n.onupgradeneeded=function(e){var t=e.target.result;t.objectStoreNames.contains("NOTE")||t.createObjectStore("NOTE",{keyPath:"title"})},n.onsuccess=function(){e(n.result)},n.onerror=function(){t(n.error)}}))}))).apply(this,arguments)}var A,$="@blacktokki:notebook:recent_pages",K=function(){var e=(0,i.default)((function*(e){if(e.isOnline)return yield T(e.parentId,[e.type],e.page);var t="NOTE";try{var n=yield B();return new Promise((function(e){var r=n.transaction(t,"readonly").objectStore(t).getAll();r.onsuccess=function(){e(r.result)},r.onerror=function(){throw console.error("Error loading contents from IndexedDB:",r.error),r.error}}))}catch(r){return console.error("Error opening IndexedDB",r),[]}}));return function(t){return e.apply(this,arguments)}}(),V=function(){var e=(0,i.default)((function*(e,t,n){var r=t.find((function(e){return n===e.id}));if(e){if(r){var i=yield n?N({id:n,updated:r}).then((function(){return n})):F(r),o=R(R({},r),{},{type:"SNAPSHOT",id:void 0,parentId:i});yield F(o)}}else try{var a=(yield B()).transaction(["NOTE"],"readwrite"),l=a.objectStore("NOTE");for(var u of t)l.put(u);yield new Promise((function(e,t){a.oncomplete=function(){return e(void 0)},a.onerror=function(){return t(a.error)}}))}catch(s){console.error("Error saving contents to IndexedDB",s)}}));return function(t,n,r){return e.apply(this,arguments)}}(),q=function(){var e=(0,i.default)((function*(){try{var e=yield w.default.getItem($);return e?JSON.parse(e):[]}catch(t){return console.error("Error loading recent notes",t),[]}}));return function(){return e.apply(this,arguments)}}(),W=function(){var e=(0,i.default)((function*(e){try{var t=JSON.stringify(e);yield w.default.setItem($,t)}catch(n){console.error("Error saving recent notes",n)}}));return function(t){return e.apply(this,arguments)}}(),H=function(){var e=(0,b.useAuthContext)().auth;return(0,O.useQuery)({queryKey:["pageContents",!e.isLocal],queryFn:function(){var t=(0,i.default)((function*(){return yield K({isOnline:!e.isLocal,type:"NOTE"})}));return function(){return t.apply(this,arguments)}}()})},Y=function(e){var t=(0,O.useQueryClient)(),n=H(),r=n.data,o=void 0===r?[]:r,a=n.isFetching;return(0,O.useQuery)({queryKey:["pageContent",e],queryFn:function(){var n=(0,i.default)((function*(){var n=o.find((function(t){return t.title===e}));n&&(void 0===(yield q()).find((function(t){return t===e}))&&(A=e,yield t.invalidateQueries({queryKey:["lastPage"]})));return n||{title:e,description:"",id:void 0}}));return function(){return n.apply(this,arguments)}}(),enabled:!a})},Q=function(){var e=H(),t=e.data,n=void 0===t?[]:t,r=e.isFetching;return(0,O.useQuery)({queryKey:["lastPage"],queryFn:function(){var e=(0,i.default)((function*(){return n.find((function(e){return e.title===A}))}));return function(){return e.apply(this,arguments)}}(),enabled:!r})},_=function(){var e=(0,O.useQueryClient)(),t=(0,b.useAuthContext)().auth,n=H().data,r=void 0===n?[]:n;return(0,O.useMutation)({mutationFn:function(){var e=(0,i.default)((function*(e){var n,i=e.title,o=e.description,a=r.find((function(e){return e.title===i}));if((null==a?void 0:a.description)===o)return{title:i,description:o,skip:!0};var l=t.isLocal?(new Date).toISOString():void 0;if(a)n=r.map((function(e,t){return e.id===a.id?R(R({},e),{},{description:o,updated:l}):e}));else{var u,s={title:i,description:o,input:i,userId:(null==(u=t.user)?void 0:u.id)||0,parentId:0,type:"NOTE",order:0,updated:l,option:{}};n=[].concat((0,p.default)(r),[s])}return yield V(!t.isLocal,n,null==a?void 0:a.id),{title:i,description:o,skip:!1}}));return function(t){return e.apply(this,arguments)}}(),onSuccess:function(){var t=(0,i.default)((function*(t){t.skip||(yield e.invalidateQueries({queryKey:["pageContents"]}),yield e.invalidateQueries({queryKey:["snapshotContents"]}),yield e.invalidateQueries({queryKey:["snapshotContent"]}),yield e.invalidateQueries({queryKey:["pageContent",t.title]}),yield e.invalidateQueries({queryKey:["recentPages"]}))}));return function(e){return t.apply(this,arguments)}}()})},U=function(){var e=(0,O.useQueryClient)();return(0,O.useMutation)({mutationFn:function(){var e=(0,i.default)((function*(e){var t=(yield q()).filter((function(t){return e!==t}));return A=void 0,yield W(t),{title:e}}));return function(t){return e.apply(this,arguments)}}(),onSuccess:function(t){e.invalidateQueries({queryKey:["recentPages"]}),e.invalidateQueries({queryKey:["pageContent"]}),e.invalidateQueries({queryKey:["lastPage"]})}})},G=function(e){return v.default.create({container:{flex:1,backgroundColor:"dark"===e?"#121212":"#FFFFFF",paddingHorizontal:24,paddingVertical:16},card:{backgroundColor:"dark"===e?"#1E1E1E":"#FFFFFF",borderRadius:8,padding:16,marginBottom:16,borderWidth:1,borderColor:"dark"===e?"#333333":"#EEEEEE",shadowColor:"dark"===e?"#000000":"#888888",shadowOffset:{width:0,height:2},shadowOpacity:.1,shadowRadius:4,elevation:2},title:{fontSize:18,fontWeight:"bold",marginBottom:8,color:"dark"===e?"#FFFFFF":"#000000"},text:{fontSize:16,color:"dark"===e?"#E4E4E4":"#333333",lineHeight:24},button:{backgroundColor:"dark"===e?"#2C73B5":"#3498DB",borderRadius:4,padding:12,alignItems:"center",marginVertical:8},buttonText:{color:"#FFFFFF",fontWeight:"500",fontSize:16},searchButton:{backgroundColor:"#3498DB",justifyContent:"center",alignItems:"center",width:36,height:36,borderRadius:4,marginHorizontal:4},resultSeparator:{height:1,backgroundColor:"dark"===e?"#333333":"#EEEEEE"},input:{backgroundColor:"dark"===e?"#222222":"#FFFFFF",borderWidth:1,borderColor:"dark"===e?"#444444":"#CCCCCC",borderRadius:4,padding:10,color:"dark"===e?"#E4E4E4":"#333333",marginBottom:16},separator:{height:1,backgroundColor:"dark"===e?"#333333":"#EEEEEE",marginVertical:12},smallText:{fontSize:14,color:"dark"===e?"#BBBBBB":"#777777"},header:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",marginBottom:16},flex:{flex:1},row:{flexDirection:"row",alignItems:"center"},centerContent:{justifyContent:"center",alignItems:"center"}})},J=n(47904),X=n(50575);function Z(e){for(var t=(new DOMParser).parseFromString(e,"text/html"),n=[{path:"",title:"",header:"",level:0,description:""}],r=["H1","H2","H3","H4","H5","H6"],i=[],o=null,a=t.body.firstChild,l=function(){o&&(n.push(o),o=null)};a;){if(a.nodeType===Node.ELEMENT_NODE){var u=a;if(r.includes(u.tagName)){var s;l();for(var c=parseInt(u.tagName.substring(1),10),d=(null==(s=u.textContent)?void 0:s.trim())||"";i.length>0&&i[i.length-1].level>=c;)i.pop();i.push({level:c,title:d});var f=i.map((function(e){return e.title})).join(" > ");o={path:f,title:d,level:c,header:u.outerHTML,description:""}}else o?o.description+=u.outerHTML:n[0].description+=u.outerHTML}else a.nodeType===Node.TEXT_NODE&&o&&(o.description+=a.textContent||"");a=a.nextSibling}return l(),n}function ee(e){var t=(0,o.useColorScheme)(),n=G(t);return(0,X.jsx)(J.default,{style:[te.resultsContainer,"dark"===t?te.darkResults:te.lightResults],children:(0,X.jsx)(x.default,{data:e.data,keyExtractor:function(e){return e.path},renderItem:function(t){return function(t){return(0,X.jsxs)(y.default,{style:te.resultItem,onPress:function(){return e.onPress(t)},children:[0===t.level&&(0,X.jsx)(j.default,{name:"file-text-o",size:18,color:"#FFFFFF"}),(0,X.jsx)(o.Text,{style:[e.path===t.path?[n.title,{marginBottom:5,marginTop:3}]:n.text,te.resultText,{left:10*t.level+10}],children:0===t.level?e.root:t.title})]})}(t.item)},ItemSeparatorComponent:function(){return(0,X.jsx)(J.default,{style:n.resultSeparator})}})})}var te=v.default.create({backButton:{padding:8},resultItem:{padding:10,flexDirection:"row"},resultText:{fontSize:14},buttonContainer:{flexDirection:"row",justifyContent:"space-between"},resultsContainer:{borderWidth:1,borderRadius:4},lightResults:{backgroundColor:"#FFFFFF",borderColor:"#CCCCCC"},darkResults:{backgroundColor:"#222222",borderColor:"#444444"}});function ne(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function re(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ne(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ne(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ie="";function oe(e){var t=new URL(e);if(location.origin===t.origin){var n=new URLSearchParams(t.search),r=n.get("title"),i=n.get("paragraph")||n.get("section")||void 0;if(r)return{title:r,paragraph:i}}}function ae(e,t){var n=oe(e);n?t.push("NotePage",n):window.open(e,"_blank")}function le(e,t){return e.flatMap((function(e){return function(e){var t=(new DOMParser).parseFromString(e,"text/html").querySelectorAll("a");return Array.from(t).map((function(e){var t;return{text:(null==(t=e.textContent)?void 0:t.trim())||e.href,url:e.href}}))}(e.description||"").map((function(n){var r=oe(n.url);return r?t||n.text!==r.title?re(re({type:"_NOTELINK",name:n.text},r),{},{origin:e.title}):void 0:{type:"_LINK",url:n.url,name:n.text,origin:e.title}}))})).filter((function(e){return void 0!==e}))}var ue=function(e,t){var n=t.toLowerCase().normalize("NFKD"),r=le(e);return[].concat((0,p.default)(e.filter((function(e){return e.title.toLowerCase().normalize("NFKD").startsWith(n)}))),(0,p.default)(r.filter((function(e){return e.name.toLowerCase().normalize("NFKD").startsWith(n)}))))},se=function(){var e=(0,o.useColorScheme)(),t=G(e),n=(0,h.useNavigation)(),r=H().data,i=(void 0===r?[]:r).filter((function(e){return e.description}));return i&&(0,X.jsx)(y.default,{style:t.searchButton,onPress:function(){var e=i[Math.floor(Math.random()*i.length)],t=Z(e.description||"");n.push("NotePage",{title:e.title,paragraph:t[Math.floor(Math.random()*t.length)].title})},children:(0,X.jsx)(j.default,{name:"random",size:18,color:"#FFFFFF"})})},ce=function(e){return`${e.title}${e.paragraph?" \u25b6 "+e.paragraph:""}`},de=function(e){var t=e.onPress,n=e.addKeyword,r=e.afterPress,o=(0,h.useNavigation)(),a=function(){var e,t=(0,O.useQueryClient)(),n=(0,b.useAuthContext)().auth,r=n.isLocal?"":`${null==(e=n.user)?void 0:e.id}`;return(0,O.useMutation)({mutationFn:function(){var e=(0,i.default)((function*(e){var t=yield P(r),n=(0,p.default)(new Set([JSON.stringify(e)].concat((0,p.default)(t.map((function(e){return JSON.stringify(e)})))))).map((function(e){return JSON.parse(e)}));yield S(r,n)}));return function(t){return e.apply(this,arguments)}}(),onSuccess:function(){var e=(0,i.default)((function*(){yield t.invalidateQueries({queryKey:["keywords",r]})}));return function(){return e.apply(this,arguments)}}()})}(),u=a.mutate;return(0,l.useCallback)((function(e){!t||"NOTE"!==e.type&&"_KEYWORD"!==e.type?"_LINK"===e.type?(window.open(e.url,"_blank"),n&&u(e)):"_NOTELINK"===e.type&&e.paragraph?(o.push("NotePage",{title:e.title,paragraph:e.paragraph}),n&&u(e)):(o.push("NotePage",{title:e.title}),n&&u({type:"_KEYWORD",title:e.title})):t(e.title),null==r||r()}),[])},fe=function(e){var t=e.filteredPages,n=e.onPressKeyword,r=e.focus,i=(0,o.useColorScheme)(),a=G(i),u=de({}),s=(0,l.useCallback)((function(e){return m.default.create({onPanResponderStart:function(){return(n||u)(e)}}).panHandlers}),[]);return(0,X.jsx)(x.default,{data:t,keyExtractor:function(e){return JSON.stringify([e.title,e.name,e.paragraph])},renderItem:function(e){var t=e.item,n=e.index;return(0,X.jsxs)(y.default,re(re({style:[he.resultItem,{borderWidth:1,borderColor:r===n?o.Colors[i].text:"transparent"}]},s(t)),{},{children:[(0,X.jsx)(o.Text,{style:[a.text,he.resultText,{flexShrink:0}],children:"_NOTELINK"===t.type||"_LINK"===t.type?t.name:t.title}),"_NOTELINK"===t.type&&(0,X.jsx)(o.Text,{numberOfLines:1,ellipsizeMode:"tail",style:[a.text,he.resultText,{fontSize:12,paddingLeft:24}],children:ce(t)}),"_LINK"===t.type&&(0,X.jsx)(o.Text,{numberOfLines:1,ellipsizeMode:"tail",style:[a.text,he.resultText,{fontSize:12,paddingLeft:24}],children:ce({title:t.origin,paragraph:t.url})})]}))},ItemSeparatorComponent:function(){return(0,X.jsx)(o.View,{style:[a.resultSeparator]})}})},pe=function(e){var t=e.onPress,n=e.addKeyword,r=void 0===n||n,i=e.useRandom,a=void 0===i||i,u=(0,l.useState)(ie),s=(0,f.default)(u,2),c=s[0],d=s[1],p=(0,l.useState)(!1),x=(0,f.default)(p,2),v=x[0],b=x[1],w=(0,l.useState)(-1),O=(0,f.default)(w,2),C=O[0],P=O[1],S=(0,o.useLangContext)().lang,E=(0,o.useColorScheme)(),D=G(E),L=(0,l.useRef)(),T=k().data,F=void 0===T?[]:T,N=H().data,I=void 0===N?[]:N,M=(c.length>0?ue(I,c):F).filter((function(e){return void 0===t||"NOTE"===e.type})).slice(0,10),R=de({onPress:t,addKeyword:r,afterPress:function(){return d("")}}),B=function(){var e=c.trim();e&&R({type:"_KEYWORD",title:e})},z=(0,l.useMemo)((function(){return m.default.create({onPanResponderStart:B}).panHandlers}),[c]);return(0,l.useEffect)((function(){ie=c,P(-1)}),[c]),(0,h.useFocusEffect)((function(){c!==ie&&d(ie)})),(0,X.jsxs)(o.View,{style:he.container,onKeyDownCapture:function(e){v&&("ArrowUp"===e.key&&C>-1?(e.preventDefault(),P(C-1)):"ArrowDown"===e.key&&C<M.length-1&&(e.preventDefault(),P(C+1)))},children:[(0,X.jsxs)(o.View,{style:he.searchContainer,children:[(0,X.jsx)(g.default,{ref:function(e){L.current=e},style:[D.input,he.searchInput],value:c,onChangeText:function(e){d(e)},placeholder:S("Search"),placeholderTextColor:"dark"===E?"#777777":"#999999",onSubmitEditing:C>-1?function(){R(M[C]),P(-1)}:B,onFocus:function(){return b(!0)},onBlur:function(){return b(!1)}}),(0,X.jsx)(y.default,{style:D.searchButton,onPress:B,disabled:!c.trim(),children:(0,X.jsx)(j.default,{name:"search",size:18,color:"#FFFFFF"})}),a&&(0,X.jsx)(se,{})]}),v&&(0,X.jsx)(o.View,{style:[he.resultsContainer,"dark"===E?he.darkResults:he.lightResults],children:M.length>0?(0,X.jsx)(fe,{filteredPages:M,onPressKeyword:R,focus:C}):c.trim()?(0,X.jsx)(y.default,re(re({style:he.resultItem},z),{},{children:(0,X.jsxs)(o.Text,{style:[D.text,he.resultText],children:['"',c,'" \uc0c8 \ub178\ud2b8 \ub9cc\ub4e4\uae30']})})):null})]})},he=v.default.create({container:{position:"relative",width:"100%",maxWidth:960,zIndex:999},searchContainer:{flexDirection:"row"},searchInput:{flex:1,height:36,marginBottom:0,paddingVertical:4,fontSize:14},resultsContainer:{position:"absolute",top:40,left:0,right:0,maxHeight:500,borderWidth:1,borderRadius:4,zIndex:999,elevation:5},lightResults:{backgroundColor:"#FFFFFF",borderColor:"#CCCCCC"},darkResults:{backgroundColor:"#222222",borderColor:"#444444"},resultItem:{flexDirection:"row",justifyContent:"space-between",padding:10},resultText:{fontSize:14}});function ge(e){var t=e.type,n=e.callbacks,r=(0,o.useLangContext)().lang,i=(0,o.useModalsContext)().setModal,a=function(){i(ge,null)},l={UNSAVED:{message:"Changes that you made may not be saved.",buttons:[{title:"save",onPress:function(){n[0](),a()}},{title:"do not save",onPress:function(){n[1](),a()}}]}};return(0,X.jsx)(o.View,{style:{flex:1,margin:0,justifyContent:"flex-end",backgroundColor:"transparent"},children:(0,X.jsxs)(o.View,{style:{padding:16},children:[(0,X.jsx)(o.Text,{children:r(l[t].message)}),(0,X.jsxs)(o.View,{style:{width:"100%",flexDirection:"row",justifyContent:"flex-end"},children:[l[t].buttons.map((function(e,t){return(0,X.jsx)(o.CommonButton,{style:{marginRight:10},title:r(e.title),onPress:e.onPress},t)})),(0,X.jsx)(o.CommonButton,{title:r("cancel"),onPress:function(){return a()}})]})]})})}var ye=n(16434),xe=n.n(ye);function ve(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function me(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ve(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ve(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var je=function(e,t){for(var n=xe()(e),r=n.clone().startOf("month").add(-1,"month"),i=n.clone().endOf("month").add(1,"month"),o=t.map((function(e){return{startDate:xe()(e.dateStart),endDate:xe()(e.dateEnd)}})),a=[];r<=i;)o.find((function(e){return!e.startDate.isAfter(r)&&!e.endDate.isBefore(r)}))&&a.push(r.format("YYYY-MM-DD")),r=r.add(1,"day");return me(me(me({},[].reduce((function(e,t){return e[t]={disabled:!0},e}),{})),a.reduce((function(e,t){return e[t]={marked:!0,dotColor:"red"},e}),{})),(e?[e]:[]).reduce((function(e,t){return e[t]={selected:!0},e}),{}))};function be(e){var t=e.datetime,n=e.markedDateStrings,r=e.callback,i=t?xe()(t):function(){var e=xe()(),t=parseInt(e.format("mm"),10)%5;return e.add(5-t,"minute")}(),a=(0,o.useLangContext)(),u=a.lang,s=a.locale,c=(0,l.useState)(i.format("YYYY-MM-DD")),d=(0,f.default)(c,2),p=d[0],h=(d[1],(0,l.useState)(je(i.format("YYYY-MM-DD"),n||[]))),g=(0,f.default)(h,2),x=g[0],v=g[1],m=(0,o.useModalsContext)().setModal,j=function(){m(be,null)},b=function(e){null==r||r(e),j()};return(0,X.jsx)(o.View,{style:{flex:1,margin:0,justifyContent:"flex-end",backgroundColor:"transparent"},children:(0,X.jsxs)(o.View,{style:{alignItems:"center",minHeight:450},children:[(0,X.jsxs)(o.View,{style:{flexDirection:"row",width:"100%"},children:[(0,X.jsx)(o.View,{style:{flex:1,flexDirection:"row"},children:(0,X.jsx)(y.default,{onPress:j,children:(0,X.jsx)(o.Text,{children:u("back")})})}),(0,X.jsx)(o.View,{style:{flex:1},children:(0,X.jsx)(o.Text,{style:{fontSize:20,textAlign:"center"},children:u("Date")})}),(0,X.jsx)(o.View,{style:{flex:1}})]}),(0,X.jsx)(o.View,{style:{marginBottom:20,height:1,width:"100%"},lightColor:"#ddd",darkColor:"rgba(255,255,255, 0.3)"}),(0,X.jsx)(l.Suspense,{fallback:(0,X.jsx)(X.Fragment,{}),children:(0,X.jsx)(o.Calendar,{locale:s,style:void 0,date:p,setDate:b,disableAllTouchEventsForDisabledDays:!0,onMonthChange:function(e){return v(je(e.dateString,n||[]))},markedDates:x})}),!1]})})}const we=[be,ge];var Oe=n(95346),Ce=function(e){var t=e.contents,n=e.isLoading,r=e.onPress,i=e.emptyMessage,a=e.onScrollEnd,u=(0,o.useColorScheme)(),s=G(u),c=(0,o.useLangContext)().lang,d=(0,l.useRef)(0);return(0,X.jsx)(J.default,{style:s.container,children:n?(0,X.jsx)(J.default,{style:[s.card,s.centerContent],children:(0,X.jsx)(Oe.default,{style:s.text,children:"\ub85c\ub529 \uc911..."})}):t.length>0?(0,X.jsx)(x.default,{data:t,keyExtractor:function(e){return JSON.stringify([e.title,e.paragraph,e.id])},renderItem:function(e){var t=e.item;return(0,X.jsxs)(y.default,{style:s.card,onPress:function(){return r(t.title,t.paragraph,t.id)},children:[(0,X.jsx)(Oe.default,{style:s.title,children:ce(t)}),(t.subtitles||[]).map((function(e,t){return(0,X.jsx)(Oe.default,{style:[s.smallText],children:e},t)}))]})},ItemSeparatorComponent:function(){return(0,X.jsx)(J.default,{style:{height:8}})},onScroll:function(e){e.nativeEvent.contentSize.height-d.current-e.nativeEvent.contentOffset.y<1&&(null==a||a())},onLayout:function(e){d.current=e.nativeEvent.layout.height}}):(0,X.jsx)(J.default,{style:[s.card,s.centerContent],children:(0,X.jsx)(Oe.default,{selectable:!1,style:s.text,children:c(i)})})})},Pe=n(9367),Se=n(46072),ke=n(76579),Ee=n(52034),De=n(40205),Le=n(57687);function Te(e){var t=(new Date).getFullYear(),n=[{regex:/\b(\d{4}-\d{2}-\d{2})\/(\d{4}-\d{2}-\d{2})\b/g,parse:function(e){return{pattern:"YYYY-MM-DD",format:function(e,t){return`${e}/${t}`},text:e[0],dateStart:e[1],dateEnd:e[2],index:e.index}}},{regex:/\b(\d{4}-\d{2}-\d{2})\b/g,parse:function(e){return{pattern:"YYYY-MM-DD",text:e[0],dateStart:e[1],dateEnd:e[1],index:e.index}}},{regex:/\b\d{4}-\d{2}(?!-)\b/g,parse:function(e){var t=e[0].split("-"),n=parseInt(t[0],10),r=parseInt(t[1],10),i=new Date(n,r,0).getDate();return{pattern:"YYYY-MM",text:e[0],dateStart:`${n}-${String(r).padStart(2,"0")}-01`,dateEnd:`${n}-${String(r).padStart(2,"0")}-${String(i).padStart(2,"0")}`,index:e.index}}},{regex:/\b(\d{2})\/(\d{2})\s*~\s*(\d{2})\/(\d{2})\b/g,parse:function(e){var n=parseInt(e[1],10),r=parseInt(e[2],10),i=parseInt(e[3],10),o=parseInt(e[4],10);return{pattern:"MM/DD",format:function(e,t){return`${e} ~ ${t}`},text:e[0],dateStart:`${t}-${String(n).padStart(2,"0")}-${String(r).padStart(2,"0")}`,dateEnd:`${t}-${String(i).padStart(2,"0")}-${String(o).padStart(2,"0")}`,index:e.index}}},{regex:/\b(?<!\d)(\d{2})\/(\d{2})(?!\d)\b/g,parse:function(e){var n=parseInt(e[1],10),r=parseInt(e[2],10);return{pattern:"MM/DD",text:e[0],dateStart:`${t}-${String(n).padStart(2,"0")}-${String(r).padStart(2,"0")}`,dateEnd:`${t}-${String(n).padStart(2,"0")}-${String(r).padStart(2,"0")}`,index:e.index}}}],r=[],i=[];for(var o of n)for(var a=new RegExp(o.regex.source,"g"),l=void 0,u=function(){var e=l.index,t=a.lastIndex;if(r.some((function(n){return e<n.index+n.text.length&&t>n.index})))return 1;r.push(o.parse(l)),i.push([e,t])};null!==(l=a.exec(e));)u();return r}function Fe(e,t,n){var r=(new DOMParser).parseFromString(e,"text/html");(r.querySelectorAll("code").forEach((function(e){e.textContent=""})),r.querySelectorAll("a").forEach((function(e){e.textContent=""})),n)&&r.querySelectorAll("tr").forEach((function(e){var t=e.querySelectorAll("td");if(t.length>1){var n=Array.from(t).map((function(e){var t;return(null==(t=e.textContent)?void 0:t.trim())||""})).join(" "),r=document.createElement("td");r.textContent=n,e.innerHTML="",e.appendChild(r)}}));return r.body.innerHTML}var Ne=function(e,t){return t.map((function(t){var n=[(0,E.toRaw)(t.header)].concat((0,p.default)((0,E.toRaw)(Fe(t.description,0,!0)).split("\n"))).map((function(e,n){return{path:t.path,isHeader:0===n,original:e,matches:Te(e)}}));return{title:e,paragraph:t.title,dateMatches:n}})).filter((function(e){return e.dateMatches.filter((function(e){return e.matches.length>0})).length>0}))},Ie=function(e,t){return e.filter((function(e){return e.matches.find((function(e){return new Date(e.dateStart).getTime()<=t&&t<=new Date(e.dateEnd).getTime()}))}))},Me=function(){return xe()().format("YYYY-MM-DD")};const Re=function(e){var t=xe()(e.data.dateStart),n=xe()(e.data.dateEnd).add(1,"day"),r=t.diff(e.now)/t.diff(n),i=(0,o.useLangContext)().lang;return(0,X.jsx)(y.default,{onPress:function(){return e.toggleExpand()},children:(0,X.jsxs)(J.default,{style:{backgroundColor:"lightgray",borderRadius:20,overflow:"hidden",margin:4},children:[(0,X.jsx)(J.default,{style:{backgroundColor:"darkgray",position:"absolute",width:100*r+"%",height:"100%"}}),e.isExpand?(0,X.jsxs)(J.default,{style:{paddingVertical:4,paddingHorizontal:4,maxWidth:270},children:[(0,X.jsxs)(J.default,{style:{flexDirection:"row",alignItems:"stretch"},children:[(0,X.jsx)(Oe.default,{children:"\u231a"}),(0,X.jsx)(Oe.default,{selectable:!1,children:e.data.text})]}),(0,X.jsx)(Oe.default,{children:e.data.original}),(0,X.jsx)(J.default,{style:{width:"100%",alignItems:"center"},children:e.buttons(e.data).map((function(t){return(0,X.jsx)(o.CommonButton,{title:i(t.title),onPress:function(){t.onPress(),e.toggleExpand()},style:{width:"100%",backgroundColor:"#8888",margin:4,maxWidth:150}},t.title)}))})]}):(0,X.jsx)(J.default,{style:{paddingVertical:4,paddingHorizontal:4,flexDirection:"row"},children:(0,X.jsx)(J.default,{style:{paddingHorizontal:4},children:(0,X.jsx)(Oe.default,{selectable:!1,children:e.data.text})})})]})})};function Be(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ze(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Be(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Be(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ae=function(){function e(e){var t=(e.match(/[.!?\n]+/g)||[]).length||1,n=e.trim().split(/\s+/),r=n.length;return r/t*.39+n.reduce((function(e,t){return e+function(e){if((e=e.toLowerCase()).length<=3)return 1;var t=(e.match(/[aeiouy]+/g)||[]).length;return/e\b/.test(e)&&t>1&&t--,Math.max(t,1)}(t)}),0)/r*11.8-15.59}return function(t){var n,r=function(e){return(e.match(/[\uac00-\ud7a3]/g)||[]).length/e.length}(t),i=e(t),o=(n=i)<3?1:n<6?2:n<9?3:n<12?4:5,a=function(e){var t=e.split(/[.?!\n]/).filter((function(e){return e.trim().length>0})),n=e.trim().split(/\s+/).length/(t.length||1);return n<=7?1:n<=10?2:n<=13?3:n<=16?4:5}(t);return{koRatio:r,enLevel:o,koLevel:a,level:a*r+o*(1-r)}}}();function $e(e){var t=(new DOMParser).parseFromString(e,"text/html"),n=[];return["ul","ol"].forEach((function(e){Array.from(t.querySelectorAll(e)).forEach((function(t){var r=[];t.querySelectorAll("li").forEach((function(e){var t,n=e.cloneNode(!0);n.querySelectorAll("ul, ol").forEach((function(e){return e.remove()})),r.push((null==(t=n.textContent)?void 0:t.trim())||"")})),n.push({type:e,items:r})}))})),n}var Ke=function(e){var t=e.split("/");return t.length<2?[e]:[t.slice(0,t.length-1).join("/"),t[t.length-1]]},Ve=function(e,t,n){var r,i=null==(r=e.find((function(e){return e.title===t})))?void 0:r.path;return i?e.filter((function(e){return e.path===i||e.path.startsWith(i+" > ")})).map((function(e){return(n||e.path!==i?e.header:"")+e.description})).join(""):""},qe=function(e){return e.replaceAll("\n","").replaceAll("&nbsp;","").trim()},We={},He=function(e){var t=We[e.title];if((null==t?void 0:t.source.updated)===e.updated)return We[e.title];var n=[],r=Z(e.description||""),i=r.map((function(e){return ze(ze({},e),{},{lists:$e(e.description)})})).filter((function(e){return e.lists.length>0}));r.filter((function(e){return 0!==e.level&&0===qe(Ve(r,e.title,!1)).length})).forEach((function(t){return n.push([e.title,0===t.level?void 0:t.title,"Empty paragraph"])})),i.filter((function(e){return e.lists.filter((function(e){return e.items.filter((function(e){return 0===qe(e).length})).length>0})).length>0})).forEach((function(t){return n.push([e.title,0===t.level?void 0:t.title,"Empty list"])})),r.filter((function(e){return e!==r.findLast((function(t){return t.path===e.path}))})).forEach((function(t){return n.push([e.title,void 0,`Duplicate paragraphs(${t})`])})),r.map((function(e){var t=Fe(e.description,0,!0).split("\n").map((function(e){return(0,E.toRaw)(e).trim()})).filter((function(e){return e.includes(" ")&&e.length>4}));return ze(ze({},e),{},{duplicates:t.filter((function(e,n){return n!==t.lastIndexOf(e)}))})})).forEach((function(t){return t.duplicates.forEach((function(r){return n.push([e.title,0===t.level?void 0:t.title,`Duplicate contents(${r})`])}))}));var o=e.description?Ae((0,E.toRaw)(e.description.replaceAll(/<code\b[^>]*>[\s\S]*?<\/code>/gi,"<code></code>").replaceAll(/<br\s*[/]?>/gi,"\r\n"))):{level:0};o.level>3&&n.push([e.title,void 0,`Too high readability score: ${o.level.toFixed(4)} > 3.0`]);var a=le([e],!0).filter((function(e){return"_NOTELINK"===e.type})),l=Ke(e.title),u=e.description&&2===l.length?l[0]:void 0,s=(0,E.toRaw)(Fe(e.description||"",0,!1));return We[e.title]={record:n,source:{title:e.title,updated:e.updated,links:a,parentTitle:u,raw:s},matrix:{}},We[e.title]},Ye=function(e){var t=[];return e.map(He).flatMap((function(t){var n=t.record,r=t.source;return[].concat((0,p.default)(e.flatMap((function(e){return function(e,t){if(e.title===t.title)return[];var n=We[e.title],r=n.matrix[t.title];if((null==n?void 0:n.source.updated)===e.updated&&(null==r?void 0:r.updated)===t.updated)return r.record;var i=[],o=e.links.filter((function(e){return e.title===t.title}));if(t.description){var a=t.description,l=We[t.title].source;o.filter((function(e){return void 0!==e.paragraph&&void 0===Z(a).find((function(t){return t.title===e.paragraph}))})).forEach((function(e){i.push([e.title,e.paragraph,`Unknown paragraph link(${e.origin})`])}));var u=e.title;if(l.parentTitle!==e.title&&void 0===l.links.find((function(e){return e.name.toLowerCase()===u.toLowerCase()}))){var s=l.raw.match(new RegExp(`\\b${u}\\b`,"i"));s&&i.push([t.title,void 0,`Unlinked note keyword: ${s[0]}`])}e.links.filter((function(e){return l.parentTitle!==e.title&&e.title.toLowerCase()!==e.name.toLowerCase()&&e.title!==t.title&&void 0===l.links.find((function(t){return t.name.toLowerCase()===e.name.toLowerCase()&&t.title===e.title&&t.paragraph===e.paragraph}))})).forEach((function(e){var n=l.raw.match(new RegExp(`\\b${e.name}\\b`,"i"));n&&i.push([t.title,void 0,`Unlinked note keyword: ${n[0]} => ${ce(e)}(${e.origin})`])}))}else o.forEach((function(e){i.push([e.title,e.paragraph,`Unknown note link(${e.origin})`])})),e.parentTitle===t.title&&i.push([e.parentTitle,void 0,`Empty parent note(${e.title})`]);return n.matrix[t.title]={record:i,updated:t.updated},i}(r,e)}))),(0,p.default)(n))})).forEach((function(e){var n=(0,f.default)(e,3),r=n[0],i=n[1],o=n[2],a=t.findIndex((function(e){return e.title===r&&e.paragraph===i}));a>=0?t[a].subtitles.push(o):t.push({title:r,paragraph:i,subtitles:[o]})})),t};const Qe=function(e){var t=H(),n=t.data,r=void 0===n?[]:n,i=t.isLoading,o=(0,l.useState)(),a=(0,f.default)(o,2),u=a[0],s=a[1],c=(0,l.useRef)();return(0,l.useEffect)((function(){c.current&&clearTimeout(c.current),c.current=setTimeout((function(){s(Ye(r)),c.current=void 0}),e||500)}),[r]),{data:u||[],isLoading:i||void 0===u}};function _e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ue(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_e(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_e(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Ge=function(e){var t=new Date(e||Me()).getTime(),n=H(),r=n.data,i=void 0===r?[]:r,o=n.isLoading,a=(0,l.useMemo)((function(){return i.flatMap((function(e){return Ne(e.title,Z((null==e?void 0:e.description)||""))}))}),[i]);return{data:a.map((function(e){return Ue(Ue({},e),{},{subtitles:Ie(e.dateMatches,t).map((function(e){return e.original}))})})).filter((function(e){return e.subtitles.length>0})),isLoading:o,preData:a}};function Je(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Xe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Je(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Je(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ze=function(){var e=(0,o.useLangContext)().lang,t=Ge().data;return(0,X.jsx)(ke.default,{left:function(e){return(0,X.jsx)(u.default,Xe(Xe({},e),{},{icon:"calendar"}))},right:function(e){return(0,X.jsx)(o.View,{style:{alignSelf:"center",backgroundColor:"transparent"},children:t.length>0&&(0,X.jsx)(Ee.default,{children:t.length})})},title:e("TimeLine"),onPress:function(){return(0,a.navigate)("TimeLine")}})},et=function(){var e=(0,o.useLangContext)().lang,t=Qe().data;return(0,X.jsx)(ke.default,{left:function(e){return(0,X.jsx)(u.default,Xe(Xe({},e),{},{icon:"note-alert"}))},right:function(e){return(0,X.jsx)(o.View,{style:{alignSelf:"center",backgroundColor:"transparent"},children:t.length>0&&(0,X.jsx)(Ee.default,{children:t.length})})},title:e("Problems"),onPress:function(){return(0,a.push)("Problem")}})},tt=function(e){return e.filter((function(e){return e.description})).sort((function(e,t){return new Date(t.updated).getTime()-new Date(e.updated).getTime()}))};const nt=function(e){var t=(0,o.useLangContext)().lang,n=H(),r=function(){var e=H(),t=e.data,n=void 0===t?[]:t,r=e.isFetching;return(0,O.useQuery)({queryKey:["recentPages"],queryFn:function(){var e=(0,i.default)((function*(){return(yield q()).map((function(e){return n.find((function(t){return t.title===e}))})).filter((function(e){return void 0!==e}))}));return function(){return e.apply(this,arguments)}}(),enabled:!r})}(),s=Q().data,c=(0,l.useRef)(),d=function(){var e=(0,O.useQueryClient)();return(0,O.useMutation)({mutationFn:function(){var e=(0,i.default)((function*(e){var t=e.title,n=e.direct,r=yield q();if(void 0===r.find((function(e){return e===t}))||n){var i=[t].concat((0,p.default)(r));yield W(i)}return{title:t}}));return function(t){return e.apply(this,arguments)}}(),onSuccess:function(t){e.invalidateQueries({queryKey:["recentPages"]})}})}(),f=U(),h="NOTE"===e.type?n.data?tt(n.data):[]:r.data,g=s&&void 0===(null==h?void 0:h.find((function(e){return e.id===s.id}))),y=(0,o.useResizeContext)(),x="landscape"===y?5:8,v=function(e){e===(null==s?void 0:s.title)&&(c.current?(clearTimeout(c.current),c.current=void 0,d.mutate({title:e})):c.current=setTimeout((function(){c.current=void 0}),500)),(0,a.navigate)("NotePage",{title:e})},m=function(e){var t;c.current&&(clearTimeout(c.current),c.current=void 0),void 0===(null==(t=r.data)?void 0:t.find((function(t){return t.title===e})))?d.mutate({title:e,direct:!0}):f.mutate(e)};return("LAST"!==e.type||g)&&(0,X.jsx)(De.default,{children:h&&("LAST"===e.type?g&&(0,X.jsx)(ke.default,{left:function(e){return(0,X.jsx)(u.default,Xe(Xe({},e),{},{icon:"file-document"}))},title:s.title,onPress:function(){return v(s.title)},onLongPress:function(){return m(s.title)},style:{padding:x},titleStyle:{fontStyle:"italic"}}):"NOTE"===e.type?(0,X.jsxs)(X.Fragment,{children:[h.slice(0,e.noteCount).map((function(e){return(0,X.jsx)(ke.default,{left:function(t){var n;return(0,X.jsx)(u.default,Xe(Xe({},t),{},{icon:void 0===(null==(n=r.data)?void 0:n.find((function(t){return t.title===e.title})))?"notebook":"notebook-edit"}))},title:e.title,onPress:function(){return v(e.title)},onLongPress:function(){return m(e.title)},style:{padding:x}},e.title)})),(0,X.jsx)(ke.default,{left:function(e){return(0,X.jsx)(u.default,Xe(Xe({},e),{},{icon:"notebook-multiple"}))},title:t("more..."),onPress:function(){return(0,a.push)("RecentPages")},style:{padding:x}})]}):h.map((function(e){return(0,X.jsx)(ke.default,{left:function(e){return(0,X.jsx)(u.default,Xe(Xe({},e),{},{icon:"file-document-edit"}))},right:function(t){return(0,X.jsx)(Le.default,{style:{justifyContent:"center",borderRadius:x,width:40+2*x,height:40+2*x,margin:-x},onPress:function(){return f.mutate(e.title)},children:(0,X.jsx)(u.default,{style:{left:x-7},icon:"close"})})},title:e.title,onPress:function(){return(0,a.navigate)("NotePage",{title:e.title})},style:{padding:x}},e.title)})))})};function rt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function it(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rt(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ot=(new Date).getTimezoneOffset(),at=function(e){var t=new Date(e);t.setMinutes(t.getMinutes()-ot);var n=t.toISOString().slice(0,16),r=n.slice(0,10);return r===(new Date).toISOString().slice(0,10)?n.slice(11):r};function lt(e){var t=Array.from(e.attributes);for(var n of t)"href"===n.name?e.setAttribute("href",""):e.removeAttribute(n.name);for(var r of e.children)lt(r)}function ut(e){var t=(new DOMParser).parseFromString(e,"text/html").body;for(var n of t.children)lt(n);return t.innerHTML}var st=function(e){return e?20:4},ct=function(e){return e?250:190},dt=l.memo((function(e){var t=e.item,n=e.index,r=(0,o.useResizeContext)(),i=ct("landscape"===r),a=(0,o.useColorScheme)(),u=G(a),s="landscape"===r?2:0,c=(0,l.useState)(n<10),d=(0,f.default)(c,2),p=d[0],g=d[1];if((0,l.useEffect)((function(){if(!p){var e=setTimeout((function(){return g(!0)}),50*n-400);return function(){return clearTimeout(e)}}}),[t,n,p]),null===t)return(0,X.jsx)(o.View,{style:{flexBasis:"landscape"===r?"33%":"50%",maxWidth:i,backgroundColor:"transparent"}});var x=(0,h.useNavigation)(),v=function(){return x.push("NotePage",{title:t.title})};return(0,X.jsxs)(y.default,{style:{flexBasis:"landscape"===r?"33%":"50%",padding:st("landscape"===r),paddingRight:0,minWidth:i,maxWidth:i},onPress:v,children:[(0,X.jsx)(Se.default,{onPress:v,style:[u.card,{paddingTop:8,aspectRatio:1/Math.sqrt(2),borderRadius:6,marginVertical:10,marginHorizontal:8,overflow:"hidden"}],children:(0,X.jsx)(Se.default.Content,{style:{padding:0},children:p&&t.descriptionComponent})}),(0,X.jsxs)(o.View,{style:{flexDirection:"row",marginTop:10,padding:0,justifyContent:"space-between",alignItems:"center",width:"100%",backgroundColor:"transparent"},children:[(0,X.jsx)(o.Text,{style:{fontSize:14+s,overflow:"hidden"},children:t.title}),(0,X.jsx)(o.Text,{style:{fontSize:12+s,opacity:.4,textAlign:"right"},children:at(t.updated)})]})]})})),ft=l.memo((function(){var e=(0,o.useColorScheme)(),t=G(e),r=(0,o.useResizeContext)(),i=(0,o.useLangContext)().lang,a=H(),u=a.data,s=void 0===u?[]:u,c=a.isLoading,d=(0,h.useNavigation)(),f=ct("landscape"===r),g=(0,l.useMemo)((function(){return l.lazy((function(){return n.e(274).then(n.t.bind(n,39274,23))}))}),[]),x=(0,l.useMemo)((function(){return[].concat((0,p.default)(tt(s).map((function(e){return it(it({},e),{},{descriptionComponent:(0,X.jsx)(g,{source:{html:ut(e.description||"").slice(0,300)||""},renderersProps:{a:{onPress:function(){return d.push("NotePage",{title:e.title})}}},tagsStyles:{body:{color:t.text.color}},contentWidth:f})})}))),[null,null])}),[s]),v=(f+5)*("landscape"===r?5:3);return c?(0,X.jsx)(o.View,{style:t.container,children:(0,X.jsx)(o.View,{style:[t.card,t.centerContent],children:(0,X.jsx)(o.Text,{style:t.text,children:"\ub85c\ub529 \uc911..."})})}):x.length>2?(0,X.jsx)(Pe.default,{contentContainerStyle:{alignSelf:"center",backgroundColor:"transparent",flexBasis:"100%",maxWidth:v,flexWrap:"wrap",flexDirection:"row",paddingRight:st("landscape"===r),justifyContent:"landscape"===r?void 0:"center"},children:(0,X.jsx)(l.Suspense,{children:x.map((function(e,t){return function(e){var t=e.item,n=e.index;return(0,X.jsx)(dt,{index:n,item:t},n)}({item:e,index:t})}))})},r):(0,X.jsx)(o.View,{style:t.container,children:(0,X.jsxs)(o.View,{style:[t.card,t.centerContent],children:[(0,X.jsx)(o.Text,{style:t.text,children:i("There are no recently modified notes.")}),(0,X.jsx)(y.default,{onPress:function(){return d.push("NoteViewer",{key:"Usage"})},style:t.button,children:(0,X.jsx)(o.Text,{style:t.buttonText,children:i("Usage")})})]})})}));function pt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ht(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pt(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var gt=n(95225),yt=v.default.create({buttonContainer:{flexDirection:"row",justifyContent:"space-between"},cancelButton:{flex:1,marginRight:8,backgroundColor:"#95A5A6"},saveButton:{flex:1,marginLeft:8}}),xt=v.default.create({columns:{marginTop:8,marginBottom:16},backButton:{padding:8},buttonContainer:{flexDirection:"row",justifyContent:"space-between"},cancelButton:{flex:1,marginRight:8,backgroundColor:"#95A5A6"},moveButton:{flex:1,marginLeft:8}}),vt=function(e){var t=e.title,n=e.onPress,r=e.paragraph,i=e.updated,a=(0,o.useColorScheme)(),l=G(a),u=Ke(t),s="dark"===a?"#FFFFFF88":"#00000088";return(0,X.jsxs)(J.default,{style:{flexDirection:"row",maxWidth:"100%",flexBasis:0,flexGrow:1,flexWrap:"wrap",alignItems:"center"},children:[(0,X.jsx)(y.default,{onPress:function(){return n(u[0],2===u.length)},style:{maxWidth:"100%"},children:(0,X.jsx)(Oe.default,{style:[l.title,wt.title,r||2===u.length?{color:s}:{}],numberOfLines:1,children:u[0]})}),2===u.length&&(0,X.jsxs)(J.default,{style:{maxWidth:"100%",flexDirection:"row"},children:[(0,X.jsx)(Oe.default,{style:[l.title,wt.title,{flex:0}],children:"/"}),(0,X.jsx)(y.default,{onPress:function(){return n(t,!1)},children:(0,X.jsx)(Oe.default,{style:[l.title,wt.title,r?{color:s}:{}],numberOfLines:1,children:u[1]})})]}),(0,X.jsxs)(J.default,{style:{maxWidth:"100%",flexDirection:"row"},children:[!!r&&(0,X.jsx)(Oe.default,{style:[l.title,wt.title,{marginLeft:5}],numberOfLines:1,children:ce({title:"",paragraph:r})}),i&&(0,X.jsx)(Oe.default,{style:[l.text,wt.updated],children:"("+i+")"})]})]})},mt=function(e){var t=e.active,n=e.description,r=e.children,i=(0,h.useNavigation)(),a=(0,o.useColorScheme)(),l=G(a);return(0,X.jsxs)(J.default,{style:t&&n?[l.card,wt.card]:wt.inactiveCard,children:[(0,X.jsx)(E.EditorViewer,{active:!0,value:n||"",theme:a,onLink:function(e){return ae(e,i)},autoResize:!0}),r]})},jt=function(e){var t=e.toc,n=e.fullParagraph,r=e.paragraph,i=e.paragraphs,a=e.root,l=e.onPress,u=i.findIndex((function(e){return e.title===r})),s=(0,o.useColorScheme)(),c=G(s),d=bt(s),f=[{icon:"arrow-left",moveParagraph:i.findLast((function(e,t){var r;return t<u&&(!n||(null==(r=i[u])?void 0:r.level)>=e.level)})),reverse:!1},{icon:"arrow-right",moveParagraph:i.find((function(e,t){var r;return t>u&&(!n||(null==(r=i[u])?void 0:r.level)>=e.level)})),reverse:!0}];return t?(0,X.jsx)(ee,{data:i,path:r||"",root:a,onPress:l}):!!r&&(0,X.jsx)(J.default,{style:{flex:1,flexDirection:"row",justifyContent:"space-between",alignItems:"flex-end"},children:f.map((function(e){var t=e.moveParagraph,n=e.icon,r=e.reverse;return void 0!==t&&(0,X.jsxs)(y.default,{onPress:function(){return l(t)},style:[{flex:1,flexDirection:r?"row-reverse":"row",paddingVertical:16}],children:[(0,X.jsx)(j.default,{name:n,size:16,color:d,style:{alignSelf:"center"}}),(0,X.jsx)(Oe.default,{ellipsizeMode:"tail",style:[c.text,{fontWeight:"bold",marginHorizontal:16}],children:0===t.level?a:t.title})]},n)}))})},bt=function(e){return"dark"===e?"#E4E4E4":"#333333"},wt=v.default.create({title:{flex:1,fontSize:20},updated:{marginLeft:5,fontStyle:"italic"},card:{padding:0,marginBottom:0},inactiveCard:{flex:1,position:"absolute"}}),Ot=v.default.create({container:{paddingRight:12,scrollbarGutter:"stable"},contentContainer:{flexGrow:1},actionButtons:{flexDirection:"row",justifyContent:"flex-end",flexBasis:156},actionButton:{padding:8,marginLeft:8}}),Ct=n(55589),Pt=n(31692),St=function(){var e=(0,i.default)((function*(e){var t=new(0,(yield n.e(779).then(n.t.bind(n,39779,23))).default);for(var r of e.filter((function(e){var t;return((null==(t=e.description)?void 0:t.length)||0)>0})))t.file(r.title+".md",(0,E.toMarkdown)(r.description));var i=yield t.generateAsync({type:"blob"}),o=window.URL.createObjectURL(i),a=document.createElement("a");a.href=o,a.download="notebook.zip",document.body.appendChild(a),a.click(),setTimeout((function(){window.URL.revokeObjectURL(o)}),500),a.remove()}));return function(t){return e.apply(this,arguments)}}(),kt=function(){var e=(0,i.default)((function*(){var e=yield new Promise((function(e,t){var n=document.createElement("input");n.type="file",n.accept="application/zip,.md,.markdown",n.style.display="none",n.multiple=!0,n.onchange=function(){n.files&&n.files.length>0?e(Array.from(n.files)):t(new Error("\ud30c\uc77c\uc774 \uc120\ud0dd\ub418\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4."))},n.click()})),t=[],r=(yield n.e(779).then(n.t.bind(n,39779,23))).default;for(var i of e)if("application/zip"===i.type||i.name.endsWith(".zip")){var o=new r,a=(yield o.loadAsync(i)).files;for(var l in a){var u=o.files[l];u.dir||t.push({title:l.replace(/\.[^/.]+$/,""),description:(0,E.toHtml)((yield u.async("text")).toString())})}}else(i.name.endsWith(".md")||i.name.endsWith(".markdown"))&&t.push({title:i.name.replace(/\.[^/.]+$/,""),description:(0,E.toHtml)(yield i.text())});return t}));return function(){return e.apply(this,arguments)}}(),Et=function(e){var t=(0,o.useColorScheme)(),n=o.Colors[t].text;return(0,X.jsx)(o.TextButton,{title:e.title,textStyle:{fontSize:16,color:n,textDecorationLine:e.active?"underline":"none"},style:{borderRadius:20},onPress:e.onPress})};const Dt=function(){var e,t=(0,o.useLangContext)().lang,n=(0,b.useAuthContext)(),r=n.auth,u=n.dispatch,s=(0,o.useColorScheme)(),c=(0,h.useNavigation)(),d=G(s),p=H().data,g=_(),y=(0,l.useState)(!1),x=(0,f.default)(y,2),v=x[0],m=x[1],j=k().data,w=void 0===j?[]:j,C=function(){var e,t=(0,O.useQueryClient)(),n=(0,b.useAuthContext)().auth,r=n.isLocal?"":`${null==(e=n.user)?void 0:e.id}`;return(0,O.useMutation)({mutationFn:function(){var e=(0,i.default)((function*(){yield S(r,[])}));return function(){return e.apply(this,arguments)}}(),onSuccess:function(){var e=(0,i.default)((function*(){yield t.invalidateQueries({queryKey:["keywords",r]})}));return function(){return e.apply(this,arguments)}}()})}();return(0,X.jsxs)(J.default,{children:[(0,X.jsx)(J.default,{style:d.card,children:(0,X.jsx)(a.LanguageConfigSection,{})}),(0,X.jsx)(J.default,{style:d.card,children:(0,X.jsx)(a.SkinConfigSection,{})}),(0,X.jsx)(J.default,{style:d.card,children:(0,X.jsxs)(a.ConfigSection,{title:t("* Search Settings"),children:[(0,X.jsxs)(J.default,{style:{flexDirection:"row"},children:[(0,X.jsx)(Et,{title:t("Search History"),onPress:function(){return m(!v)},active:v}),v&&!!w.length&&(0,X.jsx)(Et,{title:t("Clear"),onPress:function(){return C.mutate()},active:!1})]}),v&&(0,X.jsx)(J.default,{style:[d.card,{padding:0}],children:(0,X.jsx)(fe,{filteredPages:w})})]})}),(0,X.jsx)(J.default,{style:d.card,children:(0,X.jsx)(a.ConfigSection,{title:t("* Archive"),children:(0,X.jsxs)(J.default,{style:{flexDirection:"row"},children:[(0,X.jsx)(Et,{title:t("Export"),onPress:function(){return p&&St(p)},active:!1}),(0,X.jsx)(Et,{title:t("Import"),onPress:function(){return kt().then((function(e){return e.forEach((function(e){return g.mutate(e)}))}))},active:!1}),!r.isLocal&&(0,X.jsx)(Et,{title:t("Changelog"),onPress:function(){return c.push("Archive",{})},active:!1})]})})}),(0,X.jsx)(J.default,{style:d.card,children:(0,X.jsx)(a.ConfigSection,{title:t("* Usage"),onPress:function(){return c.push("NoteViewer",{key:"Usage"})}})}),(0,X.jsxs)(J.default,{style:d.card,children:[(0,X.jsxs)(J.default,{style:{flexDirection:"row",alignItems:"center"},children:[(0,X.jsx)(a.ConfigSection,{title:t("* Account Settings")}),!r.isLocal&&(0,X.jsxs)(o.Text,{numberOfLines:1,ellipsizeMode:"tail",style:{marginLeft:4},children:["- ",null==(e=r.user)?void 0:e.username]})]}),(0,X.jsxs)(J.default,{style:{flexDirection:"row"},children:[!!r.user&&(0,X.jsx)(Et,{title:t("My Account"),onPress:function(){return r.isLocal&&u({type:"LOGOUT_LOCAL"})},active:!r.isLocal}),(0,X.jsx)(Et,{title:t("Local Account"),onPress:function(){return!r.isLocal&&u({type:"LOGIN_LOCAL"})},active:!!r.isLocal}),r.user?(0,X.jsx)(Et,{title:t("Sign out"),onPress:function(){return u({type:"LOGOUT_REQUEST"})},active:!1}):(0,X.jsx)(Et,{title:t("Sign in"),onPress:function(){return u({type:"LOGOUT_LOCAL"})},active:!1})]})]})]})};var Lt=function(){var e=(0,o.useColorScheme)(),t=(0,o.useLangContext)().lang;return(0,X.jsxs)(Pe.default,{style:{flex:1,backgroundColor:o.Colors[e].background},children:[(0,X.jsx)(Ct.default,{style:{},selectable:!1,children:t("Open Notes")}),(0,X.jsx)(nt,{type:"LAST"}),(0,X.jsx)(nt,{type:"PAGE"}),(0,X.jsx)(Ct.default,{style:{},selectable:!1,children:t("Event Notes")}),(0,X.jsx)(Ze,{}),(0,X.jsx)(et,{})]})},Tt=function(){return(0,X.jsx)(ft,{})},Ft=function(){var e=(0,o.useColorScheme)(),t=G(e);return(0,X.jsx)(Pe.default,{style:{flex:1},contentContainerStyle:[t.container,{backgroundColor:o.Colors[e].background}],children:(0,X.jsx)(Dt,{})})};var Nt=n(57917);function It(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Mt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?It(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):It(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Rt=function(e,t){return e.original.substring(0,e.index)+t+e.original.substring(e.index+e.text.length)},Bt=function(e,t,n,r){var i=xe()(e.dateStart).add(r?t:0,n).format(e.pattern),o=xe()(e.dateEnd).add(t,n).format(e.pattern);return Rt(e,e.format?e.format(i,o):o)},zt=function(e){var t=e.format;return[].concat((0,p.default)(e.pattern.includes("DD")?[{title:"+1d",onPress:function(){return e.replace(Bt(e,1,"day",!0))}},{title:"+2d",onPress:function(){return e.replace(Bt(e,2,"day",!0))}},{title:"+7d",onPress:function(){return e.replace(Bt(e,7,"day",!0))}}]:[]),[{title:"+1M",onPress:function(){return e.replace(Bt(e,1,"month",!0))}}],(0,p.default)(t?[{title:"+Period",onPress:function(){var n=xe()(e.dateStart),r=xe()(e.dateEnd),i=r.diff(n,"day");e.replace(Rt(e,t(n.add(i+1,"day").format(e.pattern),r.add(i+1,"day").format(e.pattern))))}},{title:"End date +1d",onPress:function(){return e.replace(Bt(e,1,"day",!1))}},{title:"End date +2d",onPress:function(){return e.replace(Bt(e,2,"day",!1))}},{title:"End date +7d",onPress:function(){return e.replace(Bt(e,7,"day",!1))}},{title:"End date +1M",onPress:function(){return e.replace(Bt(e,1,"month",!1))}}]:[]),[{title:"Delete",onPress:function(){return e.replace(Rt(e,""))}}])};const At=function(e){var t=new Date(Me()).getTime(),n=_(),r=Ne(e.title,e.paragraphs).flatMap((function(e){return Ie(e.dateMatches,t)})).flatMap((function(t){return t.matches.map((function(r){return Mt(Mt({},r),{},{original:t.original,replace:function(r){return n.mutate({title:e.title,description:e.paragraphs.map((function(e){return(e.path===t.path&&t.isHeader?e.header.replace(t.original,r):e.header)+(e.path!==t.path||t.isHeader?e.description:e.description.replace(t.original,r))})).join("")})}})}))})),i=(0,l.useState)(xe()()),o=(0,f.default)(i,2),a=o[0],u=o[1],s=(0,l.useState)(),c=(0,f.default)(s,2),d=c[0],p=c[1];return(0,l.useEffect)((function(){var e=setTimeout((function(){u(xe()())}),3e4);return function(){return clearTimeout(e)}}),[a]),(0,X.jsx)(J.default,{style:{height:0},children:(0,X.jsx)(J.default,{style:{flexDirection:"row",overflow:"hidden"},children:r.map((function(e,t){return(0,X.jsx)(Re,{data:e,buttons:zt,now:a,isExpand:t===d,toggleExpand:function(){return p(d===t?void 0:t)}},t)}))})})};var $t=n(15189);function Kt(e){var t=e.date,n=e.setDate,r=e.monthly,i=e.markedDateRange,a=(0,o.useColorScheme)(),l=G(a),u=(0,o.useModalsContext)().setModal,s=(0,o.useLangContext)().lang,c=function(e){return n(xe()(t).add(e,r?"month":"day").format("YYYY-MM-DD"))},d=v.default.create({container:{backgroundColor:l.container.backgroundColor,shadowColor:l.text.color,borderColor:l.card.borderColor},dateDisplay:{color:l.text.color},todayButton:{backgroundColor:l.searchButton.backgroundColor},navButton:{backgroundColor:"dark"===a?"#333333":"#efefef"}});return(0,X.jsxs)(J.default,{style:[Vt.container,d.container],children:[(0,X.jsx)(J.default,{style:l.flex}),(0,X.jsx)(J.default,{style:Vt.dateContainer,children:(0,X.jsx)(y.default,{onPress:function(){return u(be,{datetime:t,markedDateStrings:i,callback:function(e){return n(e||t)}})},children:(0,X.jsx)(o.Text,{style:[Vt.dateDisplay,d.dateDisplay],children:t})})}),(0,X.jsxs)(J.default,{style:Vt.navContainer,children:[(0,X.jsx)(y.default,{onPress:function(){return c(-1)},style:[Vt.navButton,d.navButton],children:(0,X.jsx)($t.default,{name:"chevron-left",size:16,color:l.text.color})}),(0,X.jsx)(y.default,{onPress:function(){return n(Me())},style:[Vt.todayButton,d.todayButton],accessibilityLabel:"Go to today",children:(0,X.jsx)(o.Text,{style:Vt.todayButtonText,children:s("Today")})}),(0,X.jsx)(y.default,{onPress:function(){return c(1)},style:[Vt.navButton,d.navButton],children:(0,X.jsx)($t.default,{name:"chevron-right",size:16,color:l.text.color})})]})]})}var Vt=v.default.create({container:{width:"100%",alignSelf:"center",flexDirection:"row",justifyContent:"flex-end",padding:16,borderRadius:8,shadowOffset:{width:0,height:2},shadowOpacity:.1,shadowRadius:4,elevation:2,borderWidth:1},dateContainer:{flex:1,minWidth:130,height:30,alignItems:"center",justifyContent:"center"},dateDisplay:{fontSize:20,fontWeight:"bold"},navContainer:{flex:1,minWidth:150,flexDirection:"row",justifyContent:"flex-end"},navButton:{width:30,height:30,justifyContent:"center",alignItems:"center",marginHorizontal:8,borderRadius:8,padding:8},todayButton:{alignItems:"center",justifyContent:"center",alignSelf:"center",paddingHorizontal:12,paddingVertical:6,borderRadius:6},todayButtonText:{fontSize:14,color:"#ffffff",fontWeight:"bold"}});function qt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Wt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qt(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ht=function(e){return e.isLocal?"Blacktokki Notebook - Local":"Blacktokki Notebook"},Yt={Home:{title:Ht,component:function(e){e.navigation,e.route;var t=(0,o.useColorScheme)(),n=G(t),r=(0,b.useAuthContext)().auth.isLocal?"Blacktokki Notebook - Local":"Blacktokki Notebook",i=(0,l.useMemo)((function(){return[{title:"Discovery",component:Lt,icon:(0,X.jsx)(u.default,{icon:"compass"}),headerRight:function(){return(0,X.jsx)(X.Fragment,{})}},{title:"All Notes",component:Tt,icon:(0,X.jsx)(u.default,{icon:"notebook"}),headerRight:function(){return(0,X.jsx)(X.Fragment,{})}},{title:"Config",component:Ft,icon:(0,X.jsx)(u.default,{icon:"dots-horizontal"}),headerRight:function(){return(0,X.jsx)(X.Fragment,{})}}]}),[]);return(0,X.jsx)(a.HomeSection,{tabViews:i,homeView:{title:r,headerRight:function(){return(0,X.jsx)(pe,{})}},headerTitle:r,children:(0,X.jsxs)(J.default,{style:[n.container,{width:"100%",justifyContent:"space-between"}],children:[(0,X.jsx)(Dt,{}),(0,X.jsx)(o.ContractFooter,{buttons:[{icon:(0,X.jsx)(Pt.default,{name:"github",size:24,color:o.Colors[t].iconColor}),url:"https://github.com/blacktokki/blacktokki-notebook",isWeb:!0},{icon:(0,X.jsx)(Pt.default,{name:"mail",size:24,color:o.Colors[t].iconColor}),url:"mailto:ydh051541@naver.com",isWeb:!1}]})]})})},path:"home"},NotePage:{title:Ht,component:function(){var e,t=(0,h.useIsFocused)(),n=(0,h.useRoute)(),r=n.params,a=r.title,u=r.paragraph,s=r.archiveId,c=(0,h.useNavigation)(),d=(0,o.useColorScheme)(),p=(0,o.useResizeContext)(),g=(0,o.useLangContext)().lang,x=G(d),v=(0,l.useState)(!1),m=(0,f.default)(v,2),w=m[0],C=m[1],P=(0,l.useState)(!1),S=(0,f.default)(P,2),k=S[0],E=S[1],D=Y(a),T=D.data,F=D.isFetching,N=function(e){var t=(0,b.useAuthContext)().auth;return(0,O.useQuery)({queryKey:["snapshotContent",!t.isLocal,e],queryFn:function(){var n=(0,i.default)((function*(){return t.isLocal||void 0===e?void 0:yield L(e)}));return function(){return n.apply(this,arguments)}}()})}(s),I=N.data,M=(null==T?void 0:T.description)!==(null==I?void 0:I.description)?I:void 0,R=function(){c.navigate("EditPage",{title:a})},B=Z((null==T?void 0:T.description)||""),z=B.find((function(e){return e.title===u})),A=(0,l.useState)(),$=(0,f.default)(A,2),K=$[0],V=$[1];(0,l.useEffect)((function(){var e;V(M?M.description:u?k?Ve(B,u,!0).trim():null==z?void 0:z.description:null==T||null==(e=T.description)?void 0:e.trim())}),[T,M,u,k]),(0,l.useEffect)((function(){C(!1)}),[n]);var q=bt(d);return t&&(0,X.jsxs)(X.Fragment,{children:["portrait"===p&&(0,X.jsx)(pe,{}),(0,X.jsxs)(Pe.default,{style:[x.container,Ot.container],contentContainerStyle:Ot.contentContainer,children:[(0,X.jsxs)(J.default,{style:[x.header,{zIndex:1,alignItems:"flex-start"}],children:[(0,X.jsx)(vt,{title:a,paragraph:u,updated:null==M?void 0:M.updated,onPress:function(e,t){return(t?c.push:c.navigate)("NotePage",{title:e})}}),(0,X.jsxs)(J.default,{style:Ot.actionButtons,children:[(0,X.jsx)(At,{title:(null==T?void 0:T.title)||"",paragraphs:B}),!u&&(0,X.jsx)(X.Fragment,{children:(0,X.jsx)(y.default,{onPress:function(){return c.navigate("Archive",{title:a})},style:Ot.actionButton,children:(0,X.jsx)(j.default,{name:"history",size:16,color:q})})}),!!u&&(0,X.jsx)(X.Fragment,{children:(0,X.jsx)(y.default,{onPress:function(){return E(!k)},style:Ot.actionButton,children:(0,X.jsx)(j.default,{name:k?"compress":"expand",size:16,color:q})})}),!(!u&&!K)&&!M&&(0,X.jsxs)(X.Fragment,{children:[(0,X.jsx)(y.default,{onPress:function(){return C(!w)},style:Ot.actionButton,children:(0,X.jsx)(j.default,{name:"list",size:16,color:q})}),(0,X.jsx)(y.default,{onPress:function(){c.navigate("MovePage",{title:a,paragraph:u})},style:Ot.actionButton,children:(0,X.jsx)(j.default,{name:"exchange",size:16,color:q})})]}),!(!u&&!K)&&!M&&!u&&(0,X.jsx)(X.Fragment,{children:(0,X.jsx)(y.default,{onPress:R,style:Ot.actionButton,children:(0,X.jsx)(j.default,{name:"pencil",size:16,color:q})})})]})]}),(0,X.jsxs)(J.default,{style:x.flex,children:[(0,X.jsx)(mt,{active:!w,description:K,children:!!u&&!k&&0===(null==z||null==(e=z.description)?void 0:e.trim().length)&&(0,X.jsx)(J.default,{style:{position:"absolute",width:"100%"},children:(0,X.jsxs)(J.default,{style:[x.card,x.centerContent],children:[(0,X.jsx)(Oe.default,{style:x.text,children:g("There is no direct content in this paragraph.")}),(0,X.jsx)(y.default,{onPress:function(){return E(!0)},style:x.button,children:(0,X.jsx)(Oe.default,{style:x.buttonText,children:g("View subparagraph")})})]})})}),F||void 0===K?(0,X.jsx)(J.default,{style:[x.card,x.centerContent],children:(0,X.jsx)(Nt.default,{size:"large",color:"#3498DB"})}):null!=T&&T.description?(0,X.jsx)(jt,{toc:w,fullParagraph:k,root:a,paragraph:u,paragraphs:B,onPress:function(e){return c.navigate("NotePage",0===e.level?{title:a}:{title:a,paragraph:e.title})}}):(0,X.jsxs)(J.default,{style:[x.card,x.centerContent],children:[(0,X.jsx)(Oe.default,{style:x.text,children:g("This note has no content yet. Press the \u2018Edit\u2019 button to add content.")}),(0,X.jsx)(y.default,{onPress:R,style:x.button,children:(0,X.jsx)(Oe.default,{style:x.buttonText,children:g("Edit")})})]})]})]})]})},path:"page"},EditPage:{title:Ht,component:function(){var e,t=(0,h.useRoute)(),n=(0,h.useIsFocused)(),r=t.params.title,a=(0,h.useNavigation)(),u=(0,o.useColorScheme)(),s=G(u),c=(0,o.useLangContext)().lang,d=Y(r),g=d.data,x=d.isLoading,v=H().data,m=void 0===v?[]:v,j=(0,l.useState)(""),b=(0,f.default)(j,2),w=b[0],O=b[1],C=_(),P=(0,o.useModalsContext)().setModal,S=(0,l.useRef)(),k=function(){a.canGoBack()?a.goBack():a.navigate("NotePage",{title:r})},D=function(){if(void 0!==S.current){var e=S.current.title;C.mutate({title:e,description:w},{onSuccess:function(){S.current=void 0,a.navigate("NotePage",{title:e})},onError:function(e){gt.default.alert("\uc624\ub958",e.message||"\ubb38\uc11c\ub97c \uc800\uc7a5\ud558\ub294 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}})}},L=function(){P(ge,{type:"UNSAVED",callbacks:[D,function(){var e;r===(null==(e=S.current)?void 0:e.title)&&void 0!==(null==g?void 0:g.description)&&O(null==g?void 0:g.description),S.current=void 0,k()}]})};r===(null==(e=S.current)?void 0:e.title)&&(S.current.unsaved=(null==g?void 0:g.description)!==w);var T=function(){return void 0!==S.current&&S.current.unsaved};return(0,l.useEffect)((function(){x||void 0===(null==g?void 0:g.description)||T()||(S.current={title:r,unsaved:!1},O(g.description))}),[x,g]),function(e,t,n){var r=(0,h.useNavigation)(),i=(0,h.useRoute)().params.title;(0,l.useEffect)((function(){return r.addListener("beforeRemove",(function(n){if(e())if(n.preventDefault(),"NAVIGATE"!==n.data.action.type)t();else{var i=n.data.action.payload;r.push(i.name,i.params)}}))}),[r]),(0,l.useEffect)((function(){e()&&n()!==i&&(r.setParams({title:n()}),t())}),[r,i]),(0,l.useEffect)((function(){var t=function(t){e()&&(t.preventDefault(),t.returnValue="")};return window.addEventListener("beforeunload",t),function(){return window.removeEventListener("beforeunload",t)}}),[])}(T,L,(function(){var e;return null==(e=S.current)?void 0:e.title})),n&&(0,X.jsxs)(J.default,{style:s.container,children:[(0,X.jsx)(J.default,{style:s.header,children:(0,X.jsxs)(Oe.default,{style:[s.title,{flex:1}],children:[r," - \ud3b8\uc9d1"]})}),(0,X.jsx)(E.Editor,{active:!0,value:w,setValue:O,theme:u,autoComplete:[{trigger:"[",getMatchedChars:function(){var e=(0,i.default)((function*(e){var t,n=(t=e,m.filter((function(e){return e.title.startsWith(r+"/")})).map((function(e){return{type:"_CHILDNOTE",name:e.title.split(r+"/")[1],title:e.title}})).filter((function(e){return e.name.toLowerCase().startsWith(t.toLowerCase())})));return[{type:"_NOTELINK",name:e,title:r,paragraph:e}].concat((0,p.default)(n.length?n:[{type:"_CHILDNOTE",name:e,title:r+"/"+e}]),(0,p.default)(ue(m,e).filter((function(e){return"_LINK"!==e.type})))).map((function(e){var t="_NOTELINK"===e.type||"_CHILDNOTE"===e.type?e.name:e.title;return{text:t+("_NOTELINK"===e.type?`(${ce(e)})`:"_CHILDNOTE"===e.type?`(${e.title})`:""),value:`<a href=${encodeURI("_NOTELINK"===e.type&&e.paragraph?`?title=${e.title}&paragraph=${e.paragraph}`:`?title=${e.title}`)}>${t}</a>`}}))}));return function(t){return e.apply(this,arguments)}}()},{trigger:"http",getMatchedChars:function(){var e=(0,i.default)((function*(e){var t="http"+e,n=new URL(t);if("http:"!==n.protocol&&"https:"!==n.protocol)return[];var r=yield I({query:t});return r.title?[{text:r.title,value:`<a href=${r.url}>${r.title}</a>`}]:[]}));return function(t){return e.apply(this,arguments)}}()}]}),(0,X.jsxs)(J.default,{style:yt.buttonContainer,children:[(0,X.jsx)(y.default,{style:[s.button,yt.cancelButton],onPress:T()?L:k,children:(0,X.jsx)(Oe.default,{style:s.buttonText,children:c("cancel")})}),(0,X.jsx)(y.default,{style:[s.button,yt.saveButton],onPress:D,children:(0,X.jsx)(Oe.default,{style:s.buttonText,children:c("save")})})]})]})},path:"edit"},MovePage:{title:Ht,component:function(){var e,t=(0,h.useRoute)().params,n=t.title,r=t.paragraph,a=(0,h.useNavigation)(),u=(0,o.useColorScheme)(),s=(0,o.useResizeContext)(),c=(0,o.useLangContext)().lang,d=(0,l.useState)(n),g=(0,f.default)(d,2),x=g[0],v=g[1],m=Y(n),j=m.data,w=m.isLoading,C=Z((null==j?void 0:j.description)||""),P=(null==(e=C.find((function(e){return e.title===r})))?void 0:e.path)||"",S=Y(x).data,k=Z((null==S?void 0:S.description)||"").filter((function(e){return n!==x||P===e.path||!e.path.startsWith(P)})),D=(0,l.useState)(""),L=(0,f.default)(D,2),T=L[0],F=L[1],N=(0,l.useState)(),I=(0,f.default)(N,2),M=I[0],B=I[1],z=G(u),A=_(),$=function(){var e=(0,O.useQueryClient)(),t=H().data,n=void 0===t?[]:t,r=(0,b.useAuthContext)().auth;return(0,O.useMutation)({mutationFn:function(){var e=(0,i.default)((function*(e){var t=e.oldTitle,i=e.newTitle,o=e.description,a=n.find((function(e){return e.title===t}));if(!a)throw new Error("Page not found");if(n.some((function(e){return e.title===i})))throw new Error("Page with new title already exists");var l=n.map((function(e){return e.title===t?R(R({},e),{},{title:i,description:o||a.description}):e}));yield V(!r.isLocal,l,a.id);var u=(yield q()).map((function(e){return e===t?i:e}));return yield W(u),{oldTitle:t,newTitle:i}}));return function(t){return e.apply(this,arguments)}}(),onSuccess:function(t){e.invalidateQueries({queryKey:["pageContents"]}),e.invalidateQueries({queryKey:["snapshotContents"]}),e.invalidateQueries({queryKey:["snapshotContent"]}),e.invalidateQueries({queryKey:["pageContent",t.oldTitle]}),e.invalidateQueries({queryKey:["pageContent",t.newTitle]}),e.invalidateQueries({queryKey:["recentPages"]})}})}(),K=(0,l.useMemo)((function(){var e,t=C.filter((function(e){return e.path.startsWith(P)})),n=(null==S?void 0:S.title)===(null==j?void 0:j.title)+"/"+(null==(e=t[0])?void 0:e.title),r=t.map((function(e,t){return(n&&0===t?"":e.header)+e.description})).join(""),i=C.filter((function(e){return!e.path.startsWith(P)})),o=i.map((function(e){return e.header+e.description})).join(""),a=(null==j?void 0:j.title)===(null==S?void 0:S.title)?i:k,l=a.findLastIndex((function(e){return e.path.startsWith(T)}));return{sourceDescription:o,targetDescription:void 0===(null==S?void 0:S.id)?r:[].concat((0,p.default)(a.slice(0,l+1).map((function(e){return e.header+e.description}))),(0,p.default)(t.map((function(e,t){return(e.path===P&&""===e.description||n&&0===t?"":e.header)+e.description}))),(0,p.default)(a.slice(l+1).map((function(e){return e.header+e.description})))).join("")}}),[C,k,P,T]),Q=K.sourceDescription,U=K.targetDescription,te=function(){a.canGoBack()?a.goBack():a.navigate("NotePage",{title:n})};(0,l.useEffect)((function(){w||j||te(),j&&v(j.title+(r?`/${r}`:""))}),[j,w]),(0,l.useEffect)((function(){w||F(r?"":P)}),[r,w]);var ne=C.find((function(e){return e.path===P})),re=k.find((function(e){return e.path===T})),ie=!x.trim()||void 0===re;return(0,X.jsx)(Pe.default,{style:z.container,children:(0,X.jsxs)(J.default,{style:z.card,children:[(0,X.jsxs)(J.default,{style:{flexDirection:"landscape"===s?"row":"column",zIndex:1},children:[(0,X.jsxs)(J.default,{style:{zIndex:1},children:[(0,X.jsx)(Oe.default,{style:z.text,children:c(r?"Current note title and paragraph:":"Current note title:")}),(0,X.jsx)(Oe.default,{style:[z.title,xt.columns],children:ce({title:n,paragraph:r})}),(0,X.jsx)(Oe.default,{style:z.text,children:c("New note title and paragraph:")}),(0,X.jsx)(pe,{onPress:v,addKeyword:!1,useRandom:!1}),(0,X.jsx)(J.default,{style:xt.columns,children:(0,X.jsx)(ee,{path:T,onPress:function(e){return F(e.path)},root:(null==S?void 0:S.title)||"",data:k})})]}),(0,X.jsxs)(J.default,{style:{flex:1},children:[(0,X.jsxs)(Oe.default,{style:z.text,children:[" ",c("Preview:")]}),(0,X.jsxs)(y.default,{style:[z.button,xt.moveButton,{flex:0,flexDirection:"row",alignItems:"center",paddingTop:24,paddingBottom:16}],onPress:function(){return B(!M)},children:[(0,X.jsx)(Oe.default,{style:z.title,children:ce({title:n,paragraph:null==ne?void 0:ne.title})}),(0,X.jsx)(Oe.default,{style:[z.text,{marginBottom:8,fontSize:14}],children:" \u279c "}),(0,X.jsx)(Oe.default,{style:z.title,children:ce({title:x,paragraph:null==re?void 0:re.title})})]}),void 0!==M&&(0,X.jsx)(J.default,{style:{display:M?"flex":"none"},children:(0,X.jsx)(E.EditorViewer,{active:!0,value:U,theme:u,onLink:function(e){return ae(e,a)},autoResize:!0})})]})]}),(0,X.jsxs)(J.default,{style:xt.buttonContainer,children:[(0,X.jsx)(y.default,{style:[z.button,xt.cancelButton],onPress:te,children:(0,X.jsx)(Oe.default,{style:z.buttonText,children:c("cancel")})}),(0,X.jsx)(y.default,{style:[z.button,ie?xt.cancelButton:xt.moveButton],onPress:function(){void 0===(null==S?void 0:S.id)?$.mutate({oldTitle:n,newTitle:x.trim(),description:""===P?void 0:U},{onSuccess:function(e){a.navigate({name:"NotePage",params:{title:e.newTitle}})},onError:function(e){gt.default.alert(c("error"),e.message||c("An error occurred while moving note."))}}):((null==j?void 0:j.title)===S.title&&P===T&&te(),A.mutate({title:S.title,description:U},{onSuccess:function(e){(null==j?void 0:j.title)!==S.title&&A.mutate({title:n,description:Q}),a.navigate({name:"NotePage",params:{title:e.title}})},onError:function(e){gt.default.alert(c("error"),e.message||c("An error occurred while moving note."))}}))},disabled:ie,children:(0,X.jsx)(Oe.default,{style:z.buttonText,children:c("move")})})]})]})})},path:"move"},RecentPages:{title:Ht,component:function(){var e=(0,o.useResizeContext)();return(0,X.jsxs)(X.Fragment,{children:["portrait"===e&&(0,X.jsx)(pe,{}),(0,X.jsx)(ft,{})]})},path:"recent"},Problem:{title:Ht,component:function(){var e=(0,o.useResizeContext)(),t=(0,h.useNavigation)(),n=Qe(1),r=n.data,i=n.isLoading;return(0,X.jsxs)(X.Fragment,{children:["portrait"===e&&(0,X.jsx)(pe,{}),(0,X.jsx)(Ce,{contents:r,onPress:function(e){return t.push("EditPage",{title:e})},isLoading:i,emptyMessage:"There are no notes needed to be written."})]})},path:"problem"},Archive:{title:Ht,component:function(){var e,t=(0,h.useNavigation)(),n=(0,h.useRoute)(),r=(0,o.useResizeContext)(),a=null==(e=n.params)?void 0:e.title,l=Y(a||"").data,u=function(e){var t=(0,b.useAuthContext)().auth;return(0,O.useInfiniteQuery)({queryKey:["snapshotContents",!t.isLocal,e],queryFn:function(){var n=(0,i.default)((function*(n){var r=n.pageParam;return yield K({isOnline:!t.isLocal,type:"SNAPSHOT",parentId:e,page:r||0})}));return function(e){return n.apply(this,arguments)}}(),getNextPageParam:function(e,t){return null!=e&&e.length?t.length:void 0},refetchOnReconnect:!1,refetchOnWindowFocus:!1})}(null==l?void 0:l.id),s=u.data,c=void 0===s?{pages:[]}:s,d=u.isLoading,f=u.fetchNextPage;return(0,X.jsxs)(X.Fragment,{children:["portrait"===r&&(0,X.jsx)(pe,{}),(0,X.jsx)(Ce,{contents:c.pages.flat().filter((function(e){return void 0===a||a===e.title})).map((function(e,t){return ht(ht({},e),{},{subtitles:[`\ucd5c\uadfc \uc218\uc815: ${at(e.updated)}`],id:e.id||t})})),isLoading:d,onPress:function(e,n,r){return(void 0===e?t.push:t.navigate)("NotePage",{title:e,archiveId:r})},emptyMessage:"There are no recently modified notes.",onScrollEnd:f})]})},path:"archive"},TimeLine:{title:Ht,component:function(){var e=(0,h.useNavigation)(),t=(0,o.useColorScheme)(),n=G(t),r=(0,o.useResizeContext)(),i=(0,l.useState)(Me()),a=(0,f.default)(i,2),u=a[0],s=a[1],c=Ge(u),d=c.data,p=c.preData,g=c.isLoading,y=p.flatMap((function(e){return e.dateMatches.flatMap((function(e){return e.matches}))}));return(0,X.jsxs)(X.Fragment,{children:["portrait"===r&&(0,X.jsx)(pe,{}),(0,X.jsx)(J.default,{style:[Wt(Wt({},n.container),{},{flex:void 0,paddingBottom:0})],children:(0,X.jsx)(Kt,{date:u,setDate:s,markedDateRange:y})}),(0,X.jsx)(Ce,{contents:d,onPress:function(t,n){return e.push("NotePage",{title:t,paragraph:n})},isLoading:g,emptyMessage:"There are no notes."})]})},path:"timeline"},NoteViewer:{title:Ht,component:function(){var e=(0,h.useIsFocused)(),t=(0,h.useRoute)(),n=t.params,r=n.key,a=n.paragraph,u=(0,h.useNavigation)(),s=(0,o.useColorScheme)(),c=(0,o.useResizeContext)(),d=G(s),p=(0,l.useState)(!1),g=(0,f.default)(p,2),x=g[0],v=g[1],m=(0,l.useState)(!1),b=(0,f.default)(m,2),w=b[0],C=b[1],P=function(){var e=(0,o.useLangContext)(),t=e.lang,n=e.locale;return(0,O.useQuery)({queryKey:["viewerContents",n],queryFn:function(){var e=(0,i.default)((function*(){return yield Promise.all(["Usage"].map(function(){var e=(0,i.default)((function*(e){var n=t(e),r=yield fetch("/blacktokki-notebook/"+n+".md");return{key:e,description:(0,E.toHtml)(yield r.text())}}));return function(t){return e.apply(this,arguments)}}()))}));return function(){return e.apply(this,arguments)}}()})}(),S=P.data,k=null==S?void 0:S.find((function(e){return e.key===r})),D=Z((null==k?void 0:k.description)||""),L=(0,l.useState)(),T=(0,f.default)(L,2),F=T[0],N=T[1];(0,l.useEffect)((function(){var e,t;N(a?w?Ve(D,a,!0):null==(e=D.find((function(e){return e.title===a})))?void 0:e.description:null==k||null==(t=k.description)?void 0:t.trim())}),[k,a,w]),(0,l.useEffect)((function(){v(!1)}),[t]);var I=bt(s);return e&&(0,X.jsxs)(X.Fragment,{children:["portrait"===c&&(0,X.jsx)(pe,{}),(0,X.jsxs)(Pe.default,{style:[d.container,Ot.container],contentContainerStyle:Ot.contentContainer,children:[(0,X.jsxs)(J.default,{style:[d.header,{zIndex:1,alignItems:"flex-start"}],children:[(0,X.jsx)(vt,{title:r,paragraph:a,pressable:!1,onPress:function(e,t){return(t?u.push:u.navigate)("NoteViewer",{key:e})}}),(0,X.jsxs)(J.default,{style:Ot.actionButtons,children:[!!a&&(0,X.jsx)(X.Fragment,{children:(0,X.jsx)(y.default,{onPress:function(){return C(!w)},style:Ot.actionButton,children:(0,X.jsx)(j.default,{name:w?"compress":"expand",size:16,color:I})})}),!(!a&&!F)&&(0,X.jsx)(X.Fragment,{children:(0,X.jsx)(y.default,{onPress:function(){return v(!x)},style:Ot.actionButton,children:(0,X.jsx)(j.default,{name:"list",size:16,color:I})})})]})]}),(0,X.jsxs)(J.default,{style:d.flex,children:[(0,X.jsx)(mt,{active:!x,description:F}),(0,X.jsx)(jt,{toc:x,fullParagraph:w,root:r,paragraph:a,paragraphs:D,onPress:function(e){return u.navigate("NoteViewer",0===e.level?{key:r}:{key:r,paragraph:e.title})}})]})]})]})},path:"viewer"}},Qt=n(52990);function _t(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ut(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_t(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_t(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Gt=function(){var e=(0,o.useLangContext)().lang;return(0,X.jsxs)(o.View,{style:{flex:1},children:[(0,X.jsx)(ke.default,{left:function(e){return(0,X.jsx)(u.default,Ut(Ut({},e),{},{icon:"home"}))},title:e("Home"),onPress:function(){return(0,a.push)("Home")}}),(0,X.jsx)(Ze,{}),(0,X.jsx)(et,{}),(0,X.jsxs)(Pe.default,{style:"web"===Qt.default.OS?{scrollbarWidth:"thin"}:{},children:[(0,X.jsx)(Ct.default,{style:{},selectable:!1,children:e("Open Notes")}),(0,X.jsx)(nt,{type:"LAST"}),(0,X.jsx)(nt,{type:"PAGE"}),(0,X.jsx)(Ct.default,{style:{flex:1},selectable:!1,children:e("Recent Changes")}),(0,X.jsx)(nt,{type:"NOTE",noteCount:10})]})]})};function Jt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Xt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Jt(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Zt=function(){return"landscape"===(0,o.useResizeContext)()?(0,X.jsx)(pe,{}):void 0},en=function(){var e=(0,i.default)((function*(){var e=yield Promise.all([n.e(928),n.e(973)]).then(n.bind(n,49928));return{main:Yt,login:a.login,prefixes:[e.makeUrl("/")],rootPath:"blacktokki-notebook",documentTitle:{formatter:function(){return"blacktokki-notebook"}},rootScreen:{main:"Home",login:"LoginScreen"},headerLeftIcon:(0,X.jsx)(u.default,{icon:"backburger",style:{left:-18,top:-14}}),headerRight:(0,X.jsx)(Zt,{}),modals:we,drawer:(0,X.jsx)(Gt,{})}}));return function(){return e.apply(this,arguments)}}();const tn=function(){var e=(0,o.useColorScheme)(),t="dark"===e?s.MD2DarkTheme:c.MD2LightTheme,n=Xt(Xt({},t),{},{colors:Xt(Xt({},t.colors),{},{primary:o.Colors[e].text})}),r=l.lazy((function(){return en().then((function(e){return{default:function(){return(0,X.jsx)(a.Navigation,{config:e})}}}))}));return(0,X.jsx)(d.default,{theme:n,children:(0,X.jsx)(l.Suspense,{fallback:(0,X.jsx)(X.Fragment,{}),children:(0,X.jsx)(r,{})})})}}}]);
//# sourceMappingURL=483.565b9a02.chunk.js.map