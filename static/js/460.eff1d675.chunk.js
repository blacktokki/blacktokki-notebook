"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[460],{2460:(e,t,n)=>{n.r(t),n.d(t,{default:()=>be});var r=n(4586),i=n(6330),o=n(9399),a=n(4429),u=n(689),l=n(7904),c=n(5346),s=n(3717),d=n(5225),f=n(863),g=n(4807),p=n(3705),y=n(8111),h=n(5209),x=n(8594),m=(0,x.axiosCreate)("notebook"),v=(function(){var e=(0,i.default)((function*(e){return(yield m.get(`/api/v1/content/${e}`)).data}))}(),function(){var e=(0,i.default)((function*(e,t){var n=void 0!==e?`&parentId=${e}`:"",r=void 0!==t?`&type=${t}`:"";return(yield m.get(`/api/v1/content?self=true&size=256${n}${r}`)).data.value}));return function(t,n){return e.apply(this,arguments)}}()),j=function(){var e=(0,i.default)((function*(e){return(yield m.post("/api/v1/content",e)).data.id}));return function(t){return e.apply(this,arguments)}}(),b=function(){var e=(0,i.default)((function*(e){var t=e.id,n=e.updated;yield m.patch("/api/v1/content",{ids:[t],updated:n})}));return function(t){return e.apply(this,arguments)}}(),k=(function(){var e=(0,i.default)((function*(e){yield m.delete(`/api/v1/content/${e}`)}))}(),/https?:\/\/(?:www\\.)?[-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b(?:[-a-zA-Z0-9()@:%_\+.~#?&\/=]*)/gi),C=function(e){return function(e,t){for(var n,r=t,i=0,o=[];null!=(n=new RegExp(e).exec(r));){o.push({index:i,str:r.substring(0,n.index)});var a=n.index+n[0].length;o.push({index:i+n.index,str:r.substring(n.index,a)}),i+=a,r=r.substring(a)}return o.push({index:i,str:r}),o}(k,e).filter((function(e,t){return t%2==1})).map((function(e){return e.str}))};!function(){var e=(0,i.default)((function*(e){var t=[];for(var n of C(e.query))t.push((yield m.get(`/api/v1/preview/autocomplete?query=${n}`)).data);return t}))}();function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var P,E="@blacktokki:notebook:contents",F="@blacktokki:recent_pages",S=function(){var e=(0,i.default)((function*(){return(yield v()).filter((function(e){return"NOTE"===e.type||"BOOKMARK"===e.type}))}));return function(){return e.apply(this,arguments)}}(),B=function(){var e=(0,i.default)((function*(e,t){var n=e.find((function(e){return t===e.id}));n&&(yield t?b({id:t,updated:n}):j(n));try{var r=JSON.stringify(e);yield h.default.setItem(E,r)}catch(i){console.error("Error saving page contents",i)}}));return function(t,n){return e.apply(this,arguments)}}(),T=function(){var e=(0,i.default)((function*(){try{var e=yield h.default.getItem(F);return e?JSON.parse(e):[]}catch(t){return console.error("Error loading recent pages",t),[]}}));return function(){return e.apply(this,arguments)}}(),D=function(){var e=(0,i.default)((function*(e){try{var t=JSON.stringify(e);yield h.default.setItem(F,t)}catch(n){console.error("Error saving recent pages",n)}}));return function(t){return e.apply(this,arguments)}}(),N=function(){return(0,y.useQuery)({queryKey:["pageContents"],queryFn:S})},R=function(e){var t=(0,y.useQueryClient)();return(0,y.useQuery)({queryKey:["pageContent",e],queryFn:function(){var n=(0,i.default)((function*(){var n=(yield S()).find((function(t){return t.title===e}));n&&(void 0===(yield T()).find((function(t){return t===e}))&&(P=e,yield t.invalidateQueries({queryKey:["lastPage"]})));return n||{title:e,description:""}}));return function(){return n.apply(this,arguments)}}()})},I=function(){return(0,y.useQuery)({queryKey:["lastPage"],queryFn:function(){var e=(0,i.default)((function*(){return(yield S()).find((function(e){return e.title===P}))}));return function(){return e.apply(this,arguments)}}()})},z=function(){var e=(0,y.useQueryClient)();return(0,y.useMutation)({mutationFn:function(){var e=(0,i.default)((function*(e){var t=(yield T()).filter((function(t){return e!==t}));return P=void 0,yield D(t),{title:e}}));return function(t){return e.apply(this,arguments)}}(),onSuccess:function(t){e.invalidateQueries({queryKey:["recentPages"]}),e.invalidateQueries({queryKey:["pageContent"]}),e.invalidateQueries({queryKey:["lastPage"]})}})},q=function(e){return f.default.create({container:{flex:1,backgroundColor:"dark"===e?"#121212":"#FFFFFF",padding:16},card:{backgroundColor:"dark"===e?"#1E1E1E":"#FFFFFF",borderRadius:8,padding:16,marginBottom:16,borderWidth:1,borderColor:"dark"===e?"#333333":"#EEEEEE",shadowColor:"dark"===e?"#000000":"#888888",shadowOffset:{width:0,height:2},shadowOpacity:.1,shadowRadius:4,elevation:2},title:{fontSize:18,fontWeight:"bold",marginBottom:8,color:"dark"===e?"#FFFFFF":"#000000"},text:{fontSize:16,color:"dark"===e?"#E4E4E4":"#333333",lineHeight:24},button:{backgroundColor:"dark"===e?"#2C73B5":"#3498DB",borderRadius:4,padding:12,alignItems:"center",marginVertical:8},buttonText:{color:"#FFFFFF",fontWeight:"500",fontSize:16},input:{backgroundColor:"dark"===e?"#222222":"#FFFFFF",borderWidth:1,borderColor:"dark"===e?"#444444":"#CCCCCC",borderRadius:4,padding:10,color:"dark"===e?"#E4E4E4":"#333333",marginBottom:16},separator:{height:1,backgroundColor:"dark"===e?"#333333":"#EEEEEE",marginVertical:12},smallText:{fontSize:14,color:"dark"===e?"#BBBBBB":"#777777"},header:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",marginBottom:16},flex:{flex:1},row:{flexDirection:"row",alignItems:"center"},centerContent:{justifyContent:"center",alignItems:"center"}})},L=n(3185),Q=n(2184),K=n(575),H=f.default.create({buttonContainer:{flexDirection:"row",justifyContent:"space-between"},cancelButton:{flex:1,marginRight:8,backgroundColor:"#95A5A6"},saveButton:{flex:1,marginLeft:8}}),V=n(9367),A=n(205),M=n(6579),G=n(48),W=n(4342);function $(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function J(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Z=function(e){var t,n=(0,L.useLangContext)().lang,r=N(),u=(0,y.useQuery)({queryKey:["recentPages"],queryFn:function(){var e=(0,i.default)((function*(){var e=yield T(),t=yield S();return e.map((function(e){return t.find((function(t){return t.title===e}))})).filter((function(e){return void 0!==e}))}));return function(){return e.apply(this,arguments)}}()}),l=I().data,c=o.useRef(),s=function(){var e=(0,y.useQueryClient)();return(0,y.useMutation)({mutationFn:function(){var e=(0,i.default)((function*(e){var t=e.title,n=e.direct,r=yield T();if(void 0===r.find((function(e){return e===t}))||n){var i=[t].concat((0,p.default)(r));yield D(i)}return{title:t}}));return function(t){return e.apply(this,arguments)}}(),onSuccess:function(t){e.invalidateQueries({queryKey:["recentPages"]})}})}(),d=z(),f="NOTE"===e.type?null==(t=r.data)?void 0:t.sort((function(e,t){return new Date(t.updated).getTime()-new Date(e.updated).getTime()})):u.data,g=(0,L.useResizeContext)(),h="landscape"===g?5:8,x=function(e){e===(null==l?void 0:l.title)&&(c.current?(clearTimeout(c.current),c.current=void 0,s.mutate({title:e})):c.current=setTimeout((function(){c.current=void 0}),500)),(0,a.navigate)("NotePage",{title:e})},m=function(e){var t;c.current&&(clearTimeout(c.current),c.current=void 0),void 0===(null==(t=u.data)?void 0:t.find((function(t){return t.title===e})))?s.mutate({title:e,direct:!0}):d.mutate(e)};return(0,K.jsxs)(A.default,{children:["PAGE"===e.type&&l&&void 0===(null==f?void 0:f.find((function(e){return e.id===l.id})))&&(0,K.jsx)(M.default,{left:function(e){return(0,K.jsx)(G.default,J(J({},e),{},{icon:"file-document"}))},title:l.title,onPress:function(){return x(l.title)},onLongPress:function(){return m(l.title)},style:{padding:h},titleStyle:{fontStyle:"italic"}}),f&&("NOTE"===e.type?(0,K.jsxs)(K.Fragment,{children:[f.slice(0,5).map((function(e){return(0,K.jsx)(M.default,{left:function(t){var n;return(0,K.jsx)(G.default,J(J({},t),{},{icon:void 0===(null==(n=u.data)?void 0:n.find((function(t){return t.title===e.title})))?"notebook":"notebook-edit"}))},title:e.title,onPress:function(){return x(e.title)},onLongPress:function(){return m(e.title)},style:{padding:h}},e.id)})),((null==f?void 0:f.length)||0)>5&&(0,K.jsx)(M.default,{left:function(e){return(0,K.jsx)(G.default,J(J({},e),{},{icon:"notebook-multiple"}))},title:n("more..."),onPress:function(){return(0,a.navigate)("RecentPages")},style:{padding:h}})]}):f.map((function(e){return(0,K.jsx)(M.default,{left:function(e){return(0,K.jsx)(G.default,J(J({},e),{},{icon:"file-document-edit"}))},right:function(t){return(0,K.jsx)(W.default,{style:{justifyContent:"center",borderRadius:h,width:40+2*h,height:40+2*h,margin:-h},onPress:function(){return d.mutate(e.title)},children:(0,K.jsx)(G.default,{style:{left:h-7},icon:"close"})})},title:e.title,onPress:function(){return(0,a.navigate)("NotePage",{title:e.title})},style:{padding:h}},e.id)})))]})};var _=n(3390),U=n(6927),X=n(1867),Y="",ee=function(e){var t=e.renderExtra,n=(0,o.useState)(Y),r=(0,u.default)(n,2),i=r[0],a=r[1],d=(0,o.useState)(!1),f=(0,u.default)(d,2),p=f[0],y=f[1],h=(0,g.useNavigation)(),x=(0,L.useColorScheme)(),m=q(x),v=N().data,j=void 0===v?[]:v,b=i.length>0?j.filter((function(e){return e.title.toLowerCase().startsWith(i.toLowerCase())})).slice(0,5):[],k=function(){i.trim()&&(h.navigate("NotePage",{title:i.trim()}),a(""),y(!1))};return(0,o.useEffect)((function(){Y=i}),[i]),(0,g.useFocusEffect)((function(){i!==Y&&a(Y)})),(0,K.jsxs)(l.default,{style:te.container,children:[(0,K.jsxs)(l.default,{style:te.searchContainer,children:[(0,K.jsx)(_.default,{style:[m.input,te.searchInput],value:i,onChangeText:function(e){a(e),y(e.length>0)},placeholder:"\uac80\uc0c9",placeholderTextColor:"dark"===x?"#777777":"#999999",onSubmitEditing:k}),(0,K.jsx)(s.default,{style:te.searchButton,onPress:k,disabled:!i.trim(),children:(0,K.jsx)(X.default,{name:t?"search-plus":"search",size:18,color:"#FFFFFF"})})]}),p&&(0,K.jsxs)(l.default,{style:[te.resultsContainer,"dark"===x?te.darkResults:te.lightResults],children:[b.length>0?(0,K.jsx)(U.default,{data:b,keyExtractor:function(e){return e.title},renderItem:function(e){var t=e.item;return(0,K.jsx)(s.default,{style:te.resultItem,onPress:function(){return e=t.title,h.navigate("NotePage",{title:e}),a(""),void y(!1);var e},children:(0,K.jsx)(c.default,{style:[m.text,te.resultText],children:t.title})})},ItemSeparatorComponent:function(){return(0,K.jsx)(l.default,{style:te.separator})}}):i.trim()?(0,K.jsx)(s.default,{style:te.resultItem,onPress:k,children:(0,K.jsxs)(c.default,{style:[m.text,te.resultText],children:['"',i,'" \uc0c8 \ub178\ud2b8 \ub9cc\ub4e4\uae30']})}):null,null==t?void 0:t(i,b.length>0)]})]})},te=f.default.create({container:{position:"relative",width:"100%",maxWidth:960,zIndex:999},searchContainer:{flexDirection:"row"},searchInput:{flex:1,height:36,marginBottom:0,paddingVertical:4,fontSize:14},searchButton:{backgroundColor:"#3498DB",justifyContent:"center",alignItems:"center",width:36,height:36,borderRadius:4,marginHorizontal:4},resultsContainer:{position:"absolute",top:40,left:0,right:0,maxHeight:200,borderWidth:1,borderRadius:4,zIndex:999,elevation:5},lightResults:{backgroundColor:"#FFFFFF",borderColor:"#CCCCCC"},darkResults:{backgroundColor:"#222222",borderColor:"#444444"},resultItem:{padding:10},resultText:{fontSize:14},separator:{height:1,backgroundColor:"#EEEEEE"}}),ne=function(){var e=(0,L.useColorScheme)();return(0,K.jsx)(V.default,{style:{flex:1,backgroundColor:L.Colors[e].background},children:(0,K.jsx)(Z,{type:"PAGE"})})},re=function(){var e=(0,L.useColorScheme)();return(0,K.jsx)(V.default,{style:{flex:1,backgroundColor:L.Colors[e].background},children:(0,K.jsx)(Z,{type:"NOTE"})})},ie=function(){var e=(0,L.useColorScheme)();return(0,K.jsx)(V.default,{style:{flex:1,backgroundColor:L.Colors[e].background},children:(0,K.jsx)(a.ConfigSections,{})})};f.default.create({searchContainer:{flexDirection:"row",marginBottom:16},searchInput:{flex:1,marginBottom:0},searchButton:{backgroundColor:"#3498DB",justifyContent:"center",alignItems:"center",width:48,borderRadius:4,marginLeft:8},recentButton:{flexDirection:"row",alignItems:"center",padding:8}});var oe=f.default.create({backButton:{padding:8},buttonContainer:{flexDirection:"row",justifyContent:"space-between"},cancelButton:{flex:1,marginRight:8,backgroundColor:"#95A5A6"},moveButton:{flex:1,marginLeft:8}}),ae=(new Date).getTimezoneOffset(),ue=function(e){var t=new Date(e);t.setMinutes(t.getMinutes()-ae);var n=t.toISOString().slice(0,16),r=n.slice(0,10);return r==(new Date).toISOString().slice(0,10)?n.slice(11):r},le=(f.default.create({backButton:{padding:8}}),n(7917)),ce=f.default.create({backButton:{padding:8},pageTitle:{flex:1,fontSize:20},actionButtons:{flexDirection:"row"},actionButton:{padding:8,marginLeft:8}}),se={Home:{title:"Blacktokki Notebook",component:function(e){e.navigation,e.route;var t=(0,L.useLangContext)().lang,n=(0,L.useColorScheme)(),r=q(n),i=t("Blacktokki Notebook"),o=[{title:t("Open Pages"),component:ne,icon:(0,K.jsx)(G.default,{icon:"file-document"}),headerRight:function(){return(0,K.jsx)(K.Fragment,{})}},{title:t("Notes"),component:re,icon:(0,K.jsx)(G.default,{icon:"notebook"}),headerRight:function(){return(0,K.jsx)(K.Fragment,{})}},{title:t("Config"),component:ie,icon:(0,K.jsx)(G.default,{icon:"dots-horizontal"}),headerRight:function(){return(0,K.jsx)(K.Fragment,{})}}];return(0,K.jsx)(a.HomeSection,{tabViews:o,homeView:{title:i,headerRight:function(){return(0,K.jsx)(ee,{})}},headerTitle:i,children:(0,K.jsx)(l.default,{style:[r.container,{width:"100%"}],children:(0,K.jsx)(l.default,{style:r.card,children:(0,K.jsx)(a.ConfigSections,{})})})})},path:"home"},NotePage:{title:"Blacktokki Notebook",component:function(){var e=(0,g.useRoute)().params.title,t=(0,g.useNavigation)(),n=(0,L.useColorScheme)(),r=q(n),i=R(e),o=i.data,a=i.isLoading,u=function(){t.navigate("EditPage",{title:e})};return(0,K.jsxs)(V.default,{style:r.container,children:[(0,K.jsxs)(l.default,{style:r.header,children:[(0,K.jsx)(c.default,{style:[r.title,ce.pageTitle],numberOfLines:1,children:e}),(0,K.jsxs)(l.default,{style:ce.actionButtons,children:[(0,K.jsx)(s.default,{onPress:function(){t.navigate("MovePage",{title:e})},style:ce.actionButton,children:(0,K.jsx)(X.default,{name:"exchange",size:16,color:"dark"===n?"#E4E4E4":"#333333"})}),(0,K.jsx)(s.default,{onPress:u,style:ce.actionButton,children:(0,K.jsx)(X.default,{name:"pencil",size:16,color:"dark"===n?"#E4E4E4":"#333333"})})]})]}),(0,K.jsx)(l.default,{style:r.flex,children:a?(0,K.jsx)(l.default,{style:[r.card,r.centerContent],children:(0,K.jsx)(le.default,{size:"large",color:"#3498DB"})}):(0,K.jsxs)(K.Fragment,{children:[(0,K.jsx)(l.default,{style:null!=o&&o.description?[r.card,{flex:1,padding:0}]:{flex:0},children:(0,K.jsx)(Q.EditorViewer,{active:!0,value:(null==o?void 0:o.description)||"",theme:n,autoResize:!0})}),null!=o&&o.description?void 0:(0,K.jsxs)(l.default,{style:[r.card,r.centerContent],children:[(0,K.jsx)(c.default,{style:r.text,children:"\uc544\uc9c1 \ub0b4\uc6a9\uc774 \uc5c6\ub294 \ubb38\uc11c\uc785\ub2c8\ub2e4. '\ud3b8\uc9d1' \ubc84\ud2bc\uc744 \ub20c\ub7ec \ub0b4\uc6a9\uc744 \ucd94\uac00\ud574\ubcf4\uc138\uc694."}),(0,K.jsx)(s.default,{onPress:u,style:r.button,children:(0,K.jsx)(c.default,{style:r.buttonText,children:"\ud3b8\uc9d1\ud558\uae30"})})]})]})})]})},path:"page"},EditPage:{title:"Blacktokki Notebook",component:function(){var e=(0,g.useRoute)().params.title,t=(0,g.useNavigation)(),n=(0,L.useColorScheme)(),r=q(n),a=R(e),f=a.data,h=a.isLoading,m=(0,o.useState)(""),v=(0,u.default)(m,2),j=v[0],b=v[1],k=function(){var e=(0,y.useQueryClient)(),t=(0,x.useAuthContext)().auth;return(0,y.useMutation)({mutationFn:function(){var e=(0,i.default)((function*(e){var n,r=e.title,i=e.description,o=yield S(),a=o.find((function(e){return e.title===r}));if(a)n=o.map((function(e,t){return e.id===a.id?O(O({},e),{},{description:i}):e}));else{var u,l={title:r,description:i,input:r,userId:(null==(u=t.user)?void 0:u.id)||0,parentId:0,type:"NOTE",order:0,option:{}};n=[].concat((0,p.default)(o),[l])}return yield B(n,null==a?void 0:a.id),{title:r,description:i}}));return function(t){return e.apply(this,arguments)}}(),onSuccess:function(t){e.invalidateQueries({queryKey:["pageContents"]}),e.invalidateQueries({queryKey:["pageContent",t.title]}),e.invalidateQueries({queryKey:["recentPages"]})}})}();return(0,o.useEffect)((function(){!h&&null!=f&&f.description&&b(null==f?void 0:f.description)}),[h]),(0,g.useFocusEffect)((function(){var e=function(e){e.preventDefault(),e.returnValue=""};return window.addEventListener("beforeunload",e),function(){return window.removeEventListener("beforeunload",e)}})),(0,K.jsxs)(l.default,{style:r.container,children:[(0,K.jsx)(l.default,{style:r.header,children:(0,K.jsxs)(c.default,{style:[r.title,{flex:1}],children:[e," - \ud3b8\uc9d1"]})}),(0,K.jsx)(Q.Editor,{active:!0,value:j,setValue:b,theme:n}),(0,K.jsxs)(l.default,{style:H.buttonContainer,children:[(0,K.jsx)(s.default,{style:[r.button,H.cancelButton],onPress:function(){t.canGoBack()?t.goBack():t.navigate("NotePage",{title:e})},children:(0,K.jsx)(c.default,{style:r.buttonText,children:"\ucde8\uc18c"})}),(0,K.jsx)(s.default,{style:[r.button,H.saveButton],onPress:function(){k.mutate({title:e,description:j},{onSuccess:function(){t.navigate("NotePage",{title:e})},onError:function(e){d.default.alert("\uc624\ub958",e.message||"\ubb38\uc11c\ub97c \uc800\uc7a5\ud558\ub294 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}})},children:(0,K.jsx)(c.default,{style:r.buttonText,children:"\uc800\uc7a5"})})]})]})},path:"edit"},MovePage:{title:"Blacktokki Notebook",component:function(){var e=(0,g.useRoute)().params.title,t=(0,o.useState)(""),n=(0,u.default)(t,2),r=n[0],a=n[1],f=(0,g.useNavigation)(),p=(0,L.useColorScheme)(),h=R(e),x=h.data,m=h.isLoading,v=q(p),j=function(){var e=(0,y.useQueryClient)();return(0,y.useMutation)({mutationFn:function(){var e=(0,i.default)((function*(e){var t=e.oldTitle,n=e.newTitle,r=yield S(),i=r.find((function(e){return e.title===t}));if(!i)throw new Error("Page not found");if(r.some((function(e){return e.title===n})))throw new Error("Page with new title already exists");var o=r.map((function(e){return e.title===t?O(O({},e),{},{title:n}):e}));yield B(o,i.id);var a=(yield T()).map((function(e){return e===t?n:e}));return yield D(a),{oldTitle:t,newTitle:n}}));return function(t){return e.apply(this,arguments)}}(),onSuccess:function(t){e.invalidateQueries({queryKey:["pageContents"]}),e.invalidateQueries({queryKey:["pageContent",t.oldTitle]}),e.invalidateQueries({queryKey:["pageContent",t.newTitle]}),e.invalidateQueries({queryKey:["recentPages"]})}})}(),b=function(){f.canGoBack()?f.goBack():f.navigate("NotePage",{title:e})};return(0,o.useEffect)((function(){m||x||b()}),[x,m]),(0,K.jsx)(l.default,{style:v.container,children:(0,K.jsxs)(l.default,{style:v.card,children:[(0,K.jsx)(c.default,{style:v.text,children:"\ud604\uc7ac \ub178\ud2b8 \uc81c\ubaa9:"}),(0,K.jsx)(c.default,{style:[v.title,{marginTop:8,marginBottom:16}],children:e}),(0,K.jsx)(c.default,{style:v.text,children:"\uc0c8 \ub178\ud2b8 \uc81c\ubaa9:"}),(0,K.jsx)(_.default,{style:[v.input,{marginTop:8}],value:r,onChangeText:a,placeholder:"\uc0c8 \ub178\ud2b8 \uc81c\ubaa9\uc744 \uc785\ub825\ud558\uc138\uc694",placeholderTextColor:"dark"===p?"#777777":"#999999"}),(0,K.jsx)(c.default,{style:[v.smallText,{marginBottom:16}],children:"\ubb38\uc11c\ub97c \uc774\ub3d9\ud558\uba74 \uae30\uc874 \uc81c\ubaa9\uc758 \ubb38\uc11c\ub294 \uc0c8 \uc81c\ubaa9\uc73c\ub85c \ubcc0\uacbd\ub429\ub2c8\ub2e4."}),(0,K.jsxs)(l.default,{style:oe.buttonContainer,children:[(0,K.jsx)(s.default,{style:[v.button,oe.cancelButton],onPress:b,children:(0,K.jsx)(c.default,{style:v.buttonText,children:"\ucde8\uc18c"})}),(0,K.jsx)(s.default,{style:[v.button,oe.moveButton],onPress:function(){r.trim()?r.trim()!==e?j.mutate({oldTitle:e,newTitle:r.trim()},{onSuccess:function(e){f.reset({index:1,routes:[{name:"Home"},{name:"NotePage",params:{title:e.newTitle}}]})},onError:function(e){d.default.alert("\uc624\ub958",e.message||"\ub178\ud2b8 \uc774\ub3d9 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}}):d.default.alert("\uc624\ub958","\ud604\uc7ac \uc81c\ubaa9\uacfc \ub3d9\uc77c\ud569\ub2c8\ub2e4."):d.default.alert("\uc624\ub958","\uc0c8 \ub178\ud2b8 \uc81c\ubaa9\uc744 \uc785\ub825\ud558\uc138\uc694.")},disabled:!r.trim()||r.trim()===e,children:(0,K.jsx)(c.default,{style:v.buttonText,children:"\uc774\ub3d9"})})]})]})})},path:"move"},RecentPages:{title:"Blacktokki Notebook",component:function(){var e=(0,g.useNavigation)(),t=(0,L.useColorScheme)(),n=q(t),r=N(),i=r.data,o=void 0===i?[]:i,a=r.isLoading;return(0,K.jsx)(l.default,{style:n.container,children:a?(0,K.jsx)(l.default,{style:[n.card,n.centerContent],children:(0,K.jsx)(c.default,{style:n.text,children:"\ub85c\ub529 \uc911..."})}):o.length>0?(0,K.jsx)(U.default,{data:o.sort((function(e,t){return new Date(t.updated).getTime()-new Date(e.updated).getTime()})),keyExtractor:function(e){return e.title},renderItem:function(t){var r=t.item;return(0,K.jsxs)(s.default,{style:n.card,onPress:function(){return t=r.title,void e.navigate("NotePage",{title:t});var t},children:[(0,K.jsx)(c.default,{style:n.title,children:r.title}),(0,K.jsxs)(c.default,{style:n.smallText,children:["\ucd5c\uadfc \uc218\uc815: ",ue(r.updated)]})]})},ItemSeparatorComponent:function(){return(0,K.jsx)(l.default,{style:{height:8}})}}):(0,K.jsx)(l.default,{style:[n.card,n.centerContent],children:(0,K.jsx)(c.default,{style:n.text,children:"\ucd5c\uadfc \uc218\uc815\ud55c \ub178\ud2b8\uac00 \uc5c6\uc2b5\ub2c8\ub2e4."})})})},path:"recent"}},de=n(5589);function fe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ge(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fe(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const pe=function(){var e=(0,L.useLangContext)().lang;return(0,K.jsxs)(L.View,{style:{flex:1},children:[(0,K.jsx)(M.default,{left:function(e){return(0,K.jsx)(G.default,ge(ge({},e),{},{icon:"home"}))},title:e("Home"),onPress:function(){return(0,a.navigate)("Home")}}),(0,K.jsxs)(L.View,{style:{flex:1},children:[(0,K.jsxs)(L.View,{style:{minHeight:"35%",maxHeight:"65%",flexShrink:1,flexGrow:.1},children:[(0,K.jsx)(de.default,{style:{},selectable:!1,children:e("Open Pages")}),(0,K.jsx)(V.default,{children:(0,K.jsx)(Z,{type:"PAGE"})})]}),(0,K.jsxs)(L.View,{style:{minHeight:"35%",maxHeight:"65%",flexShrink:.1,flexGrow:1},children:[(0,K.jsx)(L.View,{style:{flexDirection:"row"},children:(0,K.jsx)(de.default,{style:{flex:1},selectable:!1,children:e("Notes")})}),(0,K.jsx)(V.default,{children:(0,K.jsx)(Z,{type:"NOTE"})})]})]})]})};var ye=n(8610),he=n(7650),xe=n(2876);function me(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ve(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?me(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):me(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var je=function(){var e=(0,i.default)((function*(e){var t=yield Promise.all([n.e(928),n.e(973)]).then(n.bind(n,9928));return{main:se,login:a.login,prefixes:[t.makeUrl("/")],rootPath:"blacktokki-notebook",documentTitle:{formatter:function(){return"blacktokki-notebook"}},rootScreen:{main:"Home",login:"LoginScreen"},headerLeftIcon:(0,K.jsx)(G.default,{icon:"backburger",style:{left:-18,top:-14}}),headerRight:(0,K.jsx)(ee,{}),modals:[],drawer:(0,K.jsx)(pe,{})}}));return function(t){return e.apply(this,arguments)}}();const be=function(){var e=(0,L.useColorScheme)(),t="dark"==e?ye.MD2DarkTheme:he.MD2LightTheme,n=ve(ve({},t),{},{colors:ve(ve({},t.colors),{},{primary:L.Colors[e].text})}),r=o.lazy((function(){return je(e).then((function(e){return{default:function(){return(0,K.jsx)(a.Navigation,{config:e})}}}))}));return(0,K.jsx)(xe.default,{theme:n,children:(0,K.jsx)(o.Suspense,{fallback:(0,K.jsx)(K.Fragment,{}),children:(0,K.jsx)(r,{})})})}}}]);
//# sourceMappingURL=460.eff1d675.chunk.js.map