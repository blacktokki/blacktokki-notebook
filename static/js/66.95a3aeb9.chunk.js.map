{"version":3,"file":"static/js/66.95a3aeb9.chunk.js","mappings":"2PAqBMA,EAAK,+GAEEC,EAAS,SAACC,GACnB,OAnBS,SAACF,EAAWG,GAKrB,IAJA,IAEIC,EAFAF,EAAMC,EACNE,EAAQ,EAERC,EAAM,GACmC,OAArCF,EAAQ,IAAIG,OAAOP,GAAIQ,KAAKN,KAAe,CACjDI,EAAIG,KAAK,CAACJ,MAAAA,EAAOH,IAAIA,EAAIQ,UAAU,EAAGN,EAAMC,SAC5C,IAAMM,EAAMP,EAAMC,MAAQD,EAAM,GAAGQ,OACnCN,EAAIG,KAAK,CAACJ,MAAMA,EAAQD,EAAMC,MAAOH,IAAIA,EAAIQ,UAAUN,EAAMC,MAAOM,KACpEN,GAASM,EACTT,EAAMA,EAAIQ,UAAUC,EACtB,CAEA,OADAL,EAAIG,KAAK,CAACJ,MAAAA,EAAOH,IAAAA,IACVI,CACT,CAKSO,CAAKb,EAAIE,GAAKY,QAAO,SAACC,EAAGC,GAAC,OAAGA,EAAI,GAAK,CAAC,IAAEC,KAAI,SAAAF,GAAC,OAAEA,EAAEb,GAAG,GAChE,EAGA,iBAAegB,GAAmD,IAAjDC,EAAID,EAAJC,KAAMC,EAAQF,EAARE,SACnB,OAAOC,EAAAA,EAAAA,KAACC,EAAAA,KAAI,CAACC,MAAO,CAACC,aAAa,EAAGC,eAAe,GAAIC,iBAAiB,GAAGC,UACpEC,EAAAA,EAAAA,MAACC,EAAAA,QAAgB,CACbC,QAAS,WAAF,OAAMC,EAAAA,QAAQC,QAAQb,EAAKc,IAAI,EACtCC,YAAa,WAAK,EAClBX,MAAO,CAACY,MAAM,OAAQC,cAAc,OAAOT,SAAA,CAE1CR,EAAKkB,UAAShB,EAAAA,EAAAA,KAACiB,EAAAA,QAAK,CAACC,OAAQ,CAACC,IAAIrB,EAAKkB,UAAWI,WAAW,QAAQlB,MAAO,CAAEC,aAAa,EAAGW,MAAM,OAAQO,SAAStB,EAAS,IAAI,IAAKuB,UAAUvB,EAAS,IAAI,IAAKwB,YAAY,UAAMC,GACtLjB,EAAAA,EAAAA,MAACN,EAAAA,KAAI,CAACC,MAAO,CAACuB,KAAK,EAAGpB,iBAAiB,GAAIqB,SAAS,SAAUC,UAAU5B,EAAS,GAAG,KAAKO,SAAA,EACrFN,EAAAA,EAAAA,KAAC4B,EAAAA,KAAI,CAAC1B,MAAO,CAAC2B,SAAS,IAAKC,cAAe,EAAExB,SAAER,EAAKiC,SACpD/B,EAAAA,EAAAA,KAAC4B,EAAAA,KAAI,CAAC1B,MAAO,CAAC2B,SAAS,IAAKC,cAAe,EAAGE,cAAc,OAAM1B,SAAER,EAAKhB,eACzEkB,EAAAA,EAAAA,KAAC4B,EAAAA,KAAI,CAAC1B,MAAO,CAAC2B,SAAS,IAAKC,cAAe,EAAExB,SAAER,EAAKc,aAKvE,E,cCxCKqB,GAAQC,EAAAA,EAAAA,aAAY,YAEbC,EAAa,eAAAtC,GAAAuC,EAAAA,EAAAA,UAAG,UAAOC,GAChC,aAAcJ,EAAMK,IAAI,mBAAmBD,MAAOE,IACtD,IAAC,gBAFyBC,GAAA,OAAA3C,EAAA4C,MAAA,KAAAC,UAAA,KAIbC,EAAc,eAAAC,GAAAR,EAAAA,EAAAA,UAAG,UAAOS,EAAkBC,GACnD,IAAMC,OAA6BvB,IAAbqB,EAAuB,aAAaA,IAAY,GAChEG,OAAqBxB,IAATsB,EAAmB,SAASA,IAAS,GACvD,aAAcb,EAAMK,IAAI,qCAAqCS,IAAgBC,MAAeT,KAAKU,KACrG,IAAC,gBAJ0BC,EAAAC,GAAA,OAAAP,EAAAH,MAAA,KAAAC,UAAA,KAMdU,EAAW,eAAAC,GAAAjB,EAAAA,EAAAA,UAAG,UAAOgB,GAC9B,aAAenB,EAAMqB,KAAK,kBAAmBF,IAAcb,KAAiBF,EAChF,IAAC,gBAFuBkB,GAAA,OAAAF,EAAAZ,MAAA,KAAAC,UAAA,KAIXc,EAAY,eAAAC,GAAArB,EAAAA,EAAAA,UAAG,UAAAsB,GAAyD,IAAjDrB,EAAEqB,EAAFrB,GAAIsB,EAAOD,EAAPC,cAC9B1B,EAAM2B,MAAM,kBAAkB,CAACC,IAAK,CAACxB,GAAKsB,QAAAA,GACpD,IAAC,gBAFwBG,GAAA,OAAAL,EAAAhB,MAAA,KAAAC,UAAA,KAIZqB,EAAa,eAAAC,GAAA5B,EAAAA,EAAAA,UAAG,UAAOC,SAC1BJ,EAAMgC,OAAO,mBAAmB5B,IAC1C,IAAC,gBAFyB6B,GAAA,OAAAF,EAAAvB,MAAA,KAAAC,UAAA,KAIbyB,EAAS,eAAAC,GAAAhC,EAAAA,EAAAA,UAAG,UAAOiC,SACtBpC,EAAMqB,KAAK,uBAAwBe,EAC7C,IAAC,gBAFqBC,GAAA,OAAAF,EAAA3B,MAAA,KAAAC,UAAA,KAQT6B,GAJY,eAAAC,GAAApC,EAAAA,EAAAA,UAAG,UAAOqC,GAC/B,aAAcxC,EAAMqB,KAAK,gBAAiBmB,IAAQlC,IACtD,GAFyB,IAIA,eAAAmC,GAAAtC,EAAAA,EAAAA,UAAG,UAAOuC,GAC/B,IAAMpC,EAAc,GACpB,IAAK,IAAMqC,KAAShG,EAAO+F,EAAQC,OAC/BrC,EAAKnD,YAAY6C,EAAMK,IAAI,sCAAsCsC,MAAUrC,MAE/E,OAAOA,CACX,IAAC,gBANwBsC,GAAA,OAAAH,EAAAjC,MAAA,KAAAC,UAAA,MC/BV,SAASoC,EAAejC,EAAkBC,GAEvD,OADiBiC,EAAAA,EAAAA,UAAS,CAAC,cAAelC,EAAUC,IAAKV,EAAAA,EAAAA,UAAG,wBAAsBZ,IAAXqB,QAA+BrB,IAAPsB,QAAwBH,EAAeE,EAAUC,QAAMtB,CAAS,KAAvJe,IAEV,CAGO,SAASyC,IACd,IAAMC,GAAcC,EAAAA,EAAAA,kBACdC,GAASC,EAAAA,EAAAA,aAAYhC,EAAa,CACtCiC,UAAU,WAAD,IAAAC,GAAAlD,EAAAA,EAAAA,UAAE,kBACH6C,EAAYM,kBAAkB,cACtC,IAFS,OAER,WAFQ,OAAAD,EAAA7C,MAAA,KAAAC,UAAA,EAAC,KAIN8C,GAASJ,EAAAA,EAAAA,aAAY5B,EAAc,CACvC6B,UAAU,WAAD,IAAAI,GAAArD,EAAAA,EAAAA,UAAE,kBACHsD,QAAQC,IAAI,CAChBV,EAAYM,kBAAkB,eAC9BN,EAAYM,kBAAkB,YAElC,IALS,OAKR,WALQ,OAAAE,EAAAhD,MAAA,KAAAC,UAAA,EAAC,KAONkD,GAAUR,EAAAA,EAAAA,aAAYrB,EAAe,CACzCsB,UAAW,WACTJ,EAAYM,kBAAkB,cAChC,IAEIM,GAAcT,EAAAA,EAAAA,aAAYjB,EAAW,CACzCkB,UAAW,WACTJ,EAAYM,kBAAkB,cAChC,IAMF,OAHAO,EAAAA,EAAAA,YAAU,WACV,GAAG,IAEI,CAACX,OAAOA,EAAOY,YAAaP,OAAOA,EAAOO,YAAa9B,OAAO2B,EAAQG,YAAaF,YAAYA,EAAYE,YACpH,C,kCCjCMC,GAAgB,IAAIC,MAAOC,oBAE3BC,EAAgB,SAACC,GACrB,IAAMC,EAAQ,IAAIJ,KAAKG,GACvBC,EAAMC,WAAWD,EAAME,aAAeP,GACtC,IAAMrC,EAAU0C,EAAMG,cAAcC,MAAM,EAAG,IACrCC,EAAO/C,EAAQ8C,MAAM,EAAG,IAE9B,OAAOC,IADO,IAAIT,MAAOO,cAAcC,MAAM,EAAG,IAC7B9C,EAAQ8C,MAAM,IAAIC,CACzC,EAEMC,EAAe,SAACC,GAAmB,OAAKA,EAAY,GAAG,CAAC,EACxDC,EAAgB,SAACD,GAAmB,OAAKA,EAAY,IAAI,GAAG,EAG5DE,EAAWC,EAAAA,MAAW,SAAAlH,GAA6B,IAAD+C,EAA1BL,EAAI1C,EAAJ0C,KACtByE,GAAUC,EAAAA,EAAAA,oBACVC,EAAeL,EAAuB,cAATG,GAC7BG,EAAiB,cAATH,EAAqB,EAAE,EAErC,OAAoE,OAApEpE,EAAA,GAAAwE,QAAAC,EAAAA,EAAAA,SAAW9E,EAAK+E,MAAK,SAACC,EAAGC,GAAC,OAAGD,EAAE5D,QAAU6D,EAAE7D,QAAQ,GAAG,CAAC,KAAC,CAAE,KAAM,aAAI,EAA7Df,EAAgEhD,KAAI,SAAC6H,EAAMzI,GAChF,GAAa,OAATyI,EACF,OAAOzH,EAAAA,EAAAA,KAACC,EAAAA,QAAI,CAAaC,MAAO,CAACwH,UAAmB,cAATV,EAAqB,MAAM,MAAO3F,SAAS6F,IAApElI,GAEpB,IAAM2I,EAAUF,EAAK3I,YACf2B,EAAU,WAAH,OAAOmH,EAAAA,EAAAA,UAAS,aAAc,CAACvF,GAAGoF,EAAKpF,IAAI,EACxD,OAAO9B,EAAAA,EAAAA,MAACC,EAAAA,QAAgB,CAAaN,MAAO,CAACwH,UAAmB,cAATV,EAAqB,MAAM,MAAOa,QAAQlB,EAAsB,cAATK,GAAuBc,aAAa,EAAGC,SAASb,EAAc7F,SAAS6F,GAAezG,QAASA,EAAQH,SAAA,EACjNN,EAAAA,EAAAA,KAACgI,EAAAA,QAAI,CAACvH,QAASA,EAASP,MAAO,CAAC+H,YAAY,EAAEC,KAAKC,KAAK,GAAIhI,aAAa,EAAGC,eAAe,GAAIC,iBAAiB,EAAGqB,SAAS,UAAUpB,UACpIN,EAAAA,EAAAA,KAACgI,EAAAA,QAAKI,QAAO,CAAA9H,UACbN,EAAAA,EAAAA,KAAC4B,EAAAA,KAAI,CAAC1B,MAAO,CAAC2B,SAAS,GAAGsF,EAAOkB,QAAS,IAAK/H,SAAEqH,SAGnDpH,EAAAA,EAAAA,MAACN,EAAAA,QAAI,CAACC,MAAO,CAACa,cAAc,MAAOuH,UAAU,GAAIC,eAAe,gBAAiBC,WAAW,SAAU1H,MAAM,QAAQR,SAAA,EAClHN,EAAAA,EAAAA,KAAC4B,EAAAA,KAAI,CAAC1B,MAAO,CAAC2B,SAAS,GAAGsF,GAAO7G,SAAEmH,EAAK1F,SACxC/B,EAAAA,EAAAA,KAAC4B,EAAAA,KAAI,CAAC1B,MAAO,CAAC2B,SAAS,GAAGsF,EAAOkB,QAAS,GAAKI,UAAU,SAASnI,SAAE6F,EAAcsB,EAAK9D,gBAR/D3E,EAYhC,GACF,IAiBA,QAfoB,SAAHqE,GAAuD,IAChEd,EAAOuC,EADqBzB,EAAbqF,cACqBrG,IACpC2E,GAAUC,EAAAA,EAAAA,oBAChB,OAAO1E,IACLvC,EAAAA,EAAAA,KAAC2I,EAAAA,QAAU,CACTzI,MAAO,CAAE0I,OAAO,GAChBC,sBAAuB,CAAC9H,cAAc,MAAOwH,eAAe,UAAUjI,UAEtEN,EAAAA,EAAAA,KAACC,EAAAA,QAAI,CAACC,MAAO,CAAC4I,gBAAgB,cAAepB,UAAU,OAAQrG,UAAUwF,EAAuB,cAATG,GAAwB,IAAgB,cAATA,EAAqB,EAAE,GAAI+B,SAAS,OAAQhI,cAAc,MAAO+G,aAAanB,EAAsB,cAATK,GAAuBuB,eAAwB,cAATvB,OAAqBxF,EAAU,UAAUlB,UAC9RN,EAAAA,EAAAA,KAAC8G,EAAQ,CAACvE,KAAMA,OAIxB,E,+kBCvDIyG,EACAC,EAIAC,EACAC,EACAC,E,4nBAGJ,GAAoB,YAAhBC,EAAAA,QAASC,IAAoC,QAAhBD,EAAAA,QAASC,GAAc,CAEtD,IAAMC,EAAkB,CAAC,EACzBP,EAAoBO,EAAgBC,QACpCP,EAAiBM,EAAgBN,cACnC,MAEEC,EAAUO,EAAQ,MAClBN,EAAcM,EAAQ,MACtBL,EAAeK,EAAQ,KAIzB,IAAMC,GAAoB,SAAH7J,GAQhB,IAPL4H,EAAI5H,EAAJ4H,KACAkC,EAAI9J,EAAJ8J,KACAC,EAAiB/J,EAAjB+J,kBAMAC,EAOIV,EAAYW,YAAY,CAAEzH,GAAGsH,IAN/BI,EAAUF,EAAVE,WACAC,EAASH,EAATG,UACAC,EAAUJ,EAAVI,WACAC,EAASL,EAATK,UACAC,EAAUN,EAAVM,WACAC,EAAUP,EAAVO,WAGIlK,EAAQ,CACZgK,UAAWd,EAAaiB,IAAIC,UAAUC,SAASL,EAAY,CACzDM,EAAGN,EAAUM,EACbC,EAAGP,EAAUO,EACbC,OAAQ,EACRC,OAAQ,GACN,MACJR,WAAAA,EACA9B,QAAS+B,EAAa,GAAM,EAC5BQ,SAAU,WACVnJ,KAAM,EACNoJ,OAAQT,EAAa,EAAI,GAG3B,OACE7J,EAAAA,EAAAA,MAAA,OACEuK,IAAKb,EACL/J,MAAOA,EAAMI,SAAA,EAEbN,EAAAA,EAAAA,KAAA,MAAA+K,EAAAA,EAAAA,EAAA,GACMhB,GACAC,GAAS,IACb9J,MAAO,CACL8K,OAAQ,OACRlK,MAAO,GACP8J,SAAU,WACVhC,OAAQ,OACRiC,OAAQ,GACRI,KAAM,EACNC,IAAK,MAGRtB,EAAkB,CAACnC,KAAAA,MAG1B,EAGM0D,GAAoB,SAAHvI,GAUhB,IATLwI,EAAKxI,EAALwI,MACAC,EAASzI,EAATyI,UACAzB,EAAiBhH,EAAjBgH,kBACA0B,EAAK1I,EAAL0I,MAOAC,GAA0BC,EAAAA,EAAAA,UAASJ,EAAMxL,KAAI,SAAAF,GAAC,MAAE,GAAI4L,EAAM5L,EAAE,KAAE+L,GAAAC,EAAAA,EAAAA,SAAAH,EAAA,GAAvDI,EAAKF,EAAA,GAAEG,EAAQH,EAAA,IACtB3F,EAAAA,EAAAA,YAAU,WACJsF,EAAM7L,SAAWoM,EAAMpM,QACzBqM,GAAS,SAACD,GACR,OAAOP,EAAMxL,KAAI,SAACF,EAAGC,GAAC,OAAGA,EAAEgM,EAAMpM,OAAOoM,EAAMhM,GAAG,GAAG2L,EAAM5L,EAAE,IAAE+G,MAAM,EAAG2E,EAAM7L,OAC/E,GAEJ,GAAG,CAAC6L,IACJ,IAAMS,EAAU3C,EAAQ4C,WACtB5C,EAAQ6C,UAAU7C,EAAQ8C,cAAe,CACvCC,qBAAsB,CACpBC,SAAU,KAGdhD,EAAQ6C,UAAU7C,EAAQiD,eAAgB,CACxCC,iBAAkBjD,EAAYkD,+BAkBlC,OACErM,EAAAA,EAAAA,KAACkJ,EAAQoD,WAAU,CACjBT,QAASA,EACTU,mBAAoBrD,EAAQsD,cAC5BC,UAlBkB,SAACC,GACrB,IAAQC,EAAiBD,EAAjBC,OAAQC,EAASF,EAATE,KAEhB,GAAIA,GAAQD,EAAOtK,KAAOuK,EAAKvK,GAAI,CACjC,IAAMwK,EAAWlB,EAAMmB,WAAU,SAACrF,GAAI,OAAKA,IAASkF,EAAOtK,EAAE,IACvD0K,EAAWpB,EAAMmB,WAAU,SAACrF,GAAI,OAAKA,IAASmF,EAAKvK,EAAE,IACrD2K,EAAM7D,EAAY8D,UAAUC,MAAMC,KAAKD,MAAM9B,EAAM7L,QAAQ6N,QAASP,EAAUE,GACpFnB,GAAS,SAACD,GACR,OAAOxC,EAAY8D,UAAUtB,EAAOkB,EAAUE,GAAUnN,KAAI,SAACF,EAAUC,GAAQ,OAAGA,EAAEqN,EAAIrN,GAAG,IAAID,EAAEA,CAAC,GACpG,IACA2L,EAAUlC,EAAY8D,UAAU7B,EAAOyB,EAAUE,GACnD,CACF,EAM6BzM,UAEzBN,EAAAA,EAAAA,KAACmJ,EAAYkE,gBAAe,CAC1BjC,MAAOO,EACP2B,SAAUnE,EAAYoE,4BAA4BjN,UAElDN,EAAAA,EAAAA,KAACC,EAAAA,QAAI,CAACC,MAAOsN,GAAaC,UAAUnN,SACjC8K,EAAMxL,KAAI,SAAC6H,EAAM9H,GAChB,IAAMgK,EAAOgC,EAAMhM,IAAM,GAAK2L,EAAM7D,GACpC,OAAOzH,EAAAA,EAAAA,KAAC0J,GAAiB,CAEvBC,KAAMA,EACNlC,KAAMA,EACNmC,kBAAmBA,GAHdD,EAKnB,SAKA,EA8CM6D,GAAeE,EAAAA,QAAWvI,OAAO,CACrCsI,UAAW,CACTE,gBAAiB,GACjBC,kBAAmB,KAIvB,SAlDqB,SAAHvK,GAA6F,IAAnFd,EAAIc,EAAJd,KAAcsL,EAAQxK,EAAhByK,QAAkBxC,EAAKjI,EAALiI,MAAkByC,EAAa1K,EAAxB2K,WACzD,MAAoB,YAAhB3E,EAAAA,QAASC,IAAoC,QAAhBD,EAAAA,QAASC,IAEtCtJ,EAAAA,EAAAA,KAACgJ,EAAiB,CAChBzG,KAAMA,EACNkK,UAAW,SAAF/I,GAAA,IAAKnB,EAAImB,EAAJnB,KAAI,OAAsBsL,EAAStL,EAAK,EACtD0L,aAAc,SAACxG,GAAS,OAAKA,EAAKpF,GAAGkI,UAAU,EAC/CyD,WAAY,SAAFvK,GAAsC,IAAjCgE,EAAIhE,EAAJgE,KAAMyG,EAAIzK,EAAJyK,KAAczK,EAAR0K,SACzB,OACEnO,EAAAA,EAAAA,KAACiJ,EAAc,CAAA3I,UACbC,EAAAA,EAAAA,MAACN,EAAAA,QAAI,CAACC,MAAO,CAAEa,cAAe,OAAQT,SAAA,EACpCN,EAAAA,EAAAA,KAACQ,EAAAA,QAAgB,CACfK,YAAaqN,EACbhO,MAAO,CACLY,MAAO,GACPyH,eAAgB,SAChBC,WAAY,UACZlI,UAEFN,EAAAA,EAAAA,KAACoO,EAAAA,QAAI,CAACC,KAAK,cAAcC,KAAM,GAAIC,MAAM,YAE3CvO,EAAAA,EAAAA,KAACC,EAAAA,QAAI,CAACC,MAAO,CAAEuB,KAAM,GAAInB,SACtByN,EAActG,SAKzB,EACAoB,sBAAuB2E,GAAaC,aAKtCzN,EAAAA,EAAAA,KAACmL,GAAiB,CAChBC,MAAO7I,EACP+I,MAAOA,EACPD,UAAWwC,EACXjE,kBAAmBmE,GAI3B,E,qCClMA,kBAAelO,GAkBN,IAjBLoD,EAAKpD,EAALoD,MACAuL,EAAY3O,EAAZ2O,aACAtO,EAAKL,EAALK,MACAuO,EAAW5O,EAAX4O,YAAWC,EAAA7O,EACX8O,eAAAA,OAAc,IAAAD,EAAG,OAAMA,EAAAE,EAAA/O,EACvBgP,YAAAA,OAAW,IAAAD,GAAQA,EAAAE,EAAAjP,EACnB8B,UAAAA,OAAS,IAAAmN,EAAG,GAAEA,EAAAC,EAAAlP,EACdyB,UAAAA,OAAS,IAAAyN,EAAG,IAAGA,EAWfxD,GAA4BC,EAAAA,EAAAA,UAAS7J,GAAU8J,GAAAC,EAAAA,EAAAA,SAAAH,EAAA,GAAxC3C,EAAM6C,EAAA,GAAEuD,EAASvD,EAAA,GAcxB,OACEzL,EAAAA,EAAAA,KAACiP,GAAAA,QAAS,CACRC,WAAS,EACTjM,MAAOA,EACPuL,aAAcA,EACdW,oBAjB4B,SAACzC,GAC/B,IAAM0C,EAAgB1C,EAAM2C,YAAYC,YAAY1G,OAG9C2G,EAAYrH,KAAKsH,IACrB7N,EACAuG,KAAKuH,IAAIL,EAAe9N,IAG1B0N,EAAUO,EACZ,EAQIrP,MAAO,CACLA,EACA,CACE0I,OAAQA,EACR8G,kBAAmB,QAGvBC,cAAe/G,GAAUtH,EACzBmN,YAAaA,EACbE,eAAgBA,EAChBE,YAAaA,GAGlB,ECpDI,IAAKe,GAAe,SAAfA,GAAe,OAAfA,EAAe,YAAfA,EAAe,kBAAfA,EAAe,sBAAfA,EAAe,cAAfA,CAAe,MAiBdC,GAAa,CACtB,OAAS,CACPC,YAAW,EACXC,KAAK,SAACtL,GAAgB,MAAG,EAAE,EAC3BuL,SAAU,OACVC,SAAU,GACVC,MAAM,YACNC,KAAM,iBAER,KAAQ,CACNL,YAAW,EACXC,KAAK,SAACtL,GAAgB,MAAG,UAAU,EACnCuL,SAAU,OACVC,SAAU,GACVC,MAAO,UACPC,KAAM,WAER,SAAW,CACTL,YAAW,EACXC,KAAK,SAACtL,GAAgB,MAAG,wIAAwI,EACjKuL,SAAU,cACVC,SAAU,GACVC,MAAO,UACPC,KAAM,YAICC,GAAiB,SAAwCC,GAClE,IAAMC,EAAU,SAACC,GAAoB,OAAK7C,EAAAA,QAAWvI,OAAOkL,EAAOE,GAAO,EACpEC,EAAcF,EAAQ,SACtBG,EAAaH,EAAQ,QAC3B,OAAO,SAACC,GAAoB,MAAW,SAARA,EAAeE,EAAWD,CAAW,CACxE,E,+kBClCA,SAAezJ,EAAAA,MAAW,SAAAlH,GAA2T,IAAzT0Q,EAAK1Q,EAAL0Q,MAAO9I,EAAI5H,EAAJ4H,KAAMiJ,EAAU7Q,EAAV6Q,WAAYC,EAAS9Q,EAAT8Q,UAAWC,EAAQ/Q,EAAR+Q,SAAUC,EAAWhR,EAAXgR,YAAaC,EAAiBjR,EAAjBiR,kBAC/ET,EAASU,GAAUR,GACnBS,EAAiBC,GAAkBV,GAEnCW,EAAoB,SAAC7O,EAAYsF,GACrCiJ,GAAS,SAAAO,GAAS,OAChBA,EAAUvR,KAAI,SAAAwR,GAAI,OAChBA,EAAK/O,KAAOA,EAAE0I,GAAAA,GAAA,GAAQqG,GAAI,IAAEzJ,QAAAA,IAAYyJ,CAAI,GAC7C,GAEL,EAKA,OACE7Q,EAAAA,EAAAA,MAACN,EAAAA,QAAI,CAACC,MAAO,CACXmQ,EAAOgB,cACK,WAAZ5J,EAAK3E,MAAmB,CAACnB,UAAWgP,EAAUW,QAAQ7J,EAAKpF,KAC3DqO,GAAcL,EAAOkB,cAGvBC,SAAU,SAAAC,GAAId,EAAUW,QAAQ7J,EAAKpF,IAAIoP,EAAEpC,YAAYqC,OAAO9I,MAAM,EAAEtI,SAAA,EAGpEC,EAAAA,EAAAA,MAACN,EAAAA,QAAI,CAACC,MAAOmQ,EAAOsB,WAAWrR,SAAA,CAC5BuP,GAAWpI,EAAK3E,MAAMgN,aACrB9P,EAAAA,EAAAA,KAACC,EAAAA,QAAI,CAACC,MAAOmQ,EAAOuB,eAAetR,UACjCN,EAAAA,EAAAA,KAAC4B,EAAAA,QAAI,CAAC1B,MAAOmQ,EAAOwB,mBAAmBvR,SACpCmH,EAAKmK,eAAiB,IAAInK,EAAKmK,kBAAoB,WAI1D5R,EAAAA,EAAAA,KAACoO,EAAAA,QAAI,CAACC,KAAK,cAAcC,KAAM,GAAIC,MAAM,aAG3ChO,EAAAA,EAAAA,MAACN,EAAAA,QAAI,CAACC,MAAOmQ,EAAOyB,YAAYxR,SAAA,EAE7BC,EAAAA,EAAAA,MAACN,EAAAA,QAAI,CAACC,MAAOmQ,EAAO0B,YAAYzR,SAAA,EACjCN,EAAAA,EAAAA,KAACQ,EAAAA,QAAgB,CACbN,MAAOmQ,EAAO2B,cACdvR,QAAS,WAAF,OAAQqQ,EAAkBrJ,EAAKpF,GAAG,EAAC/B,UAE1CN,EAAAA,EAAAA,KAACoO,EAAAA,QAAI,CACHC,KAAMwB,GAAWpI,EAAK3E,MAAMkN,SAC5B1B,KAAMuB,GAAWpI,EAAK3E,MAAMmN,SAC5B1B,MAAM,eAGVvO,EAAAA,EAAAA,KAACQ,EAAAA,QAAgB,CACfN,MAAOmQ,EAAO2B,cACdvR,QAAS,WAAF,OAAQoQ,EAAYpJ,EAAKpF,GAAG,EACnC4P,UAAWpC,GAAWpI,EAAK3E,MAAMgN,WAAWxP,UAE5CN,EAAAA,EAAAA,KAACoO,EAAAA,QAAI,CACHC,KAAK,aACLC,KAAM,GACNC,MAAOsB,GAAWpI,EAAK3E,MAAMgN,WAAa,UAAY,YAG1D9P,EAAAA,EAAAA,KAACQ,EAAAA,QAAgB,CACfN,MAAOmQ,EAAO2B,cACdvR,QAAS,WAAF,OAlDG4B,EAkDgBoF,EAAKpF,QAjDvCuO,GAAS,SAAAO,GAAS,OAAIA,EAAU1R,QAAO,SAAA2R,GAAI,OAAIA,EAAK/O,KAAOA,CAAE,GAAC,IAD7C,IAACA,CAkDwB,EAAC/B,UAEnCN,EAAAA,EAAAA,KAACoO,EAAAA,QAAI,CAACC,KAAK,SAASC,KAAM,GAAIC,MAAM,kBAKxChO,EAAAA,EAAAA,MAACC,EAAAA,QAAgB,CACf0R,cAAe,EACfzR,QAAS,WAAF,OAAQqQ,EAAkBrJ,EAAKpF,GAAG,EACzCnC,MAAOmQ,EAAO8B,mBAAmB7R,SAAA,EAGhCC,EAAAA,EAAAA,MAACN,EAAAA,QAAI,CAACC,MAAO,CAACkS,QAAsB,WAAd3K,EAAK3E,KAAkB,OAAO,QAAQxC,SAAA,EAC3DN,EAAAA,EAAAA,KAACqS,GAAAA,aAAY,CAAC9B,MAAOA,EAAOtN,MAAOwE,EAAKE,QAAS2K,YAAU,EAAC3F,QAAS+D,EAAYjQ,QAAS,WAAF,OAAMqQ,EAAkBrJ,EAAKpF,GAAG,KACxHrC,EAAAA,EAAAA,KAACuS,GAAAA,OAAM,CAAOhC,MAAOA,EAAOtN,MAAOwE,EAAKE,QAAS2K,YAAU,EAAC3F,OAAQ+D,EAAY8B,SAAwB,WAAd/K,EAAK3E,KAAkB,SAAC2P,GAAI,OAAKvB,EAAkBzJ,EAAKpF,GAAIoQ,EAAK,EAAC,WAAK,OAGpJ,SAAdhL,EAAK3E,OAAmB9C,EAAAA,EAAAA,KAAC0S,GAAgB,CACtCxS,MAAOmQ,EAAOsC,UACd1P,MAAOwE,EAAKE,QACZ6G,aAAc,SAACiE,GAAI,OAAKvB,EAAkBzJ,EAAKpF,GAAIoQ,EAAK,EACxD9D,eAAe,OACfE,aAAa,IAIF,aAAdpH,EAAK3E,OACN4N,GACE1Q,EAAAA,EAAAA,KAAC0S,GAAgB,CACfxS,MAAOmQ,EAAOuC,cACd3P,MAAOwE,EAAKE,QACZ6G,aAAc,SAACiE,GAAI,OAAKvB,EAAkBzJ,EAAKpF,GAAIoQ,EAAK,EACxD9D,eAAe,OACfE,aAAa,KAGb7O,EAAAA,EAAAA,KAAC6S,GAAAA,QAAQ,CAAC3S,MAAO8Q,EAAe1Q,SAC7BmH,EAAKE,cAMbF,EAAKqL,SAAWlD,GAAgBmD,WAAa/S,EAAAA,EAAAA,KAAAgT,EAAAA,SAAA,CAAA1S,SACzCuP,GAAWpI,EAAK3E,MAAMgN,YAAemD,KAAKC,MAAMzL,EAAK0L,QAAmBvT,KAAI,SAACE,EAAMH,GAAC,OAAGK,EAAAA,EAAAA,KAACoT,EAAW,CAAStT,KAAMA,EAAMC,UAAU,GAAzBJ,EAAkC,MAE9I8H,EAAKqL,SAAWlD,GAAgByD,QAASrT,EAAAA,EAAAA,KAACC,EAAAA,QAAI,CAACC,MAAO,CAACmQ,EAAOiD,gBAAiBjD,EAAOkD,aAAajT,UACjGN,EAAAA,EAAAA,KAAC4B,EAAAA,QAAI,CAAC1B,MAAOmQ,EAAOmD,WAAWlT,SAAEmH,EAAK0L,gBAKlD,IAEA,IAAMM,GAAS,CACXvD,MAAM,CACJwD,WAAY,UACZjB,KAAM,OACNkB,SAAU,OACVC,eAAgB,UAChBC,gBAAiB,OACjBC,OAAQ,UACRC,eAAgB,UAChBC,MAAQ,yBACRC,aAAc,UACdC,aAAc,WAEhB/D,KAAK,CACHuD,WAAW,UACXjB,KAAM,UACNkB,SAAU,UACVC,eAAgB,UAChBC,gBAAiB,UACjBC,OAAQ,SACRC,eAAgB,UAChBC,MAAQ,yBACRC,aAAc,UACdC,aAAc,YAIdnD,GAAYX,IAAe,SAACG,GAAK,MAAI,CACvC4D,OAAMpJ,GAAA,CACJjC,gBAAiB2K,GAAOlD,GAAOmD,WAC/B3S,cAAe,MACfyH,WAAY,SACZD,eAAgB,gBAChBV,QAAS,IACW,QAAhBwB,EAAAA,QAASC,IAAgB,CAAE8K,UAAW,IAE5CrS,MAAO,CACLwM,MAAOkF,GAAOlD,GAAOkC,KACrB5Q,SAAU,GACVwS,WAAY,QAEdC,iBAAkB,CAChB/F,MAAOkF,GAAOlD,GAAOoD,SACrBY,WAAY,EACZF,WAAY,OAEdhD,cAAe,CACbtQ,cAAe,MACfyT,oBAAqB,EACrBC,uBAAwB,EACxB3L,gBAAiB2K,GAAOlD,GAAOmD,WAC/BhS,SAAU,SACVgT,YAAajB,GAAOlD,GAAOuD,OAC3BjM,QAAQ,GAEV0J,aAAc,CACZmD,YAAajB,GAAOlD,GAAOwD,eAC3BxS,YAAa,EACbsG,QAAQ,GAEV8M,aAAc,CACZtM,QAAS,GACTS,gBAAiB2K,GAAOlD,GAAOmD,YAEjC/B,WAAY,CACV7Q,MAAO,GACPgI,gBAAiB2K,GAAOlD,GAAOqD,eAC/BpL,WAAY,SACZoM,WAAY,IAEd9C,YAAa,CACXrQ,KAAM,EACNF,YAAa,EACbsT,OAAQ,GACRzU,eAAgB,EAChBsU,YAAajB,GAAOlD,GAAOuD,QAE7B/B,YAAa,CACXhR,cAAe,MACf8G,QAAS,EACT8F,gBAAiB,EACjBmH,kBAAmBrB,GAAOlD,GAAOuD,QAEnCnB,UAAW,CACToC,WAAY,YACZpT,UAAW,GACX4M,MAAOkF,GAAOlD,GAAOkC,KACrB3J,gBAAiB2K,GAAOlD,GAAOmD,YAEjCd,cAAe,CACbjR,UAAW,GACX4M,MAAOkF,GAAOlD,GAAOkC,KACrB3J,gBAAiB2K,GAAOlD,GAAOmD,YAEjCJ,gBAAiB,CACfxK,gBAAiB2K,GAAOlD,GAAOqD,eAC/B/L,QAAS,GACTmN,eAAgB,EAChBC,eAAgBxB,GAAOlD,GAAOuD,QAEhCP,YAAa,CACXzK,gBAAiB2K,GAAOlD,GAAOyD,OAEjCR,WAAY,CACVuB,WAAY,YACZxG,MAAOkF,GAAOlD,GAAOoD,UAGvBuB,cAAe,CACbnU,cAAe,MACfyH,WAAY,SACZoF,kBAAmB,GACnBD,gBAAiB,EACjBxN,aAAc,GAEhByR,eAAgB,CACdpJ,WAAY,SACZ2M,aAAc,IAEhBnD,cAAe,CACbnK,QAAS,EACTuN,YAAa,IAEfjD,mBAAoB,CAElBtK,QAAQ,EACR+F,kBAAkB,GAEpBiE,mBAAoB,CAClBtD,MAAO,OACP1M,SAAU,IAEf,IAEKoP,GAAoBb,IAAe,SAACG,GAAK,MAAI,CAC/C8E,KAAM,CACJxT,SAAU,GACV0M,MAAOkF,GAAOlD,GAAOoD,UAEvB2B,SAAU,CACRzT,SAAU,GACVyG,UAAW,GACX6M,aAAc,GACdd,WAAY,OACZ9F,MAAOkF,GAAOlD,GAAO0D,cAEvBsB,SAAU,CACR1T,SAAU,GACVyG,UAAW,GACX6M,aAAc,GACdd,WAAY,OACZ9F,MAAOkF,GAAOlD,GAAO0D,cAEvBuB,YAAa,CACX1M,gBAAiB2K,GAAOlD,GAAO2D,aAC/BrM,QAAS,EACT1H,aAAc,EACd4U,WAAY,aAEdU,WAAY,CACV3M,gBAAiB2K,GAAOlD,GAAO2D,aAC/BrM,QAAS,GACT1H,aAAc,EACd4U,WAAY,aAEjB,I,+kBC1RD,IA0IM1E,GAAS3C,EAAAA,QAAWvI,OAAO,CAC/BuQ,UAAW,CACTjU,KAAM,GAERkU,iBAAkB,CAChB5U,cAAe,MACfwH,eAAgB,SAChBV,QAAS,GACTmN,eAAgB,EAChBC,eAAgB,OAChBpK,QAAS,GAEX+K,cAAe,CACb7U,cAAe,MACfyH,WAAY,SACZoF,kBAAmB,GACnBD,gBAAiB,EACjBxN,aAAc,EACdE,iBAAkB,GAEpBwV,kBAAmB,CACjBtH,MAAO,OACPgG,WAAY,EACZF,WAAY,SAKhB,SApJY,SAACyB,GACX,IAAMvF,GAAQwF,EAAAA,EAAAA,kBACNC,GAASC,EAAAA,EAAAA,kBAATD,KACRzK,GAA0BC,EAAAA,EAAAA,UAAqB,IAAGC,GAAAC,EAAAA,EAAAA,SAAAH,EAAA,GAA3C9G,EAAKgH,EAAA,GAAEmF,EAAQnF,EAAA,GAEtByK,GAA4C1K,EAAAA,EAAAA,UAAwB,MAAK2K,GAAAzK,EAAAA,EAAAA,SAAAwK,EAAA,GAAlEE,EAAcD,EAAA,GAAErF,EAAiBqF,EAAA,GACxCE,GAAoD7K,EAAAA,EAAAA,UAAS,GAAE8K,GAAA5K,EAAAA,EAAAA,SAAA2K,EAAA,GAAxDE,EAAkBD,EAAA,GAAEE,EAAqBF,EAAA,GAC1C3F,GAAY8F,EAAAA,EAAAA,QAA+B,CAAC,IAClD3Q,EAAAA,EAAAA,YAAU,WACR8K,EAASkF,EAAM/F,KAAKnQ,KAAI,SAACF,EAAGC,GAAC,OAAAoL,GAAAA,GAAA,GAAQrL,GAAC,IAAE2C,GAAG,GAAG1C,IAAMmT,OAAOpT,EAAEoT,QAA6BlD,GAAgB8G,MAAI,KAC9G5F,EAAkB,KACpB,GAAG,CAACgF,EAAM/F,QACVjK,EAAAA,EAAAA,YAAU,WACRgQ,EAAMa,QAAQrF,QAAU,CACtB7M,MAAMA,EACNmS,gBAAgB,WAAD,IAAAC,GAAAzU,EAAAA,EAAAA,UAAE,YACf,IAAK,IAAMgP,KAAQ3M,EACboL,GAAWuB,EAAKtO,MAAMgN,mBAClBe,EAAYO,EAAK/O,IAG7B,IANe,OAMd,WANc,OAAAwU,EAAApU,MAAA,KAAAC,UAAA,EAAC,GAQpB,GAAG,CAAC+B,IAGJ,IAcMoM,EAAW,eAAAhR,GAAAuC,EAAAA,EAAAA,UAAG,UAAOC,GACzBuO,GAAS,SAAAO,GAAS,OAChBA,EAAUvR,KAAI,SAAAwR,GAAI,OAChBA,EAAK/O,KAAOA,EAAE0I,GAAAA,GAAA,GACLqG,GAAI,IAAE0B,OAAQlD,GAAgBkH,UACnC1F,CAAI,GACT,IAGH,IAnEatO,EAAe8B,EAmEtBwM,EAAO3M,EAAMsS,MAAK,SAAAC,GAAC,OAAIA,EAAE3U,KAAOA,CAAE,IACxC,GAAK+O,IAA6C,IAArCvB,GAAWuB,EAAKtO,MAAMgN,WAEnC,IACE,IAAMmH,QAvEKnU,EAuEkBsO,EAAKtO,KAvER8B,EAuEcwM,EAAKzJ,QAtE1C,IAAIjC,SAAQ,SAACwR,EAASC,GAC3B,IACa,SAAPrU,EACFoU,EAAQ3S,EAAa,CAACK,MAAAA,IAAQwS,MAAK,SAAA1X,GAAC,OAAEuT,KAAKoE,UAAU3X,EAAE,KAE1C,aAAPoD,EACNwU,QAAQC,IAAI,QAGZL,EAAQ,GAEZ,CAAE,MAAOlD,GACPmD,EAAO,UAAUnD,IACnB,CACF,KAyDIpD,GAAS,SAAAO,GAAS,OAChBA,EAAUvR,KAAI,SAAAwR,GAAI,OAChBA,EAAK/O,KAAOA,EAAE0I,GAAAA,GAAA,GAELqG,GAAI,IACP+B,OAAQ8D,EACRrF,eAAgB2E,EAChBzD,OAAQlD,GAAgBmD,YAE1B3B,CAAI,GACT,IAEHoF,GAAsB,SAAAgB,GAAI,OAAIA,EAAO,CAAC,GACxC,CAAE,MAAOxD,GACPpD,GAAS,SAAAO,GAAS,OAChBA,EAAUvR,KAAI,SAAAwR,GAAI,OAChBA,EAAK/O,KAAOA,EAAE0I,GAAAA,GAAA,GAELqG,GAAI,IACP+B,OAAQsE,OAAOzD,GACfpC,eAAgB2E,EAChBzD,OAAQlD,GAAgByD,QAE1BjC,CAAI,GACT,IAEHoF,GAAsB,SAAAgB,GAAI,OAAIA,EAAO,CAAC,GACxC,CACF,IAAC,gBA1CgBhV,GAAA,OAAA3C,EAAA4C,MAAA,KAAAC,UAAA,KA6CXkH,GAAoB8N,EAAAA,EAAAA,cAAY,SAAA9U,GAA8B,IAA5B6E,EAAI7E,EAAJ6E,KACtC,OAAOzH,EAAAA,EAAAA,KAAC2X,GAAI,CACVpH,MAAOA,EACP9I,KAAMA,EACNiJ,WAAY0F,IAAmB3O,EAAKpF,GACpCsO,UAAWA,EACXC,SAAUA,EACVC,YAAaA,EACbC,kBAAmBA,GAEvB,GAAG,CAACsF,EAAgB3R,IACpB,OACElE,EAAAA,EAAAA,MAACqX,EAAAA,QAAY,CAAC1X,MAAOmQ,GAAOqF,UAAUpV,SAAA,EACpCN,EAAAA,EAAAA,KAAC6X,GAAY,CAACtV,KAAMkC,EAAOqJ,QAAS8C,EAAUtF,MAAO,SAAA5L,GAAC,OAAEA,EAAE2C,EAAE,EAAE2L,WAAYpE,KAE1E5J,EAAAA,EAAAA,KAACC,EAAAA,QAAI,CAACC,MAAOmQ,GAAOsF,iBAAiBrV,SAClCwX,OAAOC,QAAQlI,IAAYjQ,KAAI,SAAAyD,EAAS1D,GAAK,IAAD+D,GAAAgI,EAAAA,EAAAA,SAAArI,EAAA,GAAX2U,EAACtU,EAAA,GAAEhE,EAACgE,EAAA,GAC9BuU,EAAmC,CACvCnP,gBAAiBpJ,EAAE6Q,IAErB,OAAOhQ,EAAAA,EAAAA,MAACC,EAAAA,QAAgB,CAExBN,MAAO,CAACmQ,GAAOuF,cAAeqC,GAC9BxX,QAAS,WAAF,OAlFC,SAACqC,GACf,IAAMoV,EAAoB,CACxB7V,GAAI4D,KAAKkS,MAAM5N,WACfzH,KAAAA,EACA6E,QAASkI,GAAW/M,GAAMiN,KAAKtL,GAC/B0O,OAAQ,GACRvB,eAAgB,KAChBkB,OAAQlD,GAAgB8G,MAG1B9F,GAAS,SAAAO,GAAS,SAAA/J,QAAAC,EAAAA,EAAAA,SAAQ8J,GAAS,CAAE+G,GAAU,GACjD,CAuEuBE,CAAQJ,EAAc,EAAC1X,SAAA,EAEtCN,EAAAA,EAAAA,KAACoO,EAAAA,QAAI,CAACC,KAAM3O,EAAEsQ,SAAU1B,KAAM5O,EAAEuQ,SAAU1B,MAAM,UAChDvO,EAAAA,EAAAA,KAAC4B,EAAAA,QAAI,CAAC1B,MAAOmQ,GAAOwF,kBAAkBvV,SAAE0V,EAAKgC,OALxCrY,EAOP,QAIR,E,8OCpJA,IAAM0Y,IAAkBC,EAAAA,EAAAA,eAAqE,CAAEC,OAAQ,CAAC,EAAGC,UAAW,WAAO,IAEhHC,GAAmB,SAAC3C,GAC/B,IAAAvK,GAAgCC,EAAAA,EAAAA,WAAS,GAAMC,GAAAC,EAAAA,EAAAA,SAAAH,EAAA,GAAxCmN,EAAQjN,EAAA,GAAEkN,EAAWlN,EAAA,GAC5ByK,GAA4B1K,EAAAA,EAAAA,UAAiB,CAAC,GAAE2K,GAAAzK,EAAAA,EAAAA,SAAAwK,EAAA,GAAzCqC,EAAMpC,EAAA,GAAEqC,EAASrC,EAAA,GAOxB,OANArQ,EAAAA,EAAAA,YAAU,WACR8S,GAAAA,QAAaC,QAAQ,UAAUzB,MAAK,SAAC1X,GACnC8Y,EAAU9Y,EAAEuT,KAAKC,MAAMxT,GAAG,CAAC,GAC3BiZ,GAAY,EACd,GACF,GAAG,IACID,GACL1Y,EAAAA,EAAAA,KAACqY,GAAgBS,SAAQ,CAAC7V,MAAO,CAAEsV,OAAAA,EAAQC,UAAAA,GAAYlY,SACpDwV,EAAMxV,YAGTN,EAAAA,EAAAA,KAAAgT,EAAAA,SAAA,GAEJ,EAEM+F,GAAW,IAAIC,IAErB,oBACE,IAAAC,GAA8BC,EAAAA,EAAAA,YAAWb,IAAjCE,EAAMU,EAANV,OAAQC,EAASS,EAATT,UACRW,GAASC,EAAAA,EAAAA,kBAATD,KACFE,GAAYC,EAAAA,EAAAA,UAAQ,WAAK,IAADC,EAC5B,OAAO,IAAIP,IAAIT,EAAO,IAAY,OAATgB,EAAAJ,EAAKK,WAAI,EAATD,EAAWlX,KAAM,OAAS0W,EACrD,GAAG,CAACR,EAAQY,IACNM,GAAY/B,EAAAA,EAAAA,cAAY,SAAChY,GAAiB,IAADga,EACvCC,E,6WAAS5O,CAAA,GAAOwN,GACtBoB,EAAU,IAAY,OAATD,EAAAP,EAAKK,WAAI,EAATE,EAAWrX,KAAM,MAAIgF,EAAAA,EAAAA,SAAO3H,EAAEka,UAC3ChB,GAAAA,QAAaiB,QAAQ,SAAU5G,KAAKoE,UAAUsC,IAAYvC,MAAK,kBAAIoB,EAAUmB,EAAU,GACzF,GAAG,CAACR,EAAMZ,IAWV,MAAO,CACLc,UAAAA,EACAS,aAZmB,SAACzX,GACpB,IAAM0X,EAAa,IAAIf,IAAIK,GAC3BU,EAAWC,IAAI3X,GACfoX,EAAUM,EACZ,EASEE,gBARsB,SAAC5X,GACvB,IAAM0X,EAAa,IAAIf,IAAIK,GAC3BU,EAAW9V,OAAO5B,GAClBoX,EAAUM,EACZ,EAMD,E,wtCC3BD,SApByB,SAAEjE,GACzB,IAAMoE,EAAQpV,OAAetD,EAAWsU,EAAMhT,MACtCuW,EAAcc,KAAdd,UACF9W,EAAsB,WAAfuT,EAAMhT,KAAmBoX,EAAY,MAALA,OAAK,EAALA,EAAOza,QAAO,SAAAC,GAAC,OAAE2Z,EAAUe,IAAI1a,EAAE2C,GAAG,IACzE2T,GAASC,EAAAA,EAAAA,kBAATD,KAEFqE,EAAuB,eADdpT,EAAAA,EAAAA,oBAC0B,EAAE,EAC3C,OACE1G,EAAAA,EAAAA,MAAC+Z,GAAAA,QAAY,CAAAha,SAAA,EACXC,EAAAA,EAAAA,MAACN,EAAAA,KAAI,CAACC,MAAO,CAACa,cAAc,OAAOT,SAAA,EACjCN,EAAAA,EAAAA,KAACsa,GAAAA,QAAc,CAACpa,MAAO,CAACuB,KAAK,GAAI8Y,YAAY,EAAMja,SAAe,WAAbwV,EAAMhT,KAAgBkT,EAAK,SAASA,EAAK,kBAChF,WAAbF,EAAMhT,OAAmB9C,EAAAA,EAAAA,KAACwa,GAAAA,QAAe,CAACta,MAAO,CAAC0K,SAAS,WAAY6P,MAAM,GAAIha,QAAS,WAAF,OAAMmH,EAAAA,EAAAA,UAAS,oBAAqB,CAAC9E,KAAK,UAAU,EAACxC,UAACN,EAAAA,EAAAA,KAACsa,GAAAA,QAAS,CAACI,KAAK,OAAOxa,MAAO,CAAC2U,OAAOwF,UAEpL9X,GAAQA,EAAK3C,KAAI,SAAAF,GAAC,OACjBM,EAAAA,EAAAA,KAACsa,GAAAA,QAAS,CAAYrP,KAAM,SAAC0P,GAAM,OAAG3a,EAAAA,EAAAA,KAACsa,GAAAA,QAASvP,GAAAA,GAAA,GAAK4P,GAAM,IAAED,KAAmB,WAAb5E,EAAMhT,KAAgB,WAAW,kBAAmB,EAAEf,MAAOrC,EAAEqC,MAAOtB,QAAS,WAAF,OAAMmH,EAAAA,EAAAA,UAAsB,WAAbkO,EAAMhT,KAAgB,oBAAoB,aAAc,CAACT,GAAG3C,EAAE2C,IAAI,EAAEnC,MAAO,CAAC2H,QAAQwS,IAAnO3a,EAAE2C,GAAkP,MAI9Q,EChBA,IAAMuY,GAAiB,WACrB,IAAMrK,GAAQwF,EAAAA,EAAAA,kBACd,OAAOxV,EAAAA,EAAAA,MAACoI,EAAAA,QAAU,CAACzI,MAAO,CAACuB,KAAK,EAAGqH,gBAAgB2K,EAAAA,OAAOlD,GAAOmD,YAAYpT,SAAA,EACzEN,EAAAA,EAAAA,KAAC6a,GAAgB,CAAC/X,KAAM,YACxB9C,EAAAA,EAAAA,KAAC6a,GAAgB,CAAC/X,KAAM,WAE9B,EAEMgY,GAAgB,WACpB,IAAMvK,GAAQwF,EAAAA,EAAAA,kBACd,OAAO/V,EAAAA,EAAAA,KAAC2I,EAAAA,QAAU,CAACzI,MAAO,CAACuB,KAAK,EAAGqH,gBAAgB2K,EAAAA,OAAOlD,GAAOmD,YAAYpT,UAC3EN,EAAAA,EAAAA,KAAC+a,EAAAA,eAAc,KAEnB,EClBO,IAAMC,GAAO,CAChBC,WAAW,CACTlZ,MAAM,OACNmZ,UDiBS,SAAmBrb,GAAYA,EAAVsb,WAAiBtb,EAALub,MAAwC,IAC9EpF,GAASC,EAAAA,EAAAA,kBAATD,KACFzF,GAAQwF,EAAAA,EAAAA,kBACRxH,EAAQkF,EAAAA,OAAOlD,GAAOkC,KACtB4I,EAA2B,CAC/B,CAACtZ,MAAOiU,EAAK,YAAakF,UAAUN,GAAgBF,MAAK1a,EAAAA,EAAAA,KAACsa,GAAAA,QAAS,CAACI,KAAM,sBAAwBY,YAAY,WAAD,OAAKtb,EAAAA,EAAAA,KAAAgT,EAAAA,SAAA,GAAK,GACvH,CAACjR,MAAOiU,EAAK,UAAWkF,UAAUJ,GAAeJ,MAAK1a,EAAAA,EAAAA,KAACsa,GAAAA,QAAS,CAACI,KAAM,oBAAsBY,YAAY,WAAD,OAAKtb,EAAAA,EAAAA,KAAAgT,EAAAA,SAAA,GAAK,IAEpH,OAAOhT,EAAAA,EAAAA,KAACub,EAAAA,YAAW,CAACF,SAAUA,EAAUtZ,MAAOiU,EAAK,QAAQ1V,UAC1DC,EAAAA,EAAAA,MAACN,EAAAA,QAAI,CAACC,MAAO,CAACsb,SAAS,EAAG1a,MAAM,MAAOwH,UAAU,IAAIhI,SAAA,EACnDN,EAAAA,EAAAA,KAAC4B,EAAAA,KAAI,CAAC1B,MAAO,CAAC2B,SAAS,GAAI0M,MAAAA,GAAOjO,SAAC,eACnCN,EAAAA,EAAAA,KAACC,EAAAA,QAAI,CAACC,MAAO,CAAC4I,gBAAgB2K,EAAAA,OAAOiB,YAAa9L,OAAO,EAAG9H,MAAM,WAElEd,EAAAA,EAAAA,KAACC,EAAAA,QAAI,CAACC,MAAO,CAAC0I,OAAO,OACrB5I,EAAAA,EAAAA,KAAC+a,EAAAA,eAAc,QAGrB,ECjCMU,KAAK,QAEPC,WAAY,CACVD,KAAM,QACN1Z,MAAO,QACPmZ,UCES,SAAmBrb,GAA0D,IAAD8b,EAAAC,EAAAC,EAAAC,ECZxDzZ,EDYE8Y,EAAUtb,EAAVsb,WAAYC,EAAKvb,EAALub,MACzCW,EAAS,CACbC,aAA+Bxa,KAAjB,MAAL4Z,GAAa,OAARO,EAALP,EAAOW,aAAF,EAALJ,EAAetZ,IACxBA,GAAI4Z,SAAc,MAALb,GAAa,OAARQ,EAALR,EAAOW,aAAF,EAALH,EAAevZ,IAC5BQ,cAAoCrB,KAArB,MAAL4Z,GAAa,OAARS,EAALT,EAAOW,aAAF,EAALF,EAAehZ,UAAqBoZ,SAAc,MAALb,GAAa,OAARU,EAALV,EAAOW,aAAF,EAALD,EAAejZ,eAAUrB,GAE5EmV,GAAwDF,EAAAA,EAAAA,UACtDT,GAASC,EAAAA,EAAAA,kBAATD,KACAmD,GAASC,EAAAA,EAAAA,kBAATD,KACR+C,EAAqD/B,KAA7Cd,EAAS6C,EAAT7C,UAAWS,EAAYoC,EAAZpC,aAAcG,EAAeiC,EAAfjC,gBAE3BtS,GCvB2BtF,EDuBN0Z,EAAOC,aAAQxa,EAAUua,EAAO1Z,ICtB1C0C,EAAAA,EAAAA,UAAS,CAAC,UAAW1C,IAAGD,EAAAA,EAAAA,UAAG,mBAAWC,QAASF,EAAcE,QAAIb,CAAS,KAAnFe,MDuBF8B,EAAWS,EAAeiX,EAAOC,aAAQxa,EAAUua,EAAO1Z,IAC1D8Z,GAAe7C,EAAAA,EAAAA,UAAQ,WAAK,IAAD1W,EAC/B,OAAkC,OAAlCA,EAAQmZ,EAAOC,QAAQ,GAAG3X,QAAQ,EAA3BzB,EAA8BhD,KAAI,SAAAF,GAAC,MAAG,CAACoD,KAAKpD,EAAEoD,KAAkB6E,QAAQjI,EAAEqC,MAAOoR,OAAOzT,EAAEZ,aAAe,GAAI8S,eAAelS,EAAE0c,OAAOC,gBAAgBJ,SAASvc,EAAE0c,OAAOC,gBAAiB,IAAI,KAAMvJ,OAAOpT,EAAE0c,OAAOE,iBAAiB,GAC5O,GAAG,CAACjY,IACEkY,EAAkBvX,IACxBuG,GAA0BC,EAAAA,EAAAA,YAAkBC,GAAAC,EAAAA,EAAAA,SAAAH,EAAA,GAArCxJ,EAAK0J,EAAA,GAAE+Q,EAAQ/Q,EAAA,GACtByK,GAAgC1K,EAAAA,EAAAA,WAAS,GAAM2K,GAAAzK,EAAAA,EAAAA,SAAAwK,EAAA,GAAxCuG,EAAQtG,EAAA,GAAEuG,EAAWvG,EAAA,GACtBwG,EAAc,WACd,GAAKxD,EAAKK,KAAV,CAGF,IAAIoD,EACE9d,EAAc6X,EAAQrF,QAASqF,EAAQrF,QAAQ7M,MAAM7E,KAAI,SAACF,EAAGC,GACjE,IAAId,GAAMge,EAAAA,GAAAA,OAAMnd,EAAEiI,SAASmV,WAAW,QAAS,IAI/C,OAHGje,EAAIU,OAAS,KACdV,EAAMA,EAAIQ,UAAU,EAAG,IAAU,OAE5BR,CACT,IAAGke,KAAK,QAAQ,GAUhB,OATIhB,EAAOC,QACPY,EAAUL,EAAgBpX,OAAO,CAAC6X,OAAO7D,EAAKK,KAAKnX,GAAIQ,SAASkZ,EAAOlZ,SAAUC,KAAK,OAAQma,MAAO,EAAGlb,MAAMA,GAAS,GAAIjD,YAAAA,EAAasd,OAAO,CAAC,IAAIhF,MAAK,SAAC1X,GAExJ,OADAkI,EAAAA,EAAAA,UAAS,aAAc,CAACvF,GAAG3C,IACpBA,CACT,SAEe8B,IAAVmG,IACPiV,EAAUL,EAAgB/W,OAAO,CAACnD,GAAIsF,EAAQtF,GAAIsB,QAAOoH,GAAAA,GAAA,GAAMpD,GAAO,IAAE5F,MAAMA,GAAS4F,EAAQ5F,MAAOjD,YAAAA,MAAesY,MAAK,kBAAI2E,EAAO1Z,EAAE,KAElIua,CAlBP,CAmBJ,EAEMM,EAAS,WACb,IAAMN,EAAUD,IACT,MAAPC,GAAAA,EAASxF,MAAK,SAACvU,GAAY,IAAD0W,EAClByD,EAAkB,OAAZzD,EAAGJ,EAAKK,WAAI,EAATD,EAAWlX,GACpB2Z,EAAUgB,GAAUrG,EAAQrF,QAASqF,EAAQrF,QAAQ7M,MAAM7E,KAAI,SAACF,EAAGC,GAAC,MAAI,CAC5Eqd,OAAAA,EAAQna,SAAAA,EAAUC,KAAKpD,EAAEoD,KAAMma,MAAMtd,EAAGb,YAAYY,EAAEyT,OAAQpR,MAAMrC,EAAEiI,QAASyU,OAAO,CAACC,gBAAmC,OAAnB3c,EAAEkS,eAAsB,GAAGlS,EAAEkS,sBAAiBpQ,EAAW8a,iBAAkB5c,EAAEoT,QAAS,IAAG,GAClM,OAAOyJ,EAAgB1W,YAAY,CAACmW,QAAAA,EAASmB,QAAQ,CAACta,SAAAA,IACxD,GACF,GAEAua,EAAAA,EAAAA,kBAAgB,WACTrB,EAAOC,SACRU,GAAY,GACZF,EAASxG,EAAK,cAEPrO,IACP+U,GAAY,GACZF,EAAS7U,EAAQ5F,OACjB+X,EAAanS,EAAQtF,IAEzB,GAAG,CAACsF,KAENyV,EAAAA,EAAAA,kBAAgB,YACVrB,EAAOC,SAAWrU,IAClBwT,EAAWkC,WAAW,CAClBtb,MAAAA,EACAuZ,YAAa,WAAF,OAAQ/a,EAAAA,EAAAA,MAACN,EAAAA,QAAI,CAACC,MAAO,CAACa,cAAe,OAAOT,SAAA,EACrDN,EAAAA,EAAAA,KAACsd,EAAAA,aAAY,CAACvb,MAAO,eAAM7B,MAAO,CAAC0I,OAAO,GAAIgM,WAAW,EAAGQ,YAAY,IAAK3U,QAAS,WAAF,OAAMic,GAAY,EAAK,KAC3G1c,EAAAA,EAAAA,KAACsd,EAAAA,aAAY,CAACvb,MAAO,eAAMtB,QAASyc,EAAQhd,MAAO,CAAC0U,WAAW,EAAGQ,YAAY,OAC9EpV,EAAAA,EAAAA,KAACsd,EAAAA,aAAY,CAACvb,MAAO,SAAKtB,QAAS8c,EAAMrd,MAAO,CAAC0U,WAAW,EAAGQ,YAAY,QACtE,EACPoI,aAAcf,GAGxB,GAAG,CAACtB,EAAYxT,EAAStD,EAAUtC,EAAO0a,IAE1C,IAkBMc,EAAO,WACX5V,GAAWsS,EAAgBtS,EAAQtF,IAnBxB,WACX,GAAG8Y,EAAWsC,YACZtC,EAAWuC,aACR,CACH,IAAIC,OAA0Bnc,EAC9B,GAAGmG,GAAW0R,EAAU/K,KAAO,EAAE,CAC/B,IAAMsL,GAAMvS,EAAAA,EAAAA,SAAOgS,EAAUO,UACvBja,EAAIia,EAAO9M,WAAU,SAAApN,GAAC,OAAEA,IAAIiI,EAAQtF,EAAE,IAC5Csb,GAAUhe,GAAG,EAAEia,EAAOnT,MAAM9G,GAAGia,GAAQ,EACzC,MACapY,IAATmc,EACFxC,EAAWvT,SAAS,aAAc,CAACvF,GAAGsb,IAGtCxC,EAAWvT,SAAS,aAAc,CAACgW,IAAI,GAE3C,CACF,CAGEC,EACF,EAEA,OAAO7d,EAAAA,EAAAA,KAAC8d,EAAAA,KAAU,CAAC5d,MAAO,CAACY,MAAM,OAAQ8H,OAAO,QAAQtI,UACrDN,EAAAA,EAAAA,KAAC2I,EAAAA,QAAU,CAACzI,MAAO,CAACuB,KAAK,GAAIoH,sBAAuB,CAAC2S,SAAS,GAAGlb,SAChEmc,GAAWlc,EAAAA,EAAAA,MAAAyS,EAAAA,SAAA,CAAA1S,SAAA,MACAkB,IAARO,IAAqB/B,EAAAA,EAAAA,KAACiP,EAAAA,QAAS,CAAC8O,KAAK,WAAW9a,MAAOlB,EAAOyM,aAAcgO,EAAUtc,MAAO,CAACC,aAAa,GAAI0U,OAAO,MACvH7U,EAAAA,EAAAA,KAACsd,EAAAA,aAAY,CAACvb,MAAOiU,EAAK,QAASvV,QAASkc,EAAazc,MAAO,CAAC0I,OAAO,GAAI+E,gBAAgB,OAC5F3N,EAAAA,EAAAA,KAACsd,EAAAA,aAAY,CAACvb,MAAOiU,EAAK,UAAWvV,QAAS,WAAF,OAAMic,GAAY,EAAM,EAAExc,MAAO,CAAC0I,OAAO,GAAI+E,gBAAgB,MACxGhG,IAAW3H,EAAAA,EAAAA,KAACsd,EAAAA,aAAY,CAACvb,MAAOiU,EAAK,UAAWgI,UAAW,CAACzP,MAAM,OAAQrO,MAAO,CAAC0I,OAAO,GAAI+E,gBAAgB,IAAKlN,QAAS,WAAF,OAAM8b,EAAgBtY,OAAO0D,EAAQtF,IAAI+U,MAAK,SAAA1X,GAAC,OAAE6d,GAAM,GAAC,YAEpK/b,IAAhB2a,IAA6Bnc,EAAAA,EAAAA,KAACie,GAAW,CAAClO,KAAMoM,EAAcxF,QAASA,OAG7E,GDjHIuH,kBAAmB,CACjBzC,KAAM,WACN1Z,MAAO,WACPmZ,UGNS,SAA0Brb,GAA+D,IAAD8b,EAAAC,EAAAC,EAAAC,EAA3DX,EAAUtb,EAAVsb,WAAYC,EAAKvb,EAALub,MAChDW,EAAS,CACbC,aAA+Bxa,KAAjB,MAAL4Z,GAAa,OAARO,EAALP,EAAOW,aAAF,EAALJ,EAAetZ,IACxBA,GAAyB,OAAf,MAAL+Y,GAAa,OAARQ,EAALR,EAAOW,aAAF,EAALH,EAAevZ,IAAS,IAAI4Z,SAAc,MAALb,GAAa,OAARS,EAALT,EAAOW,aAAF,EAALF,EAAexZ,IACzDS,KAAW,MAALsY,GAAa,OAARU,EAALV,EAAOW,aAAF,EAALD,EAAehZ,MAEfkT,GAASC,EAAAA,EAAAA,kBAATD,KACAmD,GAASC,EAAAA,EAAAA,kBAATD,KAGFgF,EADWrZ,EAAe,GAE1ByX,EAAkBvX,IAClB2C,EAAUoU,EAAOC,SAAsB,MAAJmC,OAAV3c,EAAU2c,EAAMpH,MAAK,SAAArX,GAAC,OAAEA,EAAE2C,KAAK0Z,EAAO1Z,EAAE,IACvEkJ,GAA0BC,EAAAA,EAAAA,YAAkBC,GAAAC,EAAAA,EAAAA,SAAAH,EAAA,GAArCxJ,EAAK0J,EAAA,GAAE+Q,EAAQ/Q,EAAA,GACtByK,GAAgC1K,EAAAA,EAAAA,WAAS,GAAM2K,GAAAzK,EAAAA,EAAAA,SAAAwK,EAAA,GAAxCkI,EAAQjI,EAAA,GAAEkI,EAAWlI,EAAA,GACtBrT,EAAOiZ,EAAOC,QAAQD,EAAOjZ,KAAY,MAAP6E,OAAO,EAAPA,EAAS7E,KAC3C+a,EAAO,WACR1C,EAAWsC,YACZtC,EAAWuC,SAEXvC,EAAWvT,SAAS,aAAc,CAACgW,IAAI,GAE3C,EAqBMU,EAAe,CACnB,OAAUtI,EAAK,aAGXuI,EAAS,WAAKF,GAAY,EAAK,GACrCjB,EAAAA,EAAAA,kBAAgB,WACXrB,EAAOC,SACRqC,GAAY,GACZ7B,EAAS8B,EAAavC,EAAOjZ,QAEtB6E,IACP0W,GAAY,GACZ7B,EAAS7U,EAAQ5F,OAErB,GAAG,CAAC4F,EAAS7E,KAEbsa,EAAAA,EAAAA,kBAAgB,WACVrB,EAAOC,QACTb,EAAWkC,WAAW,CACpBG,aAAY,IAIZrC,EAAWkC,WAAW,CAClBtb,OAAc,MAAP4F,OAAO,EAAPA,EAAS5F,QAASiU,EAAK,iBAC9BsF,YAAa,WAAF,OAAQ/a,EAAAA,EAAAA,MAACN,EAAAA,QAAI,CAACC,MAAO,CAACa,cAAe,OAAOT,SAAA,CACpC,YAAT,MAAPqH,OAAO,EAAPA,EAAS7E,QAAmB9C,EAAAA,EAAAA,KAACsd,EAAAA,aAAY,CAACvb,MAAO,SAAK7B,MAAO,CAAC0I,OAAO,GAAIgM,WAAW,EAAGQ,YAAY,IAAK3U,QAAS,WAAF,OAAMmH,EAAAA,EAAAA,UAAS,aAAc,CAAC/E,SAAS8E,EAAQtF,IAAI,IACjKsF,IAAYoU,EAAOC,UAAYhc,EAAAA,EAAAA,KAACsd,EAAAA,aAAY,CAACvb,MAAO,eAAM7B,MAAO,CAAC0I,OAAO,GAAIgM,WAAW,EAAGQ,YAAY,IAAK3U,QAAS8d,MAClH,EACPf,aAAcY,GAGxB,GAAG,CAACjD,EAAYxT,EAAS7E,EAAMsb,IAE/B,IAAMI,EAAiBzC,EAAOC,SAAWoC,EAEzC,OAAOpe,EAAAA,EAAAA,KAAC8d,EAAAA,KAAU,CAAC5d,MAAO,CAACY,MAAM,OAAQ8H,OAAO,OAAQE,gBAAgB,eAAexI,SACpFke,GACCje,EAAAA,EAAAA,MAAAyS,EAAAA,SAAA,CAAA1S,SAAA,MACWkB,IAARO,IAAqB/B,EAAAA,EAAAA,KAACiP,EAAAA,QAAS,CAAC8O,KAAK,WAAW9a,MAAOlB,EAAOyM,aAAcgO,EAAUtc,MAAO,CAACC,aAAa,GAAI0U,OAAO,MACvH7U,EAAAA,EAAAA,KAACsd,EAAAA,aAAY,CAACvb,MAAOiU,EAAK,QAASvV,QA5D1B,WAAK,IAADge,EACjB,GAAKtF,EAAKK,WAAiBhY,IAARO,IAA8B,MAAP4F,OAAO,EAAPA,EAAS5F,SAAUA,QAAiBP,IAAPsB,EAAvE,CAIA,IAAI8Z,EACJ,GAAIb,EAAOC,QAAQ,CACf,IAAM0C,EAAgB,MAAJP,OAAI,EAAJA,EAAM1e,QAAO,SAAAC,GAAC,OAAEA,EAAEoD,MAAQiZ,EAAOjZ,IAAI,IACvD8Z,EAAUL,EAAgBpX,OAAO,CAAC6X,OAAO7D,EAAKK,KAAKnX,GAAIQ,SAAS,EAAGC,KAAAA,EAAMma,QAAiB,MAATyB,OAAS,EAATA,EAAWnf,SAAU,GAAK,EAAGwC,MAAAA,EAAOqa,OAAO,CAAC,IAAIhF,MAAK,SAAA1X,IAClIkI,EAAAA,EAAAA,UAAS,oBAAqB,CAACvF,GAAG3C,GACtC,GACJ,WACmB8B,IAAVmG,IACLiV,EAAUL,EAAgB/W,OAAO,CAACnD,GAAIsF,EAAQtF,GAAIsB,QAAOoH,EAAAA,EAAA,GAAMpD,GAAO,IAAE7E,KAAAA,EAAMf,MAAAA,OAE3E,OAAP0c,EAAA7B,IAAA6B,EAASrH,MAAK,WACViH,GAAY,EAChB,GAbA,MAFIA,GAAY,EAgBlB,EA0C0Dne,MAAO,CAAC0I,OAAO,GAAI+E,gBAAgB,OACvF3N,EAAAA,EAAAA,KAACsd,EAAAA,aAAY,CAACvb,MAAOiU,EAAK,UAAWvV,QAASsb,EAAOC,QAAQ6B,EAAK,kBAAIQ,GAAY,EAAM,EAAEne,MAAO,CAAC0I,OAAO,GAAI+E,gBAAgB,MAC5HhG,IAAW3H,EAAAA,EAAAA,KAACsd,EAAAA,aAAY,CAACvb,MAAOiU,EAAK,UAAWgI,UAAW,CAACzP,MAAM,OAAQrO,MAAO,CAAC0I,OAAO,GAAI+E,gBAAgB,IAAKlN,QAAS,WAAF,OAAM8b,EAAgBtY,OAAO0D,EAAQtF,IAAI+U,MAAK,SAAA1X,GAAC,OAAEme,GAAM,GAAC,QAEpL7d,EAAAA,EAAAA,KAAC2I,EAAAA,QAAU,CAACzI,MAAO,CAACuB,KAAK,GAAIoH,sBAAuB,CAAC2S,SAAS,GAAGlb,SAC9DqH,IAAW3H,EAAAA,EAAAA,KAAC2e,EAAW,CAACjW,cAAef,OAGhD,I,+kBChGA,oBACI,IAAOqO,GAAQC,EAAAA,EAAAA,kBAARD,KACP,OAAOzV,EAAAA,EAAAA,MAACoI,EAAAA,QAAU,CAACzI,MAAO,CAACuB,KAAK,GAAGnB,SAAA,EAC/BN,EAAAA,EAAAA,KAACsa,GAAAA,QAAS,CAACrP,KAAM,SAAA0P,GAAM,OAAE3a,EAAAA,EAAAA,KAACsa,GAAAA,QAASvP,GAAAA,GAAA,GAAK4P,GAAM,IAAED,KAAM,SAAU,EAAE3Y,MAAOiU,EAAK,QAASvV,QAAS,WAAF,OAAMmH,EAAAA,EAAAA,UAAS,aAAa,KAC1H5H,EAAAA,EAAAA,KAAC6a,GAAgB,CAAC/X,KAAM,UACxB9C,EAAAA,EAAAA,KAAC6a,GAAgB,CAAC/X,KAAM,aAE/B,E,mnBCLD,IAAM8b,GAAS,eAAA/e,GAAAuC,EAAAA,EAAAA,UAAG,YACd,IAAM1B,QAAgB,sDACtB,MAAO,CACHsa,KAAAA,GACA6D,MAAAA,EAAAA,MACAC,SAAU,CAAEpe,EAAQqe,QAAQ,MAC5BC,SAAU,YACVC,cAAe,CACXC,UAAW,WACP,MAAO,WACX,GAEJC,WAAY,CACRnE,KAAM,aACN6D,MAAO,eAEXO,gBAAgBpf,EAAAA,EAAAA,KAACsa,GAAAA,QAAS,CAACI,KAAK,aAAaxa,MAAO,CAAC+K,MAAM,GAAIC,KAAM,MACrEoQ,aAAatb,EAAAA,EAAAA,KAAAgT,EAAAA,SAAA,IACbqM,OAAQ,GACRC,QAAQtf,EAAAA,EAAAA,KAACuf,GAAM,IAEvB,IAAC,kBArBc,OAAA1f,EAAA4C,MAAA,KAAAC,UAAA,KAuBf,oBACI,IAAM8c,GAASzJ,EAAAA,EAAAA,kBACT0J,EAAqB,QAAVD,EAAmBE,GAAAA,aAAeC,GAAAA,cAC7CpP,EAAqBxF,GAAAA,GAAA,GAAO0U,GAAQ,IAAEG,OAAM7U,GAAAA,GAAA,GAAK0U,EAASG,QAAM,IAAEC,QAAQpM,EAAAA,OAAO+L,GAAQ/M,SACzFqN,EAAiB/Y,EAAAA,MAAW,kBAAI6X,KAAYxH,MAAK,SAAA2I,GAAM,MAAI,CAAC,QAAU,WAAD,OAAK/f,EAAAA,EAAAA,KAACggB,EAAAA,WAAU,CAACD,OAAQA,GAAS,EAAC,GAAE,IAChH,OAAO/f,EAAAA,EAAAA,KAACigB,GAAAA,QAAa,CAAC1P,MAAOA,EAAMjQ,UAC/BN,EAAAA,EAAAA,KAACyY,GAAgB,CAAAnY,UACbN,EAAAA,EAAAA,KAACkgB,EAAAA,SAAQ,CAACC,UAAUngB,EAAAA,EAAAA,KAAAgT,EAAAA,SAAA,IAAM1S,UACtBN,EAAAA,EAAAA,KAAC8f,EAAc,SAI9B,C","sources":["src/components/LinkPreview.tsx","src/services/notebook.ts","src/hooks/useContentList.ts","src/components/ContentList.tsx","src/components/DndSortableList.tsx","src/components/DynamicTextInput.tsx","src/components/Cell/common.ts","src/components/Cell/index.tsx","src/screens/main/NoteSection.tsx","src/hooks/useNotebookContext.tsx","src/components/ContentGroupList.tsx","src/screens/main/HomeScreen.tsx","src/screens/index.ts","src/screens/main/NoteScreen.tsx","src/hooks/useContent.ts","src/screens/main/ContentListScreen.tsx","src/navigation/Drawer.tsx","src/navigation/index.tsx"],"sourcesContent":["import React, { MutableRefObject } from 'react'\r\nimport { Image, Linking, TouchableOpacity } from \"react-native\"\r\nimport { View, Text } from \"@blacktokki/core\";\r\nimport { Link } from \"../types\"\r\n\r\nconst _tmp = (re:RegExp, description :string)=>{\r\n    let str = description;\r\n    let index = 0;\r\n    let match;\r\n    let arr = []\r\n    while ((match = new RegExp(re).exec(str)) != null) {\r\n      arr.push({index, str:str.substring(0, match.index)})\r\n      const end = match.index + match[0].length\r\n      arr.push({index:index + match.index, str:str.substring(match.index, end)})\r\n      index += end;\r\n      str = str.substring(end)\r\n    }\r\n    arr.push({index, str})\r\n    return arr\r\n  }\r\n\r\nconst re = /https?:\\/\\/(?:www\\\\.)?[-a-zA-Z0-9@:%._\\+~#=]{1,256}\\.[a-zA-Z0-9()]{1,6}\\b(?:[-a-zA-Z0-9()@:%_\\+.~#?&\\/=]*)/gi\r\n\r\nexport const toUrls = (str:string)=>{\r\n    return _tmp(re, str).filter((v, i)=>i % 2 == 1).map(v=>v.str)\r\n}\r\n\r\n\r\nexport default ({link, isMobile}:{link:Link, isMobile:boolean})=>{\r\n    return <View style={{borderRadius:6, marginVertical:10, marginHorizontal:8}}>\r\n            <TouchableOpacity\r\n                onPress={()=>Linking.openURL(link.url)}\r\n                onLongPress={()=>{}}\r\n                style={{width:'100%', flexDirection:'row'}}\r\n            >\r\n                {link.imageUrl?<Image source={{uri:link.imageUrl}} resizeMode=\"cover\" style={{ borderRadius:6, width:'100%', maxWidth:isMobile?120:160, maxHeight:isMobile?120:160, borderWidth:1}}/>:undefined}\r\n                <View style={{flex:1, marginHorizontal:20, overflow:'hidden', minHeight:isMobile?90:120}}>\r\n                    <Text style={{fontSize:18}} numberOfLines={1}>{link.title}</Text>\r\n                    <Text style={{fontSize:14}} numberOfLines={7} ellipsizeMode='head'>{link.description}</Text>\r\n                    <Text style={{fontSize:12}} numberOfLines={1}>{link.url}</Text>\r\n                </View>\r\n            </TouchableOpacity>\r\n        </View>\r\n\r\n}","import { toUrls } from '../components/LinkPreview';\r\nimport { Content, PostContent, CellType, Link } from '../types';\r\nimport { axiosCreate } from '@blacktokki/account';\r\n\r\nconst axios = axiosCreate(\"notebook\")\r\n\r\nexport const getContentOne = async (id:number)=>{\r\n    return (await axios.get(`/api/v1/content/${id}`)).data as Content\r\n}\r\n\r\nexport const getContentList = async (parentId?:number, type?: Content['type'])=>{\r\n    const parentIdParam = parentId !== undefined?`&parentId=${parentId}`: ''\r\n    const typeParam = type !== undefined?`&type=${type}` : ''\r\n    return (await axios.get(`/api/v1/content?self=true&size=256${parentIdParam}${typeParam}`) ).data.value as Content[]\r\n}\r\n\r\nexport const postContent = async (postContent:PostContent)=>{\r\n    return ((await axios.post(`/api/v1/content`, postContent)).data as Content).id\r\n}\r\n\r\nexport const patchContent = async ({id, updated}:{id:number, updated:PostContent})=>{\r\n    await axios.patch(`/api/v1/content`,{ids: [id], updated})\r\n}\r\n\r\nexport const deleteContent = async (id: number) =>{\r\n    await axios.delete(`/api/v1/content/${id}`)\r\n}\r\n\r\nexport const postCells = async (contents:{created:(PostContent & {type:CellType})[], deleted:{parentId:number}}) => {\r\n    await axios.post(`/api/v1/content/bulk`, contents)\r\n}\r\n\r\nexport const executeCells = async (cells:({type: CellType |'OUTPUT'} & ({query:string} | {id:number}))[]) => { // TBA\r\n    return (await axios.post(`/api/v1/cell/`, cells)).data\r\n}\r\n\r\nexport const previewScrap = async (preview: {query:string}) => {\r\n    const data:Link[] = []\r\n    for (const query of toUrls(preview.query)){\r\n        data.push((await axios.get(`/api/v1/preview/autocomplete?query=${query}`)).data)\r\n    }\r\n    return data\r\n}\r\n\r\n","import { useMutation, useQuery, useQueryClient } from \"react-query\";\r\nimport { deleteContent, getContentList, patchContent, postCells, postContent } from \"../services/notebook\";\r\nimport { Content } from \"../types\";\r\nimport { useEffect } from \"react\";\r\n\r\nexport default function useContentList(parentId?:number, type?: Content['type']){\r\n  const { data } = useQuery([\"ContentList\", parentId, type] , async()=> (parentId!==undefined || type!==undefined)?await getContentList(parentId, type):undefined)\r\n  return data\r\n}\r\n\r\n\r\nexport function useContentMutation(){\r\n  const queryClient = useQueryClient()\r\n  const create = useMutation(postContent, {\r\n    onSuccess: async()=>{\r\n      await queryClient.invalidateQueries(\"ContentList\")\r\n    }\r\n  })\r\n  const update = useMutation(patchContent, {\r\n    onSuccess: async () => {\r\n      await Promise.all([\r\n        queryClient.invalidateQueries(\"ContentList\"),\r\n        queryClient.invalidateQueries(\"Content\")\r\n      ])\r\n    }\r\n  })\r\n  const _delete = useMutation(deleteContent, {\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries(\"ContentList\")\r\n    }\r\n  })\r\n  const updateCells = useMutation(postCells, {\r\n    onSuccess: () =>{\r\n      queryClient.invalidateQueries(\"ContentList\")\r\n    }\r\n  })\r\n\r\n  useEffect(()=>{\r\n  }, [])\r\n\r\n  return {create:create.mutateAsync, update:update.mutateAsync, delete:_delete.mutateAsync, updateCells:updateCells.mutateAsync}\r\n}","import * as React from 'react';\r\nimport { Content } from '../types';\r\nimport { navigate } from '@blacktokki/navigation';\r\nimport { Text, useResizeContext } from '@blacktokki/core';\r\nimport { ScrollView, TouchableOpacity, View } from 'react-native';\r\nimport { Card } from 'react-native-paper';\r\nimport useContentList from '../hooks/useContentList';\r\n\r\nconst updatedOffset = new Date().getTimezoneOffset()\r\n\r\nconst updatedFormat = (_updated:string) => {\r\n  const _date = new Date(_updated)\r\n  _date.setMinutes(_date.getMinutes() - updatedOffset)\r\n  const updated = _date.toISOString().slice(0, 16)\r\n    const date = updated.slice(0, 10)\r\n    const today = new Date().toISOString().slice(0, 10)\r\n    return date==today?updated.slice(11):date;\r\n}\r\n\r\nconst _cardPadding = (isLandscape:boolean) => isLandscape?20:4\r\nconst _cardMaxWidth = (isLandscape:boolean) => isLandscape?230:190\r\n\r\n\r\nconst CardPage = React.memo(({data}: {data:Content[]})=>{\r\n  const window  = useResizeContext()\r\n  const cardMaxWidth = _cardMaxWidth(window===\"landscape\")\r\n  const fSize = window==='landscape'?2:0\r\n\r\n  return [...data.sort((a, b)=>a.updated < b.updated?1:-1), null, null]?.map((item, index)=>{\r\n    if (item === null){\r\n      return <View key={index} style={{flexBasis:window==='landscape'?'33%':'50%', maxWidth:cardMaxWidth}}/>\r\n    }\r\n    const content = item.description\r\n    const onPress = ()=>navigate('NoteScreen', {id:item.id})\r\n    return <TouchableOpacity key={index} style={{flexBasis:window==='landscape'?'33%':'50%', padding:_cardPadding(window==='landscape'), paddingRight:0, minWidth:cardMaxWidth, maxWidth:cardMaxWidth}} onPress={onPress}>\r\n        <Card onPress={onPress} style={{aspectRatio:1/Math.sqrt(2), borderRadius:6, marginVertical:10, marginHorizontal:8, overflow:'hidden'}}>\r\n          <Card.Content>\r\n          <Text style={{fontSize:12+fSize, opacity: 0.4}}>{content}</Text>\r\n          </Card.Content>\r\n        </Card>\r\n        <View style={{flexDirection:'row', marginTop:10, justifyContent:'space-between', alignItems:'center', width:'100%'}}>\r\n          <Text style={{fontSize:14+fSize}}>{item.title}</Text>\r\n          <Text style={{fontSize:12+fSize, opacity: 0.4, textAlign:'right'}}>{updatedFormat(item.updated)}</Text>\r\n            \r\n        </View>\r\n    </TouchableOpacity>\r\n  })\r\n})\r\n\r\nconst ContentList = ({ parentContent } : { parentContent:Content }) => {\r\n  const data = useContentList(parentContent.id)\r\n  const window  = useResizeContext()\r\n  return data && (\r\n    <ScrollView \r\n      style={{ height:0}} \r\n      contentContainerStyle={{flexDirection:'row', justifyContent:'center'}}\r\n    >\r\n      <View style={{backgroundColor:'transparent', flexBasis:'100%', maxWidth:(_cardMaxWidth(window==='landscape') + 5)  * (window==='landscape'?5:3), flexWrap:'wrap', flexDirection:'row', paddingRight:_cardPadding(window==='landscape'), justifyContent:window==='landscape'?undefined:'center'}}>\r\n        <CardPage data={data}/>\r\n      </View>\r\n      {/* {window === 'landscape' && <View style={{backgroundColor:'transparent', flexBasis:'0%', flexGrow:1, maxWidth:240}}></View>} */}\r\n    </ScrollView>)\r\n};\r\n\r\nexport default ContentList;","import React, { useEffect, useState } from 'react';\r\nimport { Platform, StyleSheet, TouchableOpacity, View } from \"react-native\";\r\n// @ts-ignore\r\nimport { MaterialIcons as Icon } from 'react-native-vector-icons';\r\nimport { RenderItem, SortableListProps } from './SortableListBase';\r\n\r\n// Import platform-specific components\r\nlet DraggableFlatList: any;\r\nlet ScaleDecorator: any;\r\n\r\n// For web, import specific versions of dnd-kit components\r\n// @dnd-kit/core@3.0.3, @dnd-kit/sortable@3.0.1, @dnd-kit/utilities@2.0.0\r\nlet DndCore: any;\r\nlet DndSortable: any;\r\nlet DndUtilities: any;\r\n\r\n// Handle platform-specific imports\r\nif (Platform.OS === 'android' || Platform.OS === 'ios') {\r\n  // For native platforms, import react-native-draggable-flatlist\r\n  const DraggableImport = {} as any; // require('react-native-draggable-flatlist');\r\n  DraggableFlatList = DraggableImport.default;\r\n  ScaleDecorator = DraggableImport.ScaleDecorator;\r\n} else {\r\n  // For web, import dnd-kit with specific versions\r\n  DndCore = require('@dnd-kit/core');\r\n  DndSortable = require('@dnd-kit/sortable');\r\n  DndUtilities = require('@dnd-kit/utilities');\r\n}\r\n\r\n// Web environment Draggable Cell Item using dnd-kit\r\nconst DraggableCellItem = <T, >({ \r\n  item, \r\n  code,\r\n  renderCellContent,\r\n}: { \r\n  item: T, \r\n  code: string,\r\n  renderCellContent: RenderItem<T>,\r\n}) => {\r\n  const {\r\n    attributes,\r\n    listeners,\r\n    setNodeRef,\r\n    transform,\r\n    transition,\r\n    isDragging\r\n  } = DndSortable.useSortable({ id:code });\r\n\r\n  const style = {\r\n    transform: DndUtilities.CSS.Transform.toString(transform ? {\r\n      x: transform.x,\r\n      y: transform.y,\r\n      scaleX: 1,\r\n      scaleY: 1\r\n    } : null),\r\n    transition,\r\n    opacity: isDragging ? 0.5 : 1,\r\n    position: 'relative' as const,\r\n    flex: 1,\r\n    zIndex: isDragging ? 1 : 0\r\n  };\r\n\r\n  return (\r\n    <div \r\n      ref={setNodeRef} \r\n      style={style}\r\n    >\r\n      <div \r\n        {...attributes}\r\n        {...listeners}\r\n        style={{ \r\n          cursor: 'move', \r\n          width: 40, \r\n          position: 'absolute', \r\n          height: '100%', \r\n          zIndex: 10,\r\n          left: 0,\r\n          top: 0\r\n        }}\r\n      />\r\n      {renderCellContent({item})}\r\n    </div>\r\n  );\r\n};\r\n\r\n// Web Sortable List using dnd-kit\r\nconst SortableCellsList = <T, >({ \r\n  items, \r\n  onSortEnd, \r\n  renderCellContent,\r\n  getId\r\n}: { \r\n  items: T[], \r\n  onSortEnd: (items: T[]) => void, \r\n  renderCellContent: RenderItem<T>,\r\n  getId:(item:T)=>string,\r\n}) => {\r\n  const [codes, setCodes] = useState(items.map(v=>''+ getId(v)))\r\n  useEffect(()=>{\r\n    if (items.length !== codes.length){\r\n      setCodes((codes)=>{\r\n        return items.map((v, i)=>i<codes.length?codes[i]:''+getId(v)).slice(0, items.length)\r\n      })\r\n    }\r\n  }, [items])\r\n  const sensors = DndCore.useSensors(\r\n    DndCore.useSensor(DndCore.PointerSensor, {\r\n      activationConstraint: {\r\n        distance: 8,\r\n      },\r\n    }),\r\n    DndCore.useSensor(DndCore.KeyboardSensor, {\r\n      coordinateGetter: DndSortable.sortableKeyboardCoordinates,\r\n    })\r\n  );\r\n\r\n  const handleDragEnd = (event: any) => {\r\n    const { active, over } = event;\r\n    \r\n    if (over && active.id !== over.id) {\r\n      const oldIndex = codes.findIndex((item) => item === active.id);\r\n      const newIndex = codes.findIndex((item) => item === over.id);\r\n      const idx = DndSortable.arrayMove(Array.from(Array(items.length).keys()), oldIndex, newIndex)\r\n      setCodes((codes)=>{\r\n        return DndSortable.arrayMove(codes, oldIndex, newIndex).map((v:string, i:number)=>i>idx[i]?'@'+v:v) \r\n      })\r\n      onSortEnd(DndSortable.arrayMove(items, oldIndex, newIndex));\r\n    }\r\n  };\r\n\r\n  return (\r\n    <DndCore.DndContext\r\n      sensors={sensors}\r\n      collisionDetection={DndCore.closestCenter}\r\n      onDragEnd={handleDragEnd}\r\n    >\r\n      <DndSortable.SortableContext\r\n        items={codes}\r\n        strategy={DndSortable.verticalListSortingStrategy}\r\n      >\r\n        <View style={commonStyles.cellsList}>\r\n          {items.map((item, i) => {\r\n            const code = codes[i] || '' + getId(item)\r\n            return <DraggableCellItem\r\n              key={code}\r\n              code={code}\r\n              item={item}\r\n              renderCellContent={renderCellContent}\r\n            />\r\n})}\r\n        </View>\r\n      </DndSortable.SortableContext>\r\n    </DndCore.DndContext>\r\n  );\r\n};\r\n\r\n// Choose the appropriate list component based on platform\r\nconst SortableList = <T, >({data, setData:setItems, getId, renderItem:renderContent}:SortableListProps<T>) => {\r\n  if (Platform.OS === 'android' || Platform.OS === 'ios') {\r\n    return (\r\n      <DraggableFlatList\r\n        data={data}\r\n        onDragEnd={({ data }: { data: T[] }) => setItems(data)}\r\n        keyExtractor={(item: any) => item.id.toString()}\r\n        renderItem={({ item, drag, isActive }: any) => {\r\n          return (\r\n            <ScaleDecorator>\r\n              <View style={{ flexDirection: 'row' }}>\r\n                <TouchableOpacity\r\n                  onLongPress={drag} \r\n                  style={{ \r\n                    width: 40,\r\n                    justifyContent: 'center',\r\n                    alignItems: 'center',\r\n                  }}\r\n                >\r\n                  <Icon name=\"drag-handle\" size={20} color=\"#888\" />\r\n                </TouchableOpacity>\r\n                <View style={{ flex: 1 }}>\r\n                  {renderContent(item)}\r\n                </View>\r\n              </View>\r\n            </ScaleDecorator>\r\n          );\r\n        }}\r\n        contentContainerStyle={commonStyles.cellsList}\r\n      />\r\n    );\r\n  } else {\r\n    return (\r\n      <SortableCellsList\r\n        items={data}\r\n        getId={getId}\r\n        onSortEnd={setItems}\r\n        renderCellContent={renderContent}\r\n      />\r\n    );\r\n  }\r\n};\r\n\r\nconst commonStyles = StyleSheet.create({\r\n  cellsList: {\r\n    paddingVertical: 10,\r\n    paddingHorizontal: 5,\r\n  }\r\n});\r\n\r\nexport default SortableList;\r\n","import React, { useState } from \"react\";\r\nimport { TextInput } from \"react-native\";\r\n\r\n// 동적 높이 TextInput 컴포넌트\r\nexport default ({\r\n    value,\r\n    onChangeText,\r\n    style,\r\n    placeholder,\r\n    autoCapitalize = 'none',\r\n    autoCorrect = false,\r\n    minHeight = 40,\r\n    maxHeight = 200,\r\n  }: {\r\n    value: string;\r\n    onChangeText: (text: string) => void;\r\n    style?: any;\r\n    placeholder?: string;\r\n    autoCapitalize?: 'none' | 'sentences' | 'words' | 'characters';\r\n    autoCorrect?: boolean;\r\n    minHeight?: number;\r\n    maxHeight?: number;\r\n  }) => {\r\n    const [height, setHeight] = useState(minHeight);\r\n  \r\n    const handleContentSizeChange = (event: any) => {\r\n      const contentHeight = event.nativeEvent.contentSize.height;\r\n      \r\n      // 높이를 minHeight와 maxHeight 사이로 제한\r\n      const newHeight = Math.max(\r\n        minHeight, \r\n        Math.min(contentHeight, maxHeight)\r\n      );\r\n  \r\n      setHeight(newHeight);\r\n    };\r\n  \r\n    return (\r\n      <TextInput\r\n        multiline\r\n        value={value}\r\n        onChangeText={onChangeText}\r\n        onContentSizeChange={handleContentSizeChange}\r\n        style={[\r\n          style, \r\n          { \r\n            height: height,\r\n            textAlignVertical: 'top',\r\n          }\r\n        ]}\r\n        scrollEnabled={height >= maxHeight}\r\n        placeholder={placeholder}\r\n        autoCapitalize={autoCapitalize}\r\n        autoCorrect={autoCorrect}\r\n      />\r\n    );\r\n  };","import { StyleSheet } from \"react-native\";\r\nimport { CellType } from \"../../types\";\r\n\r\n// Cell execution status\r\nexport enum ExecutionStatus {\r\n    IDLE = 'idle',\r\n    RUNNING = 'running',\r\n    COMPLETED = 'completed',\r\n    ERROR = 'error',\r\n}\r\n  \r\n// Structure for a cell\r\nexport interface CellItem {\r\n  id: string;\r\n  type: CellType;\r\n  content: string;\r\n  output: string;\r\n  executionCount: number | null;\r\n  status: ExecutionStatus;\r\n}\r\n\r\nexport const typeDetail = {\r\n    'EDITOR':{\r\n      executable:false,\r\n      init:(cells:CellItem[])=>'',\r\n      iconName: \"edit\",\r\n      iconSize: 18,\r\n      light:'goldenrod',\r\n      dark: 'darkgoldenrod'\r\n    },\r\n    'LINK': {\r\n      executable:true,\r\n      init:(cells:CellItem[])=>'https://',\r\n      iconName: 'link',\r\n      iconSize: 20,\r\n      light: '#4CAF50',\r\n      dark: '#2E7D32'// 어두운 녹색\r\n    },\r\n    'MARKDOWN':{\r\n      executable:false,\r\n      init:(cells:CellItem[])=>'# Welcome to Jupyter Notebook in React Native\\n\\nThis is a basic implementation of Jupyter Notebook using React Native and TypeScript.',\r\n      iconName: 'text-fields',\r\n      iconSize: 20,\r\n      light: '#2196F3',\r\n      dark: '#1565C0'// 어두운 블루\r\n    }\r\n}\r\n\r\nexport const createUseStyle = <T extends StyleSheet.NamedStyles<T>, >(styles:(theme:'light'|'dark')=>(T | StyleSheet.NamedStyles<T>)) => {\r\n    const _styles = (theme:'light'|'dark') => StyleSheet.create(styles(theme))\r\n    const lightStyles = _styles('light')\r\n    const darkStyles = _styles('dark')\r\n    return (theme:'light'|'dark')=>theme==='dark'?darkStyles:lightStyles\r\n}\r\n","// App.tsx\r\nimport React, { MutableRefObject } from 'react';\r\nimport { \r\n  View, \r\n  Text, \r\n  TouchableOpacity,\r\n  Platform, \r\n} from 'react-native';\r\n// @ts-ignore\r\nimport {MaterialIcons as Icon} from 'react-native-vector-icons';\r\nimport Markdown from 'react-native-markdown-display';\r\nimport { Editor, EditorViewer } from '@blacktokki/editor';\r\nimport { Link } from '../../types';\r\nimport LinkPreview from '../LinkPreview';\r\nimport DynamicTextInput from '../DynamicTextInput';\r\nimport { CellItem, ExecutionStatus, createUseStyle, typeDetail} from './common';\r\n\r\nexport { ExecutionStatus, typeDetail } from './common';\r\nexport type { CellItem } from './common';\r\nexport default React.memo(({theme, item, isSelected, heightRef, setCells, executeCell, setSelectedCellId}:{theme:'light'|'dark', item:CellItem, isSelected:boolean, heightRef:MutableRefObject<Record<string, number>>, setCells:(func:(cells:CellItem[])=>CellItem[])=>void, executeCell:(id:string)=>void, setSelectedCellId:(id:string)=>void})=>{\r\n  const styles = useStyles(theme)\r\n  const markdownStyles = useMarkdownStyles(theme)\r\n  // Update cell content\r\n  const updateCellContent = (id: string, content: string) => {\r\n    setCells(prevCells => \r\n      prevCells.map(cell => \r\n        cell.id === id ? { ...cell, content } : cell\r\n      )\r\n    );\r\n  };\r\n  // Delete a cell\r\n  const deleteCell = (id: string) => {\r\n    setCells(prevCells => prevCells.filter(cell => cell.id !== id));\r\n  };\r\n  return (\r\n    <View style={[\r\n      styles.cellContainer,\r\n      item.type==='EDITOR' && {minHeight: heightRef.current[item.id]},\r\n      isSelected && styles.selectedCell,\r\n      // isDragging && styles.draggingCell\r\n    ]}\r\n    onLayout={e=>{heightRef.current[item.id]=e.nativeEvent.layout.height}}\r\n    >\r\n      {/* Cell sidebar with execution count and drag handle */}\r\n      <View style={styles.cellHandle}>\r\n        {typeDetail[item.type].executable && (\r\n          <View style={styles.executionCount}>\r\n            <Text style={styles.executionCountText}>\r\n              {item.executionCount ? `[${item.executionCount}]` : '[ ]'}\r\n            </Text>\r\n          </View>\r\n        )}\r\n        <Icon name=\"drag-handle\" size={20} color=\"#888\" />\r\n      </View>\r\n      \r\n      <View style={styles.cellContent}>\r\n        {/* Cell toolbar */}\r\n        {<View style={styles.cellToolbar}>\r\n        <TouchableOpacity \r\n            style={styles.toolbarButton}\r\n            onPress={() => setSelectedCellId(item.id)}\r\n          >\r\n            <Icon\r\n              name={typeDetail[item.type].iconName} \r\n              size={typeDetail[item.type].iconSize} \r\n              color=\"#2196F3\" \r\n            />\r\n          </TouchableOpacity>\r\n          <TouchableOpacity \r\n            style={styles.toolbarButton}\r\n            onPress={() => executeCell(item.id)}\r\n            disabled={!typeDetail[item.type].executable}\r\n          >\r\n            <Icon \r\n              name=\"play-arrow\" \r\n              size={20} \r\n              color={typeDetail[item.type].executable ? \"#4CAF50\" : \"#ccc\"} \r\n            />\r\n          </TouchableOpacity>\r\n          <TouchableOpacity \r\n            style={styles.toolbarButton}\r\n            onPress={() => deleteCell(item.id)}\r\n          >\r\n            <Icon name=\"delete\" size={20} color=\"#F44336\" />\r\n          </TouchableOpacity>\r\n        </View>}\r\n        \r\n        {/* Cell input area */}\r\n        <TouchableOpacity\r\n          activeOpacity={1}\r\n          onPress={() => setSelectedCellId(item.id)}\r\n          style={styles.cellInputContainer}\r\n        >\r\n          {/* EDITOR CELL */}\r\n          {<View style={{display:item.type === 'EDITOR'?'flex':'none'}}>\r\n            <EditorViewer theme={theme} value={item.content} autoResize active={!isSelected} onPress={()=>setSelectedCellId(item.id)}/>\r\n            <Editor       theme={theme} value={item.content} autoResize active={isSelected} setValue={item.type === 'EDITOR'?(text) => updateCellContent(item.id, text):()=>{}}/>\r\n          </View>}\r\n          {/* LINK CELL */}\r\n          {item.type === 'LINK' && <DynamicTextInput\r\n              style={styles.codeInput}\r\n              value={item.content}\r\n              onChangeText={(text) => updateCellContent(item.id, text)}\r\n              autoCapitalize=\"none\"\r\n              autoCorrect={false}\r\n            />\r\n          }\r\n          {/* MARKDOWN CELL */}\r\n          {item.type === \"MARKDOWN\" && (\r\n          isSelected ? (\r\n            <DynamicTextInput\r\n              style={styles.markdownInput}\r\n              value={item.content}\r\n              onChangeText={(text) => updateCellContent(item.id, text)}\r\n              autoCapitalize=\"none\"\r\n              autoCorrect={false}\r\n            />\r\n            ) : (\r\n              <Markdown style={markdownStyles}>\r\n                {item.content}\r\n              </Markdown>\r\n            )\r\n          )}\r\n        </TouchableOpacity>\r\n        {/* Output area for code cells */}\r\n        {item.status === ExecutionStatus.COMPLETED  ? <>\r\n            {typeDetail[item.type].executable && (JSON.parse(item.output) as Link[]).map((link, i)=><LinkPreview key={i} link={link} isMobile={false} />)}\r\n          </>:\r\n          item.status === ExecutionStatus.ERROR && <View style={[styles.outputContainer, styles.errorOutput]}>\r\n            <Text style={styles.outputText}>{item.output}</Text>\r\n          </View>}\r\n      </View>\r\n    </View>\r\n  );\r\n})\r\n\r\nconst Colors = {\r\n    light:{\r\n      background: '#f8f8f8',\r\n      text: '#111',\r\n      codeText: '#333',\r\n      codeBackground: '#f8f8f8',\r\n      outerBackground: '#fff',\r\n      border: '#e0e0e0',\r\n      selectedBorder: '#3F51B5',\r\n      error:  'rgba(244, 67, 54, 0.1)',\r\n      markdownHead: '#2C3E50',\r\n      markdownCode: '#f5f5f5',\r\n    },\r\n    dark:{\r\n      background:'#1E1E1E',  // 어두운 헤더 배경\r\n      text: '#E0E0E0',  // 연한 회색 텍스트\r\n      codeText: '#B0B0B0',// 회색 텍스트\r\n      codeBackground: '#2A2A2A',  // 어두운 출력 배경\r\n      outerBackground: '#121212', // 다크 모드 배경색\r\n      border: '3A3A3A',  // 어두운 구분선\r\n      selectedBorder: '#4A90E2', // 밝은 블루 선택 강조\r\n      error:  'rgba(244, 67, 54, 0.2)', // 오류 출력 배경 (반투명 레드)\r\n      markdownHead: '#A0B9D0',\r\n      markdownCode: '#1E1E1E',\r\n    }\r\n}\r\n\r\nconst useStyles = createUseStyle((theme)=>({\r\n    header: {\r\n      backgroundColor: Colors[theme].background,\r\n      flexDirection: 'row',\r\n      alignItems: 'center',\r\n      justifyContent: 'space-between',\r\n      padding: 15,\r\n      ...(Platform.OS !== 'web' && { elevation: 4 }),\r\n    },\r\n    title: {\r\n      color: Colors[theme].text,\r\n      fontSize: 20,\r\n      fontWeight: 'bold',\r\n    },\r\n    headerButtonText: {\r\n      color: Colors[theme].codeText,\r\n      marginLeft: 5,\r\n      fontWeight: '500',\r\n    },\r\n    cellContainer: {\r\n      flexDirection: 'row',\r\n      borderTopLeftRadius: 6,\r\n      borderBottomLeftRadius: 6,\r\n      backgroundColor: Colors[theme].background,\r\n      overflow: 'hidden',\r\n      borderColor: Colors[theme].border,\r\n      padding:1,\r\n    },\r\n    selectedCell: {\r\n      borderColor: Colors[theme].selectedBorder,\r\n      borderWidth: 2,\r\n      padding:0,\r\n    },\r\n    draggingCell: {\r\n      opacity: 0.7,\r\n      backgroundColor: Colors[theme].background,\r\n    },\r\n    cellHandle: {\r\n      width: 40,\r\n      backgroundColor: Colors[theme].codeBackground,\r\n      alignItems: 'center',\r\n      paddingTop: 15,\r\n    },\r\n    cellContent: {\r\n      flex: 1,\r\n      borderWidth: 1,\r\n      margin: 10,\r\n      marginVertical: 5,\r\n      borderColor: Colors[theme].border,\r\n    },\r\n    cellToolbar: {\r\n      flexDirection: 'row',\r\n      padding: 5,\r\n      paddingVertical: 0,\r\n      borderBottomColor: Colors[theme].border,\r\n    },\r\n    codeInput: {\r\n      fontFamily: 'monospace',\r\n      minHeight: 40,\r\n      color: Colors[theme].text,\r\n      backgroundColor: Colors[theme].background,\r\n    },\r\n    markdownInput: {\r\n      minHeight: 40,\r\n      color: Colors[theme].text,\r\n      backgroundColor: Colors[theme].background,\r\n    },\r\n    outputContainer: {\r\n      backgroundColor: Colors[theme].codeBackground,\r\n      padding: 10,\r\n      borderTopWidth: 1,\r\n      borderTopColor: Colors[theme].border,\r\n    },\r\n    errorOutput: {\r\n      backgroundColor: Colors[theme].error,\r\n    },\r\n    outputText: {\r\n      fontFamily: 'monospace',\r\n      color: Colors[theme].codeText,\r\n    },\r\n    // common styles\r\n    headerButtons: {\r\n      flexDirection: 'row',\r\n      alignItems: 'center',\r\n      paddingHorizontal: 12,\r\n      paddingVertical: 6,\r\n      borderRadius: 4,\r\n    },\r\n    executionCount: {\r\n      alignItems: 'center',\r\n      marginBottom: 10,\r\n    },\r\n    toolbarButton: {\r\n      padding: 5,\r\n      marginRight: 10,\r\n    },\r\n    cellInputContainer: {\r\n      //padding: 10,\r\n      padding:0,\r\n      paddingHorizontal:5,\r\n    },\r\n    executionCountText: {\r\n      color: '#888',\r\n      fontSize: 12,\r\n    },\r\n}))\r\n\r\nconst useMarkdownStyles = createUseStyle((theme)=>({\r\n    body: {\r\n      fontSize: 14,\r\n      color: Colors[theme].codeText,\r\n    },\r\n    heading1: {\r\n      fontSize: 24,\r\n      marginTop: 10,\r\n      marginBottom: 10,\r\n      fontWeight: 'bold',\r\n      color: Colors[theme].markdownHead\r\n    },\r\n    heading2: {\r\n      fontSize: 20,\r\n      marginTop: 10,\r\n      marginBottom: 10,\r\n      fontWeight: 'bold',\r\n      color: Colors[theme].markdownHead\r\n    },\r\n    code_inline: {\r\n      backgroundColor: Colors[theme].markdownCode,\r\n      padding: 2,\r\n      borderRadius: 3,\r\n      fontFamily: 'monospace',\r\n    },\r\n    code_block: {\r\n      backgroundColor: Colors[theme].markdownCode,\r\n      padding: 10,\r\n      borderRadius: 3,\r\n      fontFamily: 'monospace',\r\n    },\r\n}))","// App.tsx\r\nimport React, { useState, useCallback, MutableRefObject, useEffect, useRef } from 'react';\r\nimport { \r\n  SafeAreaView, \r\n  StyleSheet, \r\n  View, \r\n  Text, \r\n  TouchableOpacity, \r\n  StyleProp,\r\n  ViewStyle,\r\n} from 'react-native';\r\n// @ts-ignore\r\nimport {MaterialIcons as Icon} from 'react-native-vector-icons';\r\nimport { useColorScheme, useLangContext } from '@blacktokki/core';\r\nimport { CellType } from '../../types';\r\nimport { previewScrap } from '../../services/notebook';\r\nimport SortableList from '../../components/DndSortableList';\r\nimport Cell, { CellItem, ExecutionStatus, typeDetail } from '../../components/Cell';\r\n\r\nconst execute = (type:CellType, query: string): Promise<string> => {\r\n  return new Promise((resolve, reject) => {\r\n    try {\r\n      if (type==='LINK'){\r\n        resolve(previewScrap({query}).then(v=>JSON.stringify(v)))\r\n      }\r\n      else if(type==='MARKDOWN'){\r\n        console.log(\"TEMP\")\r\n      }\r\n      else {\r\n        resolve(\"\")\r\n      }\r\n    } catch (error) {\r\n      reject(`Error: ${error}`);\r\n    }\r\n  });\r\n};\r\n\r\nconst App = (props: {init:{type:CellType, content:string, output:string, executionCount:number|null, status?:string}[], cellRef:MutableRefObject<{cells:CellItem[], executeAllCells:()=>Promise<void>}|undefined>}) => {\r\n  const theme = useColorScheme()\r\n  const { lang } = useLangContext()\r\n  const [cells, setCells] = useState<CellItem[]>([]);\r\n  \r\n  const [selectedCellId, setSelectedCellId] = useState<string | null>(null);\r\n  const [nextExecutionCount, setNextExecutionCount] = useState(1);\r\n  const heightRef = useRef<Record<string, number>>({})\r\n  useEffect(()=>{\r\n    setCells(props.init.map((v, i)=>({...v, id:`${i}` , status:v.status as ExecutionStatus || ExecutionStatus.IDLE})))\r\n    setSelectedCellId(null)\r\n  }, [props.init])\r\n  useEffect(()=>{\r\n    props.cellRef.current = {\r\n      cells:cells,\r\n      executeAllCells: async () => {\r\n        for (const cell of cells) {\r\n          if (typeDetail[cell.type].executable) {\r\n            await executeCell(cell.id);\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }, [cells])\r\n  \r\n  // Add a new cell\r\n  const addCell = (type: CellType) => {\r\n    const newCell: CellItem = {\r\n      id: Date.now().toString(),\r\n      type,\r\n      content: typeDetail[type].init(cells),\r\n      output: '',\r\n      executionCount: null,\r\n      status: ExecutionStatus.IDLE,\r\n    };\r\n    \r\n    setCells(prevCells => [...prevCells, newCell]);\r\n  };\r\n  \r\n  // Execute code in a cell\r\n  const executeCell = async (id: string) => {\r\n    setCells(prevCells => \r\n      prevCells.map(cell => \r\n        cell.id === id \r\n          ? { ...cell, status: ExecutionStatus.RUNNING } \r\n          : cell\r\n      )\r\n    );\r\n    \r\n    const cell = cells.find(c => c.id === id);\r\n    if (!cell || typeDetail[cell.type].executable === false) return;\r\n    \r\n    try {\r\n      const result = await execute(cell.type, cell.content);\r\n      setCells(prevCells => \r\n        prevCells.map(cell => \r\n          cell.id === id \r\n            ? { \r\n                ...cell, \r\n                output: result, \r\n                executionCount: nextExecutionCount,\r\n                status: ExecutionStatus.COMPLETED\r\n              } \r\n            : cell\r\n        )\r\n      );\r\n      setNextExecutionCount(prev => prev + 1);\r\n    } catch (error) {\r\n      setCells(prevCells => \r\n        prevCells.map(cell => \r\n          cell.id === id \r\n            ? { \r\n                ...cell, \r\n                output: String(error), \r\n                executionCount: nextExecutionCount,\r\n                status: ExecutionStatus.ERROR\r\n              } \r\n            : cell\r\n        )\r\n      );\r\n      setNextExecutionCount(prev => prev + 1);\r\n    }\r\n  };\r\n\r\n  // Render a single cell (shared between platform implementations)\r\n  const renderCellContent = useCallback(({item}:{item: CellItem}) => {\r\n    return <Cell\r\n      theme={theme}\r\n      item={item}\r\n      isSelected={selectedCellId === item.id}\r\n      heightRef={heightRef}\r\n      setCells={setCells} \r\n      executeCell={executeCell} \r\n      setSelectedCellId={setSelectedCellId}\r\n    />\r\n  }, [selectedCellId, cells]);\r\n  return (\r\n    <SafeAreaView style={styles.container}>\r\n      <SortableList data={cells} setData={setCells} getId={v=>v.id} renderItem={renderCellContent}/>\r\n      \r\n      <View style={styles.addCellContainer}>\r\n        {Object.entries(typeDetail).map(([k, v], i)=>{\r\n          const buttonStyle:StyleProp<ViewStyle> = {\r\n            backgroundColor: v[theme]\r\n          }\r\n          return <TouchableOpacity\r\n          key={i}\r\n          style={[styles.addCellButton, buttonStyle]}\r\n          onPress={() => addCell(k as CellType)}\r\n        >\r\n          <Icon name={v.iconName} size={v.iconSize} color=\"#fff\" />\r\n          <Text style={styles.addCellButtonText}>{lang(k)}</Text>\r\n        </TouchableOpacity>\r\n        })}\r\n      </View>\r\n    </SafeAreaView>\r\n  );\r\n};\r\n\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n  },\r\n  addCellContainer: {\r\n    flexDirection: 'row',\r\n    justifyContent: 'center',\r\n    padding: 15,\r\n    borderTopWidth: 1,\r\n    borderTopColor: '#888',\r\n    zIndex: -1\r\n  },\r\n  addCellButton: {\r\n    flexDirection: 'row',\r\n    alignItems: 'center',\r\n    paddingHorizontal: 16,\r\n    paddingVertical: 8,\r\n    borderRadius: 4,\r\n    marginHorizontal: 5,\r\n  },\r\n  addCellButtonText: {\r\n    color: '#fff',\r\n    marginLeft: 5,\r\n    fontWeight: '500',\r\n  },\r\n})\r\n\r\n\r\nexport default App;","import { useAuthContext } from \"@blacktokki/account\";\r\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\r\nimport { createContext, useCallback, useContext, useEffect, useMemo, useState } from \"react\";\r\n\r\ntype Opened = Record<string, number[]>\r\n\r\nconst NotebookContext = createContext<{opened: Opened; setOpened: (opened:Opened) => void;}>({ opened: {}, setOpened: () => {} });\r\n\r\nexport const NotebookProvider = (props: { children: React.ReactNode; }) => {\r\n  const [complete, setComplete] = useState(false);\r\n  const [opened, setOpened] = useState<Opened>({});\r\n  useEffect(() => {\r\n    AsyncStorage.getItem('opened').then((v) => {\r\n      setOpened(v?JSON.parse(v):{});\r\n      setComplete(true);\r\n    });\r\n  }, []);\r\n  return complete ? (\r\n    <NotebookContext.Provider value={{ opened, setOpened }}>\r\n      {props.children}\r\n    </NotebookContext.Provider>\r\n  ) : (\r\n    <></>\r\n  );\r\n};\r\n\r\nconst emptySet = new Set()\r\n\r\nexport default () => {\r\n  const { opened, setOpened } = useContext(NotebookContext);\r\n  const { auth } = useAuthContext()\r\n  const openedIds = useMemo(()=>{\r\n    return new Set(opened[`${auth.user?.id || 0}`]) || emptySet\r\n  }, [opened, auth])\r\n  const updateIds = useCallback((v:Set<number>)=>{\r\n    const newOpened = {...opened}\r\n    newOpened[`${auth.user?.id || 0}`] = [...v.values()]\r\n    AsyncStorage.setItem('opened', JSON.stringify(newOpened)).then(()=>setOpened(newOpened))\r\n  }, [auth, opened])\r\n  const addOpenedIds = (id:number)=>{\r\n    const newOpenIds = new Set(openedIds)\r\n    newOpenIds.add(id)\r\n    updateIds(newOpenIds)\r\n  }\r\n  const deleteOpenedIds = (id:number)=>{\r\n    const newOpenIds = new Set(openedIds)\r\n    newOpenIds.delete(id)\r\n    updateIds(newOpenIds)\r\n  }\r\n  return {\r\n    openedIds,\r\n    addOpenedIds, \r\n    deleteOpenedIds\r\n  }\r\n};\r\n","import * as React from 'react';\r\nimport { List, TouchableRipple } from 'react-native-paper';\r\nimport { navigate } from '@blacktokki/navigation';\r\nimport { useLangContext, useResizeContext, View } from '@blacktokki/core';\r\nimport useContentList from '../hooks/useContentList';\r\nimport useNotebookContext from '../hooks/useNotebookContext';\r\n\r\nconst ContentGroupList = ( props : {type:'NOTEV2'|'PAGE'}) => {\r\n  const _data = useContentList(undefined, props.type);\r\n  const { openedIds } = useNotebookContext()\r\n  const data = props.type === 'NOTEV2'? _data: _data?.filter(v=>openedIds.has(v.id))\r\n  const { lang } = useLangContext()\r\n  const window = useResizeContext()\r\n  const itemPadding = window==='landscape'?5:8\r\n  return (\r\n    <List.Section>\r\n      <View style={{flexDirection:'row'}}>\r\n        <List.Subheader style={{flex:1}} selectable={false}>{props.type==='NOTEV2'?lang(\"Notes\"):lang(\"Open Editors\")}</List.Subheader>\r\n        {props.type==='NOTEV2' && <TouchableRipple style={{position:'absolute', right:0}} onPress={()=>navigate('ContentListScreen', {type:'NOTEV2'})}><List.Icon icon='plus' style={{margin:itemPadding}}/></TouchableRipple>}\r\n      </View>\r\n        {data && data.map(v=>\r\n          <List.Item key={v.id} left={(_props)=><List.Icon {..._props} icon={props.type==='NOTEV2'?\"notebook\":\"file-document\"} />} title={v.title} onPress={()=>navigate(props.type==='NOTEV2'?'ContentListScreen':'NoteScreen', {id:v.id})} style={{padding:itemPadding }} />\r\n        )}\r\n    </List.Section>\r\n  );\r\n};\r\n\r\nexport default ContentGroupList;","import React, {} from 'react';\r\nimport { StackScreenProps } from '@react-navigation/stack';\r\nimport { ScrollView, View} from 'react-native';\r\nimport { Colors, Text, useColorScheme, useLangContext } from '@blacktokki/core';\r\nimport { HomeSection, ConfigSections } from '@blacktokki/navigation';\r\nimport { TabViewOption } from '@blacktokki/navigation';\r\nimport ContentGroupList from '../../components/ContentGroupList';\r\nimport { List } from 'react-native-paper';\r\n\r\nconst ContentTabView = ()=>{\r\n  const theme = useColorScheme()\r\n  return <ScrollView style={{flex:1, backgroundColor:Colors[theme].background}}>\r\n      <ContentGroupList type={'NOTEV2'} />\r\n      <ContentGroupList type={'PAGE'} />\r\n    </ScrollView>\r\n}\r\n\r\nconst ConfigTabView = ()=>{\r\n  const theme = useColorScheme()\r\n  return <ScrollView style={{flex:1, backgroundColor:Colors[theme].background}}>\r\n    <ConfigSections/>\r\n  </ScrollView>\r\n}\r\n\r\nexport default function HomeScreen({navigation, route}: StackScreenProps<any, 'Home'>) {\r\n  const { lang } = useLangContext()\r\n  const theme = useColorScheme()\r\n  const color = Colors[theme].text\r\n  const tabViews:TabViewOption[] = [\r\n    {title: lang('Contents'), component:ContentTabView, icon:<List.Icon icon={'table-of-contents'}/>, headerRight:()=><></>},\r\n    {title: lang('Config'), component:ConfigTabView, icon:<List.Icon icon={'dots-horizontal'}/>, headerRight:()=><></>}\r\n  ]\r\n  return <HomeSection tabViews={tabViews} title={lang('home')}>\r\n    <View style={{flexGrow:1, width:'80%', marginTop:72}}>\r\n      <Text style={{fontSize:32, color}}>feedynote</Text>\r\n      <View style={{backgroundColor:Colors.borderColor, height:1, width:'100%'}}/>\r\n      {/* <Text style={{fontSize:20, color:'gray'}}>Welcome! This is a messenger for teams.</Text>*/}\r\n      <View style={{height:24}}/>\r\n      <ConfigSections/>\r\n    </View>\r\n  </HomeSection>\r\n}\r\n","import ContentListScreen from \"./main/ContentListScreen\";\r\nimport NoteScreen from \"./main/NoteScreen\";\r\nimport HomeScreen from \"./main/HomeScreen\";\r\n\r\nexport const main = {\r\n    HomeScreen:{\r\n      title:'home',\r\n      component:HomeScreen,\r\n      path:'home',\r\n    },\r\n    NoteScreen: {\r\n      path: 'notes',\r\n      title: 'notes',\r\n      component: NoteScreen\r\n    },\r\n    ContentListScreen: {\r\n      path: 'contents',\r\n      title: 'contents',\r\n      component: ContentListScreen\r\n    }\r\n  };\r\n  ","import { StackScreenProps } from '@react-navigation/stack';\r\nimport { ScrollView, View } from 'react-native';\r\nimport  { CommonButton, View as ThemedView,  useLangContext } from '@blacktokki/core'\r\n\r\nimport React, { useLayoutEffect,useMemo,useRef,useState } from 'react';\r\nimport useContentList, { useContentMutation } from '../../hooks/useContentList';\r\nimport { TextInput } from 'react-native-paper';\r\nimport { useAuthContext } from '@blacktokki/account';\r\nimport { navigate } from '@blacktokki/navigation';\r\nimport useContent from '../../hooks/useContent';\r\nimport NoteSection from './NoteSection';\r\nimport { CellType } from '../../types';\r\nimport { toRaw } from '@blacktokki/editor';\r\nimport useNotebookContext from '../../hooks/useNotebookContext';\r\n\r\nexport default function NoteScreen({ navigation, route }: StackScreenProps<any, 'Editor'>) {\r\n  const params = {\r\n    created: route?.params?.id === undefined,\r\n    id: parseInt(route?.params?.id),\r\n    parentId: route?.params?.parentId!==undefined?parseInt(route?.params?.parentId):undefined\r\n  } as { created:true, parentId:number } | { created:false, id:number }\r\n  const cellRef: Parameters<typeof NoteSection>[0]['cellRef'] = useRef()\r\n  const { lang } = useLangContext()\r\n  const { auth } = useAuthContext()\r\n  const { openedIds, addOpenedIds, deleteOpenedIds } = useNotebookContext()\r\n\r\n  const content = useContent(params.created?undefined:params.id)\r\n  const contents = useContentList(params.created?undefined:params.id)\r\n  const cellContents = useMemo(()=>{\r\n    return (params.created?[]:contents)?.map(v=>({type:v.type as CellType, content:v.title, output:v.description || '', executionCount:v.option.EXECUTION_COUNT?parseInt(v.option.EXECUTION_COUNT, 10):null, status:v.option.EXECUTION_STATUS}))\r\n  }, [contents])\r\n  const contentMutation = useContentMutation()\r\n  const [title, setTitle] = useState<string>()\r\n  const [editPage, setEditPage] = useState(false)\r\n  const onSaveTitle = () => {\r\n        if (!auth.user){\r\n          return;\r\n      }\r\n      let promise\r\n      const description = cellRef.current? cellRef.current.cells.map((v, i)=>{\r\n        let str = toRaw(v.content).replaceAll(/\\r\\n/g, '');\r\n        if(str.length > 32){\r\n          str = str.substring(0, 32 - 2) + '...';\r\n        }\r\n        return str\r\n      }).join('\\r\\n'):''\r\n      if (params.created){\r\n          promise = contentMutation.create({userId:auth.user.id, parentId:params.parentId, type:'PAGE', order: 0, title:title || '', description, option:{}}).then((v)=>{\r\n            navigate(\"NoteScreen\", {id:v});\r\n            return v\r\n          })\r\n      }\r\n      else if (content!==undefined){\r\n        promise = contentMutation.update({id: content.id, updated: {...content, title:title || content.title, description}}).then(()=>params.id)\r\n      }\r\n      return promise\r\n  }\r\n\r\n  const onSave = ()=>{\r\n    const promise = onSaveTitle()\r\n    promise?.then((parentId)=>{\r\n      const userId = auth.user?.id\r\n      const created = userId && cellRef.current? cellRef.current.cells.map((v, i)=>({\r\n        userId, parentId, type:v.type, order:i, description:v.output, title:v.content, option:{EXECUTION_COUNT:v.executionCount!==null?`${v.executionCount}`:undefined, EXECUTION_STATUS: v.status} })):[]\r\n      return contentMutation.updateCells({created, deleted:{parentId}})\r\n    })\r\n  }\r\n\r\n  useLayoutEffect(()=>{\r\n      if(params.created){\r\n        setEditPage(false)\r\n        setTitle(lang(\"New Page\"))\r\n      }\r\n      else if (content){\r\n        setEditPage(false)\r\n        setTitle(content.title)\r\n        addOpenedIds(content.id)\r\n      }\r\n    }, [content])\r\n\r\n  useLayoutEffect(() => {\r\n    if (params.created || content){\r\n        navigation.setOptions({\r\n            title,\r\n            headerRight: () => <View style={{flexDirection: 'row'}}>\r\n              <CommonButton title={'✏️'} style={{height:40, paddingTop:8, marginRight:10}} onPress={()=>setEditPage(true)}/>\r\n              <CommonButton title={'💾'} onPress={onSave} style={{paddingTop:8, marginRight:10}}/>\r\n              <CommonButton title={'❌'} onPress={exit} style={{paddingTop:8, marginRight:10}}/>\r\n            </View>,\r\n            headerShown: !editPage\r\n          });\r\n      }\r\n  }, [navigation, content, contents, title, editPage]);\r\n\r\n  const back = ()=>{\r\n    if(navigation.canGoBack())\r\n      navigation.goBack()\r\n    else {\r\n      let nextId:number|undefined = undefined;\r\n      if(content && openedIds.size > 0){\r\n        const values = [...openedIds.values()]\r\n        const i = values.findIndex(v=>v===content.id)\r\n        nextId = (i>=0?values.slice(i):values)[0]\r\n      }\r\n      if (nextId!==undefined){\r\n        navigation.navigate('NoteScreen', {id:nextId})\r\n      }\r\n      else{\r\n        navigation.navigate('HomeScreen', {tab:1})\r\n      }\r\n    }\r\n  }\r\n  const exit = ()=> {\r\n    content && deleteOpenedIds(content.id)\r\n    back()\r\n  }\r\n  \r\n  return <ThemedView style={{width:\"100%\", height:\"100%\"}}>\r\n     <ScrollView style={{flex:1}} contentContainerStyle={{flexGrow:1}}>\r\n     {editPage ? <>\r\n        {title!==undefined && <TextInput mode='outlined' value={title} onChangeText={setTitle} style={{borderRadius:20, margin:1}}/>}\r\n        <CommonButton title={lang('save')} onPress={onSaveTitle} style={{height:65, paddingVertical:20}}/>\r\n        <CommonButton title={lang('cancel')} onPress={()=>setEditPage(false)} style={{height:65, paddingVertical:20}}/>\r\n        {content && <CommonButton title={lang('delete')} textStyle={{color:'red'}} style={{height:65, paddingVertical:20}} onPress={()=>contentMutation.delete(content.id).then(v=>exit())}/>}\r\n      </>:\r\n      cellContents !==undefined && <NoteSection init={cellContents} cellRef={cellRef}/>}\r\n    </ScrollView>\r\n  </ThemedView>\r\n}\r\n","import { useQuery } from \"react-query\";\r\nimport { getContentOne } from \"../services/notebook\";\r\n\r\nexport default function useContent(id?:number){\r\n  const { data } = useQuery([\"Content\", id] , async()=> (id?await getContentOne(id):undefined))\r\n  return data\r\n}","import { StackScreenProps } from '@react-navigation/stack';\r\nimport { ScrollView,  View } from 'react-native';\r\nimport  { CommonButton, View as ThemedView, useLangContext } from '@blacktokki/core'\r\n\r\nimport React, { useLayoutEffect,useState } from 'react';\r\nimport useContentList, { useContentMutation } from '../../hooks/useContentList';\r\nimport { TextInput } from 'react-native-paper';\r\nimport { useAuthContext } from '@blacktokki/account';\r\nimport { navigate } from '@blacktokki/navigation';\r\nimport { Content } from '../../types';\r\nimport ContentList from '../../components/ContentList';\r\n\r\nexport default function ContentListScreen({ navigation, route }: StackScreenProps<any, 'ContentList'>) {\r\n  const params = {\r\n    created: route?.params?.id === undefined,\r\n    id:  route?.params?.id===\"*\"?\"*\":parseInt(route?.params?.id),\r\n    type: route?.params?.type\r\n  } as { created:true, type:'NOTEV2' } | { created:false, id:number| \"*\" }\r\n  const { lang } = useLangContext()\r\n  const { auth } = useAuthContext()\r\n\r\n  const rootlist = useContentList(0);\r\n  const list = rootlist\r\n  const contentMutation = useContentMutation()\r\n  const content = params.created?undefined:list?.find(v=>v.id===params.id)\r\n  const [title, setTitle] = useState<string>()\r\n  const [editable, setEditable] = useState(false)\r\n  const type = params.created?params.type:content?.type\r\n  const back = ()=>{\r\n    if(navigation.canGoBack())\r\n      navigation.goBack()\r\n    else{\r\n      navigation.navigate('HomeScreen', {tab:1})\r\n    }\r\n  }\r\n  const onSave = ()=>{\r\n    if (!auth.user || (title===undefined) || (content?.title === title) || type===undefined){\r\n        setEditable(false)\r\n        return;\r\n    }\r\n    let promise\r\n    if (params.created){\r\n        const typedList = list?.filter(v=>v.type == params.type)\r\n        promise = contentMutation.create({userId:auth.user.id, parentId:0, type, order: (typedList?.length || 0) + 1, title, option:{}}).then(v=>{\r\n            navigate(\"ContentListScreen\", {id:v})\r\n        })\r\n    }\r\n    else if (content!==undefined){\r\n        promise = contentMutation.update({id: content.id, updated: {...content, type, title}})\r\n    }\r\n    promise?.then(()=>{\r\n        setEditable(false)\r\n    })\r\n  }\r\n\r\n  const defaultTitle = {\r\n    'NOTEV2': lang('New Note'),\r\n  } as Record<Content['type'], string>\r\n\r\n  const onEdit = ()=>{setEditable(true)}  \r\n  useLayoutEffect(()=>{\r\n    if(params.created){\r\n      setEditable(false)\r\n      setTitle(defaultTitle[params.type])\r\n    }\r\n    else if (content){\r\n      setEditable(false)\r\n      setTitle(content.title)\r\n    }\r\n  }, [content, type])\r\n\r\n  useLayoutEffect(() => {\r\n    if (params.created){\r\n      navigation.setOptions({\r\n        headerShown:false,\r\n      })\r\n    }\r\n    else {\r\n        navigation.setOptions({\r\n            title: content?.title || lang(\"All Timelines\"),\r\n            headerRight: () => <View style={{flexDirection: 'row'}}>\r\n              {content?.type==='NOTEV2' && <CommonButton title={'⊕'} style={{height:40, paddingTop:8, marginRight:10}} onPress={()=>navigate('NoteScreen', {parentId:content.id})}/>}\r\n              {(content && !params.created) && <CommonButton title={'✏️'} style={{height:40, paddingTop:8, marginRight:10}} onPress={onEdit}/>}\r\n            </View>,\r\n            headerShown: !editable\r\n          });\r\n      }\r\n  }, [navigation, content, type, editable]);\r\n\r\n  const editableExact = (params.created || editable)\r\n\r\n  return <ThemedView style={{width:\"100%\", height:\"100%\", backgroundColor:'transparent'}}>\r\n    {editableExact?\r\n      <>\r\n        {title!==undefined && <TextInput mode='outlined' value={title} onChangeText={setTitle} style={{borderRadius:20, margin:1}}/>}\r\n        <CommonButton title={lang('save')} onPress={onSave} style={{height:65, paddingVertical:20}}/>\r\n        <CommonButton title={lang('cancel')} onPress={params.created?back:()=>setEditable(false)} style={{height:65, paddingVertical:20}}/>\r\n        {content && <CommonButton title={lang('delete')} textStyle={{color:'red'}} style={{height:65, paddingVertical:20}} onPress={()=>contentMutation.delete(content.id).then(v=>back())}/>}\r\n      </>:\r\n      <ScrollView style={{flex:1}} contentContainerStyle={{flexGrow:1}}>\r\n        {content && <ContentList parentContent={content}/>}\r\n      </ScrollView>}\r\n    </ThemedView>\r\n}\r\n","import React from 'react';\r\nimport ContentGroupList from '../components/ContentGroupList';\r\nimport { ScrollView } from 'react-native';\r\nimport { List } from 'react-native-paper';\r\nimport { useLangContext } from '@blacktokki/core';\r\nimport { navigate } from '@blacktokki/navigation';\r\n\r\nexport default ()=>{\r\n    const {lang} = useLangContext()\r\n    return <ScrollView style={{flex:1}}>\r\n        <List.Item left={_props=><List.Icon {..._props} icon={\"home\"} />} title={lang(\"Home\")} onPress={()=>navigate('HomeScreen')} />\r\n        <ContentGroupList type={'PAGE'} />\r\n        <ContentGroupList type={'NOTEV2'} />\r\n    </ScrollView>\r\n}","import React, { Suspense } from 'react';\r\n// import * as Linking from 'expo-linking';\r\nimport { login, Navigation, NavigationConfig } from \"@blacktokki/navigation\"\r\nimport { main } from '../screens';\r\nimport Drawer from './Drawer';\r\nimport { Colors, useColorScheme } from '@blacktokki/core';\r\nimport { List, MD2DarkTheme, MD2LightTheme, PaperProvider } from 'react-native-paper';\r\nimport { NotebookProvider } from '../hooks/useNotebookContext';\r\n\r\nconst getConfig = async () => {\r\n    const Linking = await import('expo-linking')\r\n    return {\r\n        main,\r\n        login,\r\n        prefixes: [ Linking.makeUrl('/') ],\r\n        rootPath: 'feedynote',\r\n        documentTitle: {\r\n            formatter: ()=>{\r\n                return 'feedynote'\r\n            }\r\n        },\r\n        rootScreen: {\r\n            main: 'HomeScreen',\r\n            login: 'LoginScreen'\r\n        },\r\n        headerLeftIcon: <List.Icon icon='backburger' style={{left:-18, top: -14}} />,\r\n        headerRight: <></>,\r\n        modals: [],\r\n        drawer: <Drawer/>\r\n    } as NavigationConfig\r\n}\r\n\r\nexport default () => {\r\n    const scheme = useColorScheme()\r\n    const preTheme = scheme == 'dark' ? MD2DarkTheme : MD2LightTheme;\r\n    const theme:typeof preTheme = {...preTheme, colors:{...preTheme.colors, primary:Colors[scheme].text} }\r\n    const NavigationLazy = React.lazy(()=>getConfig().then(config=> ({\"default\":()=><Navigation config={config}/>})))\r\n    return <PaperProvider theme={theme}>\r\n        <NotebookProvider>\r\n            <Suspense fallback={<></>}>\r\n                <NavigationLazy/>\r\n            </Suspense>\r\n        </NotebookProvider>\r\n    </PaperProvider>\r\n}"],"names":["re","toUrls","str","description","match","index","arr","RegExp","exec","push","substring","end","length","_tmp","filter","v","i","map","_ref","link","isMobile","_jsx","View","style","borderRadius","marginVertical","marginHorizontal","children","_jsxs","TouchableOpacity","onPress","Linking","openURL","url","onLongPress","width","flexDirection","imageUrl","Image","source","uri","resizeMode","maxWidth","maxHeight","borderWidth","undefined","flex","overflow","minHeight","Text","fontSize","numberOfLines","title","ellipsizeMode","axios","axiosCreate","getContentOne","_asyncToGenerator","id","get","data","_x","apply","arguments","getContentList","_ref2","parentId","type","parentIdParam","typeParam","value","_x2","_x3","postContent","_ref3","post","_x4","patchContent","_ref5","_ref4","updated","patch","ids","_x5","deleteContent","_ref6","delete","_x6","postCells","_ref7","contents","_x7","previewScrap","_ref8","cells","_ref9","preview","query","_x9","useContentList","useQuery","useContentMutation","queryClient","useQueryClient","create","useMutation","onSuccess","_onSuccess","invalidateQueries","update","_onSuccess2","Promise","all","_delete","updateCells","useEffect","mutateAsync","updatedOffset","Date","getTimezoneOffset","updatedFormat","_updated","_date","setMinutes","getMinutes","toISOString","slice","date","_cardPadding","isLandscape","_cardMaxWidth","CardPage","React","window","useResizeContext","cardMaxWidth","fSize","concat","_toConsumableArray","sort","a","b","item","flexBasis","content","navigate","padding","paddingRight","minWidth","Card","aspectRatio","Math","sqrt","Content","opacity","marginTop","justifyContent","alignItems","textAlign","parentContent","ScrollView","height","contentContainerStyle","backgroundColor","flexWrap","DraggableFlatList","ScaleDecorator","DndCore","DndSortable","DndUtilities","Platform","OS","DraggableImport","default","require","DraggableCellItem","code","renderCellContent","_DndSortable$useSorta","useSortable","attributes","listeners","setNodeRef","transform","transition","isDragging","CSS","Transform","toString","x","y","scaleX","scaleY","position","zIndex","ref","_objectSpread","cursor","left","top","SortableCellsList","items","onSortEnd","getId","_useState","useState","_useState2","_slicedToArray","codes","setCodes","sensors","useSensors","useSensor","PointerSensor","activationConstraint","distance","KeyboardSensor","coordinateGetter","sortableKeyboardCoordinates","DndContext","collisionDetection","closestCenter","onDragEnd","event","active","over","oldIndex","findIndex","newIndex","idx","arrayMove","Array","from","keys","SortableContext","strategy","verticalListSortingStrategy","commonStyles","cellsList","StyleSheet","paddingVertical","paddingHorizontal","setItems","setData","renderContent","renderItem","keyExtractor","drag","isActive","Icon","name","size","color","onChangeText","placeholder","_ref$autoCapitalize","autoCapitalize","_ref$autoCorrect","autoCorrect","_ref$minHeight","_ref$maxHeight","setHeight","TextInput","multiline","onContentSizeChange","contentHeight","nativeEvent","contentSize","newHeight","max","min","textAlignVertical","scrollEnabled","ExecutionStatus","typeDetail","executable","init","iconName","iconSize","light","dark","createUseStyle","styles","_styles","theme","lightStyles","darkStyles","isSelected","heightRef","setCells","executeCell","setSelectedCellId","useStyles","markdownStyles","useMarkdownStyles","updateCellContent","prevCells","cell","cellContainer","current","selectedCell","onLayout","e","layout","cellHandle","executionCount","executionCountText","cellContent","cellToolbar","toolbarButton","disabled","activeOpacity","cellInputContainer","display","EditorViewer","autoResize","Editor","setValue","text","DynamicTextInput","codeInput","markdownInput","Markdown","status","COMPLETED","_Fragment","JSON","parse","output","LinkPreview","ERROR","outputContainer","errorOutput","outputText","Colors","background","codeText","codeBackground","outerBackground","border","selectedBorder","error","markdownHead","markdownCode","header","elevation","fontWeight","headerButtonText","marginLeft","borderTopLeftRadius","borderBottomLeftRadius","borderColor","draggingCell","paddingTop","margin","borderBottomColor","fontFamily","borderTopWidth","borderTopColor","headerButtons","marginBottom","marginRight","body","heading1","heading2","code_inline","code_block","container","addCellContainer","addCellButton","addCellButtonText","props","useColorScheme","lang","useLangContext","_useState3","_useState4","selectedCellId","_useState5","_useState6","nextExecutionCount","setNextExecutionCount","useRef","IDLE","cellRef","executeAllCells","_executeAllCells","RUNNING","find","c","result","resolve","reject","then","stringify","console","log","prev","String","useCallback","Cell","SafeAreaView","SortableList","Object","entries","k","buttonStyle","newCell","now","addCell","NotebookContext","createContext","opened","setOpened","NotebookProvider","complete","setComplete","AsyncStorage","getItem","Provider","emptySet","Set","_useContext","useContext","auth","useAuthContext","openedIds","useMemo","_auth$user","user","updateIds","_auth$user2","newOpened","values","setItem","addOpenedIds","newOpenIds","add","deleteOpenedIds","_data","useNotebookContext","has","itemPadding","List","selectable","TouchableRipple","right","icon","_props","ContentTabView","ContentGroupList","ConfigTabView","ConfigSections","main","HomeScreen","component","navigation","route","tabViews","headerRight","HomeSection","flexGrow","path","NoteScreen","_route$params","_route$params2","_route$params3","_route$params4","params","created","parseInt","_useNotebookContext","cellContents","option","EXECUTION_COUNT","EXECUTION_STATUS","contentMutation","setTitle","editPage","setEditPage","onSaveTitle","promise","toRaw","replaceAll","join","userId","order","onSave","deleted","useLayoutEffect","setOptions","CommonButton","exit","headerShown","canGoBack","goBack","nextId","tab","back","ThemedView","mode","textStyle","NoteSection","ContentListScreen","list","editable","setEditable","defaultTitle","onEdit","editableExact","_promise","typedList","ContentList","getConfig","login","prefixes","makeUrl","rootPath","documentTitle","formatter","rootScreen","headerLeftIcon","modals","drawer","Drawer","scheme","preTheme","MD2DarkTheme","MD2LightTheme","colors","primary","NavigationLazy","config","Navigation","PaperProvider","Suspense","fallback"],"sourceRoot":""}